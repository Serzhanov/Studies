(self.webpackChunkl3m_tpX_todolist_angular_y2022=self.webpackChunkl3m_tpX_todolist_angular_y2022||[]).push([[179],{2011:(it,Ae,P)=>{"use strict";P.d(Ae,{hO:()=>He,xv:()=>he,Dh:()=>ce,GT:()=>pe,cc:()=>De,on:()=>U,pX:()=>ee});var f=P(5e3),Q=P(127),N=P(5813);it=P.hmd(it);const de=["ngOnDestroy"],ee=(ae,Re,be,X={})=>new Proxy(ae,{get:(xe,we)=>be.runOutsideAngular(()=>{var qe;if(ae[we])return(null===(qe=null==X?void 0:X.spy)||void 0===qe?void 0:qe.get)&&X.spy.get(we,ae[we]),ae[we];if(de.indexOf(we)>-1)return()=>{};const $e=Re.toPromise().then(ie=>{const Z=ie&&ie[we];return"function"==typeof Z?Z.bind(ie):Z&&Z.then?Z.then(ne=>be.run(()=>ne)):be.run(()=>Z)});return new Proxy(()=>{},{get:(ie,Z)=>$e[Z],apply:(ie,Z,ne)=>$e.then(me=>{var se;const Ne=me&&me(...ne);return(null===(se=null==X?void 0:X.spy)||void 0===se?void 0:se.apply)&&X.spy.apply(we,ne,Ne),Ne})})})}),pe=(ae,Re)=>{Re.forEach(be=>{Object.getOwnPropertyNames(be.prototype||be).forEach(X=>{Object.defineProperty(ae.prototype,X,Object.getOwnPropertyDescriptor(be.prototype||be,X))})})};class re{constructor(Re){return Re}}const ce=new f.OlP("angularfire2.app.options"),he=new f.OlP("angularfire2.app.name");function U(ae,Re,be){const xe="object"==typeof be&&be||{};xe.name=xe.name||"string"==typeof be&&be||"[DEFAULT]";const qe=Q.Z.apps.filter($e=>$e&&$e.name===xe.name)[0]||Re.runOutsideAngular(()=>Q.Z.initializeApp(ae,xe));try{JSON.stringify(ae)!==JSON.stringify(qe.options)&&V("error",`${qe.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new re(qe)}const V=(ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ae](...Re)},Y={provide:re,useFactory:U,deps:[ce,f.R0b,[new f.FiY,he]]};let He=(()=>{class ae{constructor(be){Q.Z.registerVersion("angularfire",N.q4.full,"core"),Q.Z.registerVersion("angularfire",N.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,be.toString())}static initializeApp(be,X){return{ngModule:ae,providers:[{provide:ce,useValue:be},{provide:he,useValue:X}]}}}return ae.\u0275fac=function(be){return new(be||ae)(f.LFG(f.Lbi))},ae.\u0275mod=f.oAB({type:ae}),ae.\u0275inj=f.cJS({providers:[Y]}),ae})();function De(ae,Re,be,X,xe){const[,we,qe]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===ae)||[];if(we)return function Oe(ae,Re){try{return ae.toString()===Re.toString()}catch(be){return ae===Re}}(xe,qe)||(z("error",`${Re} was already initialized on the ${be} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),z("warn",{is:xe,was:qe})),we;{const $e=X();return globalThis.\u0275AngularfireInstanceCache.push([ae,$e,xe]),$e}}const Be=!!it.hot,z=(ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ae](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ae,P)=>{"use strict";P.d(Ae,{q4:()=>Ho,iC:()=>Hs,HU:()=>wc,vb:()=>Wl,JM:()=>vi});var f=P(5e3),Q=P(5867),N=P(5861),de=P(9681),ee=P(2090),pe=P(4859),re=P(1877),ce=P(2940);const he="@firebase/installations",U="0.5.5",Y=`w:${U}`,He="FIS_v2",Re=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(C){return C instanceof ee.ZR&&C.code.includes("request-failed")}function X({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function xe(C){return{token:C.token,requestStatus:2,expiresIn:me(C.expiresIn),creationTime:Date.now()}}function we(C,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(C,D){const F=(yield D.json()).error;return Re.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function ie(C,{refreshToken:D}){const x=$e(C);return x.append("Authorization",function se(C){return`${He} ${C}`}(D)),x}function Z(C){return ne.apply(this,arguments)}function ne(){return(ne=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function me(C){return Number(C.replace("s","000"))}function Ne(C,D){return le.apply(this,arguments)}function le(){return(le=(0,N.Z)(function*(C,{fid:D}){const x=X(C),te={method:"POST",headers:$e(C),body:JSON.stringify({fid:D,authVersion:He,appId:C.appId,sdkVersion:Y})},Se=yield Z(()=>fetch(x,te));if(Se.ok){const Le=yield Se.json();return{fid:Le.fid||D,registrationStatus:2,refreshToken:Le.refreshToken,authToken:xe(Le.authToken)}}throw yield we("Create Installation",Se)})).apply(this,arguments)}function yt(C){return new Promise(D=>{setTimeout(D,C)})}const Yn=/^[cdef][\w-]{21}$/;function gt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function cn(C){return function Lt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Yn.test(x)?x:""}catch(C){return""}}function Vt(C){return`${C.appName}!${C.appId}`}const Qn=new Map;function Jt(C,D){const x=Vt(C);St(x,D),function es(C,D){const x=function Jn(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=C=>{St(C.data.key,C.data.fid)}),zr}();x&&x.postMessage({key:C,fid:D}),function mr(){0===Qn.size&&zr&&(zr.close(),zr=null)}()}(x,D)}function St(C,D){const x=Qn.get(C);if(x)for(const F of x)F(D)}let zr=null;const Wr="firebase-installations-store";let xi=null;function pt(){return xi||(xi=(0,ce.openDb)("firebase-installations-database",1,C=>{0===C.oldVersion&&C.createObjectStore(Wr)})),xi}function Zr(C,D){return ln.apply(this,arguments)}function ln(){return(ln=(0,N.Z)(function*(C,D){const x=Vt(C),W=(yield pt()).transaction(Wr,"readwrite"),te=W.objectStore(Wr),Se=yield te.get(x);return yield te.put(D,x),yield W.complete,(!Se||Se.fid!==D.fid)&&Jt(C,D.fid),D})).apply(this,arguments)}function vn(C){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(C){const D=Vt(C),F=(yield pt()).transaction(Wr,"readwrite");yield F.objectStore(Wr).delete(D),yield F.complete})).apply(this,arguments)}function Kr(C,D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(C,D){const x=Vt(C),W=(yield pt()).transaction(Wr,"readwrite"),te=W.objectStore(Wr),Se=yield te.get(x),Le=D(Se);return void 0===Le?yield te.delete(x):yield te.put(Le,x),yield W.complete,Le&&(!Se||Se.fid!==Le.fid)&&Jt(C,Le.fid),Le})).apply(this,arguments)}function dn(C){return pi.apply(this,arguments)}function pi(){return(pi=(0,N.Z)(function*(C){let D;const x=yield Kr(C,F=>{const W=Ys(F),te=kt(C,W);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function Ys(C){return ts(C||{fid:gt(),registrationStatus:0})}function kt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Re.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(C,D){return ht.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:sr(C)}:{installationEntry:D}}function ht(){return(ht=(0,N.Z)(function*(C,D){try{return Zr(C,yield Ne(C,D))}catch(x){throw be(x)&&409===x.customData.serverCode?yield vn(C):yield Zr(C,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function sr(C){return gi.apply(this,arguments)}function gi(){return(gi=(0,N.Z)(function*(C){let D=yield bt(C);for(;1===D.registrationStatus;)yield yt(100),D=yield bt(C);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield dn(C);return F||x}return D})).apply(this,arguments)}function bt(C){return Kr(C,D=>{if(!D)throw Re.create("installation-not-found");return ts(D)})}function ts(C){return function or(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function yr(C,D){return L.apply(this,arguments)}function L(){return(L=(0,N.Z)(function*({appConfig:C,platformLoggerProvider:D},x){const F=j(C,x),W=ie(C,x),te=D.getImmediate({optional:!0});te&&W.append("x-firebase-client",te.getPlatformInfoString());const Le={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Y}})},Ze=yield Z(()=>fetch(F,Le));if(Ze.ok)return xe(yield Ze.json());throw yield we("Generate Auth Token",Ze)})).apply(this,arguments)}function j(C,{fid:D}){return`${X(C)}/${D}/authTokens:generate`}function $(C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(C,D=!1){let x;const F=yield Kr(C.appConfig,te=>{if(!Qe(te))throw Re.create("not-registered");const Se=te.authToken;if(!D&&wt(Se))return te;if(1===Se.requestStatus)return x=J(C,D),te;{if(!navigator.onLine)throw Re.create("app-offline");const Le=$t(te);return x=_e(C,Le),Le}});return x?yield x:F.authToken})).apply(this,arguments)}function J(C,D){return We.apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(C,D){let x=yield Ie(C.appConfig);for(;1===x.authToken.requestStatus;)yield yt(100),x=yield Ie(C.appConfig);const F=x.authToken;return 0===F.requestStatus?$(C,D):F})).apply(this,arguments)}function Ie(C){return Kr(C,D=>{if(!Qe(D))throw Re.create("not-registered");return function rn(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function _e(C,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(C,D){try{const x=yield yr(C,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Zr(C.appConfig,F),x}catch(x){if(!be(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Zr(C.appConfig,F)}else yield vn(C.appConfig);throw x}})).apply(this,arguments)}function Qe(C){return void 0!==C&&2===C.registrationStatus}function wt(C){return 2===C.requestStatus&&!function ot(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function $t(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function sa(){return(sa=(0,N.Z)(function*(C){const D=C,{installationEntry:x,registrationPromise:F}=yield dn(D.appConfig);return F?F.catch(console.error):$(D).catch(console.error),x.fid})).apply(this,arguments)}function oa(){return(oa=(0,N.Z)(function*(C,D=!1){const x=C;return yield kn(x.appConfig),(yield $(x,D)).token})).apply(this,arguments)}function kn(C){return _r.apply(this,arguments)}function _r(){return(_r=(0,N.Z)(function*(C){const{registrationPromise:D}=yield dn(C);D&&(yield D)})).apply(this,arguments)}function Io(C){return Re.create("missing-app-config-values",{valueName:C})}const Pr="installations",Dt=C=>{const D=C.getProvider("app").getImmediate(),x=function Xn(C){if(!C||!C.options)throw Io("App Configuration");if(!C.name)throw Io("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!C.options[x])throw Io(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:x,platformLoggerProvider:(0,de._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},Xt=C=>{const D=C.getProvider("app").getImmediate(),x=(0,de._getProvider)(D,Pr).getImmediate();return{getId:()=>function tu(C){return sa.apply(this,arguments)}(x),getToken:W=>function nu(C){return oa.apply(this,arguments)}(x,W)}};(function vr(){(0,de._registerComponent)(new pe.wA(Pr,Dt,"PUBLIC")),(0,de._registerComponent)(new pe.wA("installations-internal",Xt,"PRIVATE"))})(),(0,de.registerVersion)(he,U),(0,de.registerVersion)(he,U,"esm2017");const rs="@firebase/remote-config",hn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tl{constructor(D,x,F,W){this.client=D,this.storage=x,this.storageCache=F,this.logger=W}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,W=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${W}.`),W}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return W;D.eTag=W&&W.eTag;const te=yield x.client.fetch(D),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Se),te})()}}function iu(C=navigator){return C.languages&&C.languages[0]||C.language}class Tn{constructor(D,x,F,W,te,Se){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=W,this.apiKey=te,this.appId=Se}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ze={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:x.appId,language_code:iu()},Nt={method:"POST",headers:Le,body:JSON.stringify(Ze)},Gt=fetch(Se,Nt),An=new Promise((Ui,Vr)=>{D.signal.addEventListener(()=>{const Eu=new Error("The operation was aborted.");Eu.name="AbortError",Vr(Eu)})});let er;try{yield Promise.race([Gt,An]),er=yield Gt}catch(Ui){let Vr="fetch-client-network";throw"AbortError"===Ui.name&&(Vr="fetch-timeout"),hn.create(Vr,{originalErrorMessage:Ui.message})}let wn=er.status;const co=er.headers.get("ETag")||void 0;let Vi,Lr;if(200===er.status){let Ui;try{Ui=yield er.json()}catch(Vr){throw hn.create("fetch-client-parse",{originalErrorMessage:Vr.message})}Vi=Ui.entries,Lr=Ui.state}if("INSTANCE_STATE_UNSPECIFIED"===Lr?wn=500:"NO_CHANGE"===Lr?wn=304:("NO_TEMPLATE"===Lr||"EMPTY_CONFIG"===Lr)&&(Vi={}),304!==wn&&200!==wn)throw hn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:co,config:Vi}})()}}class ss{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var W=this;return(0,N.Z)(function*(){yield function Al(C,D){return new Promise((x,F)=>{const W=Math.max(D-Date.now(),0),te=setTimeout(x,W);C.addEventListener(()=>{clearTimeout(te),F(hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield W.client.fetch(D);return yield W.storage.deleteThrottleMetadata(),te}catch(te){if(!function Vp(C){if(!(C instanceof ee.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const Se={throttleEndTimeMillis:Date.now()+(0,ee.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Se),W.attemptFetch(D,Se)}})()}}class Bp{constructor(D,x,F,W,te){this.app=D,this._client=x,this._storageCache=F,this._storage=W,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ua(C,D){const x=C.target.error||void 0;return hn.create(D,{originalErrorMessage:x&&x.message})}const To="app_namespace_store";class Ml{constructor(D,x,F,W=function xl(){return new Promise((C,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(ua(F,"storage-open"))},x.onsuccess=F=>{C(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(To,{keyPath:"compositeKey"})}}catch(x){D(hn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,te)=>{const Le=F.transaction([To],"readonly").objectStore(To),Ze=x.createCompositeKey(D);try{const Nt=Le.get(Ze);Nt.onerror=Gt=>{te(ua(Gt,"storage-get"))},Nt.onsuccess=Gt=>{const An=Gt.target.result;W(An?An.value:void 0)}}catch(Nt){te(hn.create("storage-get",{originalErrorMessage:Nt&&Nt.message}))}})})()}set(D,x){var F=this;return(0,N.Z)(function*(){const W=yield F.openDbPromise;return new Promise((te,Se)=>{const Ze=W.transaction([To],"readwrite").objectStore(To),Nt=F.createCompositeKey(D);try{const Gt=Ze.put({compositeKey:Nt,value:x});Gt.onerror=An=>{Se(ua(An,"storage-set"))},Gt.onsuccess=()=>{te()}}catch(Gt){Se(hn.create("storage-set",{originalErrorMessage:Gt&&Gt.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,te)=>{const Le=F.transaction([To],"readwrite").objectStore(To),Ze=x.createCompositeKey(D);try{const Nt=Le.delete(Ze);Nt.onerror=Gt=>{te(ua(Gt,"storage-delete"))},Nt.onsuccess=()=>{W()}}catch(Nt){te(hn.create("storage-delete",{originalErrorMessage:Nt&&Nt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Ao{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),W=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const Le=yield W;Le&&(D.activeConfig=Le)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ty(){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Hp(){(0,de._registerComponent)(new pe.wA("remote-config",function C(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),W=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw hn.create("registration-window");if(!(0,ee.hl)())throw hn.create("indexed-db-unavailable");const{projectId:te,apiKey:Se,appId:Le}=F.options;if(!te)throw hn.create("registration-project-id");if(!Se)throw hn.create("registration-api-key");if(!Le)throw hn.create("registration-app-id");const Ze=new Ml(Le,F.name,x=x||"firebase"),Nt=new Ao(Ze),Gt=new re.Yd(rs);Gt.logLevel=re.in.ERROR;const An=new Tn(W,de.SDK_VERSION,x,te,Se,Le),er=new ss(An,Ze),wn=new Tl(er,Ze,Nt,Gt),co=new Bp(F,wn,Nt,Ze,Gt);return function Wt(C){const D=(0,ee.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(co),co},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(rs,"0.3.4"),(0,de.registerVersion)(rs,"0.3.4","esm2017")}();const Rs="/firebase-messaging-sw.js",Jr="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xo="google.c.a.c_id",Rl="google.c.a.c_l",$p="google.c.a.ts",Os="google.c.a.e";var as=(()=>{return(C=as||(as={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",as;var C})();function Xr(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nl(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),W=new Uint8Array(F.length);for(let te=0;te<F.length;++te)W[te]=F.charCodeAt(te);return W}const ar="fcm_token_details_db",Pl="fcm_token_object_Store";function kl(C){return ou.apply(this,arguments)}function ou(){return ou=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(ar))return null;let D=null;return(yield(0,ce.openDb)(ar,5,function(){var F=(0,N.Z)(function*(W){var te;if(W.oldVersion<2||!W.objectStoreNames.contains(Pl))return;const Se=W.transaction.objectStore(Pl),Le=yield Se.index("fcmSenderId").get(C);if(yield Se.clear(),Le)if(2===W.oldVersion){const Ze=Le;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;D={token:Ze.fcmToken,createTime:null!==(te=Ze.createTime)&&void 0!==te?te:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:Xr(Ze.vapidKey)}}}else if(3===W.oldVersion){const Ze=Le;D={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:Xr(Ze.auth),p256dh:Xr(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:Xr(Ze.vapidKey)}}}else if(4===W.oldVersion){const Ze=Le;D={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:Xr(Ze.auth),p256dh:Xr(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:Xr(Ze.vapidKey)}}}});return function(W){return F.apply(this,arguments)}}())).close(),yield(0,ce.deleteDb)(ar),yield(0,ce.deleteDb)("fcm_vapid_details_db"),yield(0,ce.deleteDb)("undefined"),au(D)?D:null}),ou.apply(this,arguments)}function au(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const us="firebase-messaging-store";let Ju=null;function Yt(){return Ju||(Ju=(0,ce.openDb)("firebase-messaging-database",1,C=>{0===C.oldVersion&&C.createObjectStore(us)})),Ju}function la(C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(C){const D=zn(C),F=yield(yield Yt()).transaction(us).objectStore(us).get(D);if(F)return F;{const W=yield kl(C.appConfig.senderId);if(W)return yield Zt(C,W),W}})).apply(this,arguments)}function Zt(C,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,N.Z)(function*(C,D){const x=zn(C),W=(yield Yt()).transaction(us,"readwrite");return yield W.objectStore(us).put(D,x),yield W.complete,D})).apply(this,arguments)}function da(C){return ro.apply(this,arguments)}function ro(){return(ro=(0,N.Z)(function*(C){const D=zn(C),F=(yield Yt()).transaction(us,"readwrite");yield F.objectStore(us).delete(D),yield F.complete})).apply(this,arguments)}function zn({appConfig:C}){return C.appId}const fn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cs(C,D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,N.Z)(function*(C,D){const x=yield ks(C),F=ha(D),W={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Ps(C.appConfig),W)).json()}catch(Se){throw fn.create("token-subscribe-failed",{errorInfo:Se})}if(te.error)throw fn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw fn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Mo(C,D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(C,D){const x=yield ks(C),F=ha(D.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Ps(C.appConfig)}/${D.token}`,W)).json()}catch(Se){throw fn.create("token-update-failed",{errorInfo:Se})}if(te.error)throw fn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw fn.create("token-update-no-token");return te.token})).apply(this,arguments)}function Xu(C,D){return kr.apply(this,arguments)}function kr(){return(kr=(0,N.Z)(function*(C,D){const F={method:"DELETE",headers:yield ks(C)};try{const te=yield(yield fetch(`${Ps(C.appConfig)}/${D}`,F)).json();if(te.error)throw fn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(W){throw fn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Ps({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function ks(C){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*({appConfig:C,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ha({p256dh:C,auth:D,endpoint:x,vapidKey:F}){const W={web:{endpoint:x,auth:D,p256dh:C}};return F!==no&&(W.web.applicationPubKey=F),W}const fa=6048e5;function Fl(C){return pa.apply(this,arguments)}function pa(){return(pa=(0,N.Z)(function*(C){const D=yield pn(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Xr(D.getKey("auth")),p256dh:Xr(D.getKey("p256dh"))},F=yield la(C.firebaseDependencies);if(F){if(ya(F.subscriptionOptions,x))return Date.now()>=F.createTime+fa?Ch(C,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Xu(C.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Tt(C.firebaseDependencies,x)}return Tt(C.firebaseDependencies,x)})).apply(this,arguments)}function ec(C){return ga.apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(C){const D=yield la(C.firebaseDependencies);D&&(yield Xu(C.firebaseDependencies,D.token),yield da(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ch(C,D){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(C,D){try{const x=yield Mo(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Zt(C.firebaseDependencies,F),x}catch(x){throw yield ec(C),x}})).apply(this,arguments)}function Tt(C,D){return ma.apply(this,arguments)}function ma(){return(ma=(0,N.Z)(function*(C,D){const F={token:yield cs(C,D),createTime:Date.now(),subscriptionOptions:D};return yield Zt(C,F),F.token})).apply(this,arguments)}function pn(C,D){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nl(D)})})).apply(this,arguments)}function ya(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function Er(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function tc(C,D){if(!D.notification)return;C.notification={};const x=D.notification.title;x&&(C.notification.title=x);const F=D.notification.body;F&&(C.notification.body=F);const W=D.notification.image;W&&(C.notification.image=W)}(D,C),function nc(C,D){!D.data||(C.data=D.data)}(D,C),function Ll(C,D){if(!D.fcmOptions)return;C.fcmOptions={};const x=D.fcmOptions.link;x&&(C.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(C.fcmOptions.analyticsLabel=F)}(D,C),D}function Vl(C){return"object"==typeof C&&!!C&&xo in C}function _a(C,D){const x=[];for(let F=0;F<C.length;F++)x.push(C.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Ln(C){return fn.create("missing-app-config-values",{valueName:C})}_a("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_a("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yi{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Ro(C){if(!C||!C.options)throw Ln("App Configuration Object");if(!C.name)throw Ln("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const F of D)if(!x[F])throw Ln(F);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:W,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function rc(C){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Rs,{scope:Jr}),C.swRegistration.update().catch(()=>{})}catch(D){throw fn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function ls(C,D){return va.apply(this,arguments)}function va(){return(va=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield rc(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Ul(C,D){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=no)})).apply(this,arguments)}function io(){return(io=(0,N.Z)(function*(C,D){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield Ul(C,null==D?void 0:D.vapidKey),yield ls(C,null==D?void 0:D.serviceWorkerRegistration),Fl(C)})).apply(this,arguments)}function ic(C,D,x){return wa.apply(this,arguments)}function wa(){return(wa=(0,N.Z)(function*(C,D,x){const F=sc(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[xo],message_name:x[Rl],message_time:x[$p],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sc(C){switch(C){case as.NOTIFICATION_CLICKED:return"notification_open";case as.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function du(){return(du=(0,N.Z)(function*(C,D){const x=D.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===as.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Er(x)):C.onMessageHandler.next(Er(x)));const F=x.data;Vl(F)&&"1"===F[Os]&&(yield ic(C,x.messageType,F))})).apply(this,arguments)}const so="@firebase/messaging",oo=C=>{const D=new yi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Gp(C,D){return du.apply(this,arguments)}(D,x)),D},jl=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function Bl(C,D){return io.apply(this,arguments)}(D,F)}};function Oo(){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*(){try{yield(0,ee.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Dh(){(0,de._registerComponent)(new pe.wA("messaging",oo,"PUBLIC")),(0,de._registerComponent)(new pe.wA("messaging-internal",jl,"PRIVATE")),(0,de.registerVersion)(so,"0.9.9"),(0,de.registerVersion)(so,"0.9.9","esm2017")}();const Hl="analytics",ac="firebase_id",uc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",Kn=new re.Yd("@firebase/analytics");function Ah(C){return Promise.all(C.map(D=>D.catch(x=>x)))}function fs(C,D){const x=document.createElement("script");x.src=`${hu}?l=${C}&id=${D}`,x.async=!0,document.head.appendChild(x)}function qp(C,D,x,F,W,te){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,N.Z)(function*(C,D,x,F,W,te){const Se=F[W];try{if(Se)yield D[Se];else{const Ze=(yield Ah(x)).find(Nt=>Nt.measurementId===W);Ze&&(yield D[Ze.appId])}}catch(Le){Kn.error(Le)}C("config",W,te)})).apply(this,arguments)}function Da(C,D,x,F,W){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(C,D,x,F,W){try{let te=[];if(W&&W.send_to){let Se=W.send_to;Array.isArray(Se)||(Se=[Se]);const Le=yield Ah(x);for(const Ze of Se){const Nt=Le.find(An=>An.measurementId===Ze),Gt=Nt&&D[Nt.appId];if(!Gt){te=[];break}te.push(Gt)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),C("event",F,W||{})}catch(te){Kn.error(te)}})).apply(this,arguments)}function pu(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(hu))return D;return null}const Je=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ei=new class ba{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function wr(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function At(C){return ti.apply(this,arguments)}function ti(){return(ti=(0,N.Z)(function*(C){var D;const{appId:x,apiKey:F}=C,W={method:"GET",headers:wr(F)},te=uc.replace("{app-id}",x),Se=yield fetch(te,W);if(200!==Se.status&&304!==Se.status){let Le="";try{const Ze=yield Se.json();(null===(D=Ze.error)||void 0===D?void 0:D.message)&&(Le=Ze.error.message)}catch(Ze){}throw Je.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Le})}return Se.json()})).apply(this,arguments)}function ft(C){return Po.apply(this,arguments)}function Po(){return(Po=(0,N.Z)(function*(C,D=ei,x){const{appId:F,apiKey:W,measurementId:te}=C.options;if(!F)throw Je.create("no-app-id");if(!W){if(te)return{measurementId:te,appId:F};throw Je.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new xh;return setTimeout((0,N.Z)(function*(){Le.abort()}),void 0!==x?x:6e4),Ls({appId:F,apiKey:W,measurementId:te},Se,Le,D)})).apply(this,arguments)}function Ls(C,D,x){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:x},F,W=ei){const{appId:te,measurementId:Se}=C;try{yield $l(F,D)}catch(Le){if(Se)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:te,measurementId:Se};throw Le}try{const Le=yield At(C);return W.deleteThrottleMetadata(te),Le}catch(Le){if(!cc(Le)){if(W.deleteThrottleMetadata(te),Se)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:te,measurementId:Se};throw Le}const Ze=503===Number(Le.customData.httpStatus)?(0,ee.$s)(x,W.intervalMillis,30):(0,ee.$s)(x,W.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:x+1};return W.setThrottleMetadata(te,Nt),Kn.debug(`Calling attemptFetch again in ${Ze} millis`),Ls(C,Nt,F,W)}})).apply(this,arguments)}function $l(C,D){return new Promise((x,F)=>{const W=Math.max(D-Date.now(),0),te=setTimeout(x,W);C.addEventListener(()=>{clearTimeout(te),F(Je.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function cc(C){if(!(C instanceof ee.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class xh{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function gu(){return ps.apply(this,arguments)}function ps(){return(ps=(0,N.Z)(function*(){if(!(0,ee.hl)())return Kn.warn(Je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(C){return Kn.warn(Je.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function cr(){return(cr=(0,N.Z)(function*(C,D,x,F,W,te,Se){var Le;const Ze=ft(C);Ze.then(wn=>{x[wn.measurementId]=wn.appId,C.options.measurementId&&wn.measurementId!==C.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>Kn.error(wn)),D.push(Ze);const Nt=gu().then(wn=>{if(wn)return F.getId()}),[Gt,An]=yield Promise.all([Ze,Nt]);pu()||fs(te,Gt.measurementId),W("js",new Date);const er=null!==(Le=null==Se?void 0:Se.config)&&void 0!==Le?Le:{};return er.origin="firebase",er.update=!0,null!=An&&(er[ac]=An),W("config",Gt.measurementId,er),Gt.measurementId})).apply(this,arguments)}class lc{constructor(D){this.app=D}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},dc=[];const ko={};let mu,gs,Fo="dataLayer",an=!1;function _u(C,D,x){!function ni(){const C=[];if((0,ee.ru)()&&C.push("This is a browser extension environment."),(0,ee.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,W)=>`(${W+1}) ${F}`).join(" "),x=Je.create("invalid-analytics-context",{errorInfo:D});Kn.warn(x.message)}}();const F=C.options.appId;if(!F)throw Je.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Je.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ir[F])throw Je.create("already-exists",{id:F});if(!an){!function No(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Fo);const{wrappedGtag:te,gtagCore:Se}=function zp(C,D,x,F,W){let te=function(...Se){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(te=window[W]),window[W]=function Sh(C,D,x,F){function te(){return(te=(0,N.Z)(function*(Se,Le,Ze){try{"event"===Se?yield Da(C,D,x,Le,Ze):"config"===Se?yield qp(C,D,x,F,Le,Ze):C("set",Le)}catch(Nt){Kn.error(Nt)}})).apply(this,arguments)}return function W(Se,Le,Ze){return te.apply(this,arguments)}}(te,C,D,x),{gtagCore:te,wrappedGtag:window[W]}}(Ir,dc,ko,Fo,"gtag");gs=te,mu=Se,an=!0}return Ir[F]=function Vs(C,D,x,F,W,te,Se){return cr.apply(this,arguments)}(C,dc,ko,D,mu,Fo,x),new lc(C)}function Vo(){return(Vo=(0,N.Z)(function*(C,D,x,F,W){if(W&&W.global)C("event",x,F);else{const te=yield D;C("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function Rh(){return pc.apply(this,arguments)}function pc(){return(pc=(0,N.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch(C){return!1}})).apply(this,arguments)}const kh="@firebase/analytics";!function Wp(){(0,de._registerComponent)(new pe.wA(Hl,(D,{options:x})=>_u(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,de._registerComponent)(new pe.wA("analytics-internal",function C(D){try{const x=D.getProvider(Hl).getImmediate();return{logEvent:(F,W,te)=>function Gl(C,D,x,F){C=(0,ee.m9)(C),function hc(C,D,x,F,W){return Vo.apply(this,arguments)}(gs,Ir[C.app.options.appId],D,x,F).catch(W=>Kn.error(W))}(x,F,W,te)}}catch(x){throw Je.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,de.registerVersion)(kh,"0.7.5"),(0,de.registerVersion)(kh,"0.7.5","esm2017")}();var Bo=P(4408),yn=P(7565);const jo=new class mc extends yn.v{}(class ry extends Bo.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Ma=P(4986),lr=P(8505),ri=P(9468),ql=P(5363);const Ho=new f.GfV("7.2.1"),ii="__angularfire_symbol__analyticsIsSupportedValue",Pi="__angularfire_symbol__analyticsIsSupported",Bs="__angularfire_symbol__remoteConfigIsSupportedValue",yc="__angularfire_symbol__remoteConfigIsSupported",zl="__angularfire_symbol__messagingIsSupportedValue",_c="__angularfire_symbol__messagingIsSupported";function vi(C,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(Se=>Se.app===x);if(1===te.length)return te[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[Pi]||(globalThis[Pi]=Rh().then(C=>globalThis[ii]=C).catch(()=>globalThis[ii]=!1)),globalThis[_c]||(globalThis[_c]=Oo().then(C=>globalThis[zl]=C).catch(()=>globalThis[zl]=!1)),globalThis[yc]||(globalThis[yc]=ty().then(C=>globalThis[Bs]=C).catch(()=>globalThis[Bs]=!1));const Wl=(C,D)=>{const x=D?[D]:(0,Q.C6)(),F=[];return x.forEach(W=>{W.container.getProvider(C).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ki(){}class Zl{constructor(D,x=jo){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const W=this.zone;return this.delegate.schedule(function(Se){W.runGuarded(()=>{D.apply(this,[Se])})},x,F)}}class Ec{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ki,{},ki,ki)),x.pipe((0,lr.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wc=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Zl(Zone.current)),this.insideAngular=x.run(()=>new Zl(Zone.current,Ma.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(f.LFG(f.R0b))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Fi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Hs(C){return Fi(),function vu(C){return function(x){return(x=x.lift(new Ec(C.ngZone))).pipe((0,ri.R)(C.outsideAngular),(0,ql.Q)(C.insideAngular))}}(Fi())(C)}},2090:(it,Ae,P)=>{"use strict";P.d(Ae,{BH:()=>He,LL:()=>le,ZR:()=>Ne,zI:()=>ne,US:()=>pe,tV:()=>he,h$:()=>re,$s:()=>bt,r3:()=>qr,Sg:()=>De,ne:()=>xi,vZ:()=>zr,ZB:()=>V,pd:()=>As,m9:()=>yr,z$:()=>Oe,jU:()=>ae,ru:()=>Re,d:()=>X,xb:()=>St,w1:()=>xe,hl:()=>ie,uI:()=>Be,UG:()=>z,b$:()=>be,G6:()=>$e,Mn:()=>we,xO:()=>mr,zd:()=>Si,eu:()=>Z});const de=function(L){const j=[];let $=0;for(let Ee=0;Ee<L.length;Ee++){let J=L.charCodeAt(Ee);J<128?j[$++]=J:J<2048?(j[$++]=J>>6|192,j[$++]=63&J|128):55296==(64512&J)&&Ee+1<L.length&&56320==(64512&L.charCodeAt(Ee+1))?(J=65536+((1023&J)<<10)+(1023&L.charCodeAt(++Ee)),j[$++]=J>>18|240,j[$++]=J>>12&63|128,j[$++]=J>>6&63|128,j[$++]=63&J|128):(j[$++]=J>>12|224,j[$++]=J>>6&63|128,j[$++]=63&J|128)}return j},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,j){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let J=0;J<L.length;J+=3){const We=L[J],Ie=J+1<L.length,_e=Ie?L[J+1]:0,Ue=J+2<L.length,Qe=Ue?L[J+2]:0;let $t=(15&_e)<<2|Qe>>6,rn=63&Qe;Ue||(rn=64,Ie||($t=64)),Ee.push($[We>>2],$[(3&We)<<4|_e>>4],$[$t],$[rn])}return Ee.join("")},encodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(L):this.encodeByteArray(de(L),j)},decodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(L):function(L){const j=[];let $=0,Ee=0;for(;$<L.length;){const J=L[$++];if(J<128)j[Ee++]=String.fromCharCode(J);else if(J>191&&J<224){const We=L[$++];j[Ee++]=String.fromCharCode((31&J)<<6|63&We)}else if(J>239&&J<365){const Ue=((7&J)<<18|(63&L[$++])<<12|(63&L[$++])<<6|63&L[$++])-65536;j[Ee++]=String.fromCharCode(55296+(Ue>>10)),j[Ee++]=String.fromCharCode(56320+(1023&Ue))}else{const We=L[$++],Ie=L[$++];j[Ee++]=String.fromCharCode((15&J)<<12|(63&We)<<6|63&Ie)}}return j.join("")}(this.decodeStringToByteArray(L,j))},decodeStringToByteArray(L,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let J=0;J<L.length;){const We=$[L.charAt(J++)],_e=J<L.length?$[L.charAt(J)]:0;++J;const Qe=J<L.length?$[L.charAt(J)]:64;++J;const ot=J<L.length?$[L.charAt(J)]:64;if(++J,null==We||null==_e||null==Qe||null==ot)throw Error();Ee.push(We<<2|_e>>4),64!==Qe&&(Ee.push(_e<<4&240|Qe>>2),64!==ot&&Ee.push(Qe<<6&192|ot))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},re=function(L){const j=de(L);return pe.encodeByteArray(j,!0)},ce=function(L){return re(L).replace(/\./g,"")},he=function(L){try{return pe.decodeString(L,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function V(L,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!Y($)||(L[$]=V(L[$],j[$]));return L}function Y(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,Ee)=>{$?this.reject($):this.resolve(Ee),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,Ee))}}}function De(L,j){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=j||"demo-project",J=L.iat||0,We=L.sub||L.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:J,exp:J+3600,auth_time:J,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Ie)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function z(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function ae(){return"object"==typeof self&&self.self===self}function Re(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function X(){return Oe().indexOf("Electron/")>=0}function xe(){const L=Oe();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function we(){return Oe().indexOf("MSAppHost/")>=0}function $e(){return!z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){return"object"==typeof indexedDB}function Z(){return new Promise((L,j)=>{try{let $=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(Ee);J.onsuccess=()=>{J.result.close(),$||self.indexedDB.deleteDatabase(Ee),L(!0)},J.onupgradeneeded=()=>{$=!1},J.onerror=()=>{var We;j((null===(We=J.error)||void 0===We?void 0:We.message)||"")}}catch($){j($)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(j,$,Ee){super($),this.code=j,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(j,$,Ee){this.service=j,this.serviceName=$,this.errors=Ee}create(j,...$){const Ee=$[0]||{},J=`${this.service}/${j}`,We=this.errors[j],Ie=We?function yt(L,j){return L.replace(Lt,($,Ee)=>{const J=j[Ee];return null!=J?String(J):`<${Ee}?>`})}(We,Ee):"Error";return new Ne(J,`${this.serviceName}: ${Ie} (${J}).`,Ee)}}const Lt=/\{\$([^}]+)}/g;function qr(L,j){return Object.prototype.hasOwnProperty.call(L,j)}function St(L){for(const j in L)if(Object.prototype.hasOwnProperty.call(L,j))return!1;return!0}function zr(L,j){if(L===j)return!0;const $=Object.keys(L),Ee=Object.keys(j);for(const J of $){if(!Ee.includes(J))return!1;const We=L[J],Ie=j[J];if(Jn(We)&&Jn(Ie)){if(!zr(We,Ie))return!1}else if(We!==Ie)return!1}for(const J of Ee)if(!$.includes(J))return!1;return!0}function Jn(L){return null!==L&&"object"==typeof L}function mr(L){const j=[];for(const[$,Ee]of Object.entries(L))Array.isArray(Ee)?Ee.forEach(J=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(J))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(Ee));return j.length?"&"+j.join("&"):""}function Si(L){const j={};return L.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[J,We]=Ee.split("=");j[decodeURIComponent(J)]=decodeURIComponent(We)}}),j}function As(L){const j=L.indexOf("?");if(!j)return"";const $=L.indexOf("#",j);return L.substring(j,$>0?$:void 0)}function xi(L,j){const $=new pt(L,j);return $.subscribe.bind($)}class pt{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(Ee=>{this.error(Ee)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,Ee){let J;if(void 0===j&&void 0===$&&void 0===Ee)throw new Error("Missing Observer.");J=function ln(L,j){if("object"!=typeof L||null===L)return!1;for(const $ of j)if($ in L&&"function"==typeof L[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:Ee},void 0===J.next&&(J.next=vn),void 0===J.error&&(J.error=vn),void 0===J.complete&&(J.complete=vn);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(Ie){}}),this.observers.push(J),We}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}function bt(L,j=1e3,$=2){const Ee=j*Math.pow($,L),J=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+J)}function yr(L){return L&&L._delegate?L._delegate:L}},735:(it,Ae,P)=>{"use strict";var f=P(5e3);let Q=null;function N(){return Q}const re=new f.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function he(){return(0,f.LFG)(V)}()},providedIn:"platform"}),n})();const U=new f.OlP("Location Initialized");let V=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return new V((0,f.LFG)(re))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let z=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ae(n){const e=(0,f.LFG)(re).location;return new be((0,f.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new f.OlP("appBaseHref");let be=(()=>{class n extends z{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),X=(()=>{class n extends z{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Be(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Be(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe($e(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=De,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(f.LFG(z),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function we(){return new xe((0,f.LFG)(z),(0,f.LFG)(ce))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))(),me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),Ne=(()=>((Ne=Ne||{})[Ne.Short=0]="Short",Ne[Ne.Medium=1]="Medium",Ne[Ne.Long=2]="Long",Ne[Ne.Full=3]="Full",Ne))(),le=(()=>((le=le||{})[le.Decimal=0]="Decimal",le[le.Group=1]="Group",le[le.List=2]="List",le[le.PercentSign=3]="PercentSign",le[le.PlusSign=4]="PlusSign",le[le.MinusSign=5]="MinusSign",le[le.Exponential=6]="Exponential",le[le.SuperscriptingExponent=7]="SuperscriptingExponent",le[le.PerMille=8]="PerMille",le[le.Infinity=9]="Infinity",le[le.NaN=10]="NaN",le[le.TimeSeparator=11]="TimeSeparator",le[le.CurrencyDecimal=12]="CurrencyDecimal",le[le.CurrencyGroup=13]="CurrencyGroup",le))();function Jt(n,e){return ln((0,f.cg1)(n)[f.wAp.DateFormat],e)}function qr(n,e){return ln((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Ht(n,e){return ln((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function St(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===le.CurrencyDecimal)return t[f.wAp.NumberSymbols][le.Decimal];if(e===le.CurrencyGroup)return t[f.wAp.NumberSymbols][le.Group]}return r}const As=f.kL8;function Wr(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ln(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function vn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const dn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,pi={},Ys=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var kt=(()=>((kt=kt||{})[kt.Short=0]="Short",kt[kt.ShortGMT=1]="ShortGMT",kt[kt.Long=2]="Long",kt[kt.Extended=3]="Extended",kt))(),rt=(()=>((rt=rt||{})[rt.FullYear=0]="FullYear",rt[rt.Month=1]="Month",rt[rt.Date=2]="Date",rt[rt.Hours=3]="Hours",rt[rt.Minutes=4]="Minutes",rt[rt.Seconds=5]="Seconds",rt[rt.FractionalSeconds=6]="FractionalSeconds",rt[rt.Day=7]="Day",rt))(),ht=(()=>((ht=ht||{})[ht.DayPeriods=0]="DayPeriods",ht[ht.Days=1]="Days",ht[ht.Months=2]="Months",ht[ht.Eras=3]="Eras",ht))();function sr(n,e,t,r){let o=function nu(n){if(kn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,h=1]=n.split("-").map(m=>+m);return gi(o,u-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(dn))return function oa(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,h,m,w,b),e}(r)}const e=new Date(n);if(!kn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=bt(t,e)||e;let m,h=[];for(;e;){if(m=Ys.exec(e),!m){h.push(e);break}{h=h.concat(m.slice(1));const M=h.pop();if(!M)break;e=M}}let w=o.getTimezoneOffset();r&&(w=rn(r,w),o=function sa(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function tu(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(rn(e,o)-o))}(o,r,!0));let b="";return h.forEach(M=>{const O=function $t(n){if(ot[n])return ot[n];let e;switch(n){case"G":case"GG":case"GGG":e=$(ht.Eras,se.Abbreviated);break;case"GGGG":e=$(ht.Eras,se.Wide);break;case"GGGGG":e=$(ht.Eras,se.Narrow);break;case"y":e=L(rt.FullYear,1,0,!1,!0);break;case"yy":e=L(rt.FullYear,2,0,!0,!0);break;case"yyy":e=L(rt.FullYear,3,0,!1,!0);break;case"yyyy":e=L(rt.FullYear,4,0,!1,!0);break;case"Y":e=wt(1);break;case"YY":e=wt(2,!0);break;case"YYY":e=wt(3);break;case"YYYY":e=wt(4);break;case"M":case"L":e=L(rt.Month,1,1);break;case"MM":case"LL":e=L(rt.Month,2,1);break;case"MMM":e=$(ht.Months,se.Abbreviated);break;case"MMMM":e=$(ht.Months,se.Wide);break;case"MMMMM":e=$(ht.Months,se.Narrow);break;case"LLL":e=$(ht.Months,se.Abbreviated,me.Standalone);break;case"LLLL":e=$(ht.Months,se.Wide,me.Standalone);break;case"LLLLL":e=$(ht.Months,se.Narrow,me.Standalone);break;case"w":e=Qe(1);break;case"ww":e=Qe(2);break;case"W":e=Qe(1,!0);break;case"d":e=L(rt.Date,1);break;case"dd":e=L(rt.Date,2);break;case"c":case"cc":e=L(rt.Day,1);break;case"ccc":e=$(ht.Days,se.Abbreviated,me.Standalone);break;case"cccc":e=$(ht.Days,se.Wide,me.Standalone);break;case"ccccc":e=$(ht.Days,se.Narrow,me.Standalone);break;case"cccccc":e=$(ht.Days,se.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=$(ht.Days,se.Abbreviated);break;case"EEEE":e=$(ht.Days,se.Wide);break;case"EEEEE":e=$(ht.Days,se.Narrow);break;case"EEEEEE":e=$(ht.Days,se.Short);break;case"a":case"aa":case"aaa":e=$(ht.DayPeriods,se.Abbreviated);break;case"aaaa":e=$(ht.DayPeriods,se.Wide);break;case"aaaaa":e=$(ht.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":e=$(ht.DayPeriods,se.Abbreviated,me.Standalone,!0);break;case"bbbb":e=$(ht.DayPeriods,se.Wide,me.Standalone,!0);break;case"bbbbb":e=$(ht.DayPeriods,se.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=$(ht.DayPeriods,se.Abbreviated,me.Format,!0);break;case"BBBB":e=$(ht.DayPeriods,se.Wide,me.Format,!0);break;case"BBBBB":e=$(ht.DayPeriods,se.Narrow,me.Format,!0);break;case"h":e=L(rt.Hours,1,-12);break;case"hh":e=L(rt.Hours,2,-12);break;case"H":e=L(rt.Hours,1);break;case"HH":e=L(rt.Hours,2);break;case"m":e=L(rt.Minutes,1);break;case"mm":e=L(rt.Minutes,2);break;case"s":e=L(rt.Seconds,1);break;case"ss":e=L(rt.Seconds,2);break;case"S":e=L(rt.FractionalSeconds,1);break;case"SS":e=L(rt.FractionalSeconds,2);break;case"SSS":e=L(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=J(kt.Short);break;case"ZZZZZ":e=J(kt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=J(kt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=J(kt.Long);break;default:return null}return ot[n]=e,e}(M);b+=O?O(o,t,w):"''"===M?"'":M.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function gi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function bt(n,e){const t=function Lt(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(pi[t]=pi[t]||{},pi[t][e])return pi[t][e];let r="";switch(e){case"shortDate":r=Jt(n,Ne.Short);break;case"mediumDate":r=Jt(n,Ne.Medium);break;case"longDate":r=Jt(n,Ne.Long);break;case"fullDate":r=Jt(n,Ne.Full);break;case"shortTime":r=qr(n,Ne.Short);break;case"mediumTime":r=qr(n,Ne.Medium);break;case"longTime":r=qr(n,Ne.Long);break;case"fullTime":r=qr(n,Ne.Full);break;case"short":const o=bt(n,"shortTime"),u=bt(n,"shortDate");r=ts(Ht(n,Ne.Short),[o,u]);break;case"medium":const h=bt(n,"mediumTime"),m=bt(n,"mediumDate");r=ts(Ht(n,Ne.Medium),[h,m]);break;case"long":const w=bt(n,"longTime"),b=bt(n,"longDate");r=ts(Ht(n,Ne.Long),[w,b]);break;case"full":const M=bt(n,"fullTime"),O=bt(n,"fullDate");r=ts(Ht(n,Ne.Full),[M,O])}return r&&(pi[t][e]=r),r}function ts(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function or(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.substr(h.length-e)),u+h}function L(n,e,t=0,r=!1,o=!1){return function(u,h){let m=function j(n,e){switch(n){case rt.FullYear:return e.getFullYear();case rt.Month:return e.getMonth();case rt.Date:return e.getDate();case rt.Hours:return e.getHours();case rt.Minutes:return e.getMinutes();case rt.Seconds:return e.getSeconds();case rt.FractionalSeconds:return e.getMilliseconds();case rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===rt.Hours)0===m&&-12===t&&(m=12);else if(n===rt.FractionalSeconds)return function yr(n,e){return or(n,3).substr(0,e)}(m,e);const w=St(h,le.MinusSign);return or(m,e,w,r,o)}}function $(n,e,t=me.Format,r=!1){return function(o,u){return function Ee(n,e,t,r,o,u){switch(t){case ht.Months:return function gt(n,e,t){const r=(0,f.cg1)(n),u=ln([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return ln(u,t)}(e,o,r)[n.getMonth()];case ht.Days:return function nt(n,e,t){const r=(0,f.cg1)(n),u=ln([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return ln(u,t)}(e,o,r)[n.getDay()];case ht.DayPeriods:const h=n.getHours(),m=n.getMinutes();if(u){const b=function xi(n){const e=(0,f.cg1)(n);return Wr(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?vn(r):[vn(r[0]),vn(r[1])])}(e),M=function pt(n,e,t){const r=(0,f.cg1)(n);Wr(r);const u=ln([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return ln(u,t)||[]}(e,o,r),O=b.findIndex(H=>{if(Array.isArray(H)){const[G,oe]=H,Ve=h>=G.hours&&m>=G.minutes,Ke=h<oe.hours||h===oe.hours&&m<oe.minutes;if(G.hours<oe.hours){if(Ve&&Ke)return!0}else if(Ve||Ke)return!0}else if(H.hours===h&&H.minutes===m)return!0;return!1});if(-1!==O)return M[O]}return function Yn(n,e,t){const r=(0,f.cg1)(n),u=ln([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return ln(u,t)}(e,o,r)[h<12?0:1];case ht.Eras:return function cn(n,e){return ln((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function J(n){return function(e,t,r){const o=-1*r,u=St(t,le.MinusSign),h=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case kt.Short:return(o>=0?"+":"")+or(h,2,u)+or(Math.abs(o%60),2,u);case kt.ShortGMT:return"GMT"+(o>=0?"+":"")+or(h,1,u);case kt.Long:return"GMT"+(o>=0?"+":"")+or(h,2,u)+":"+or(Math.abs(o%60),2,u);case kt.Extended:return 0===r?"Z":(o>=0?"+":"")+or(h,2,u)+":"+or(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ue(n){return gi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Qe(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();o=1+Math.floor((h+u)/7)}else{const u=Ue(t),h=function _e(n){const e=gi(n,0,1).getDay();return gi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-h.getTime();o=1+Math.round(m/6048e5)}return or(o,n,St(r,le.MinusSign))}}function wt(n,e=!1){return function(t,r){return or(Ue(t).getFullYear(),n,St(r,le.MinusSign),e)}}const ot={};function rn(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function kn(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ut{}let hn=(()=>{class n extends Ut{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(As(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Xs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class bo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bo(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),xs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{xs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xs(n,e){n.context.$implicit=e.item}let qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Dl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Dl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wt{constructor(){this.$implicit=null,this.ngIf=null}}function Dl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}function Tn(n,e){return new f.vHH(2100,"")}class Al{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Vp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ss=new Vp,Up=new Al;let su=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return ss;if((0,f.F4k)(t))return Up;throw Tn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})();const jp=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let xl=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",o,u){var h;if(null==t||""===t||t!=t)return null;try{return sr(t,r,u||this.locale,null!==(h=null!=o?o:this.defaultTimezone)&&void 0!==h?h:void 0)}catch(m){throw Tn()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(jp,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0}),n})(),Os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:Ut,useClass:hn}]}),n})();function ur(n){return"server"===n}let au=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new uu((0,f.LFG)(re),window)}),n})();class uu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function us(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qu(this.window.history)||Qu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yt{}class Ns extends class la extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ee(n){Q||(Q=n)}(new Ns)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return Zt=Zt||document.querySelector("base"),Zt?Zt.getAttribute("href"):null}();return null==t?null:function ro(n){da=da||document.createElement("a"),da.setAttribute("href",n);const e=da.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xs(document.cookie,e)}}let da,Zt=null;const zn=new f.OlP("TRANSITION_ID"),fn=[{provide:f.ip1,useFactory:function lu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[zn,re,f.zs3],multi:!0}];class cs{static init(){(0,f.VLi)(new cs)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Mo=new f.OlP("EventManagerPlugins");let Mi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mo),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Xu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ks))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ks(n){N().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ha=/%COMP%/g;function Ce(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ce(n,o,t):(o=o.replace(ha,n),t.push(o))}return t}function Tt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Fs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new tc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new nc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ce(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mi),f.LFG(Ps),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Fs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ut[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ut[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tt(r)):this.eventManager.addEventListener(e,t,Tt(r))}}class tc extends Fs{constructor(e,t,r,o){super(e),this.component=r;const u=Ce(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ga(n){return"_ngcontent-%COMP%".replace(ha,n)}(o+"-"+r.id),this.hostAttr=function Ch(n){return"_nghost-%COMP%".replace(ha,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class nc extends Fs{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ce(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ll=(()=>{class n extends Xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=["alt","control","meta","shift"],Ro={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ln={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rc=(()=>{class n extends Xu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(Vl.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Ri(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ln.hasOwnProperty(e)&&(e=Ln[e]))}return Ro[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Vl.forEach(u=>{u!=o&&yi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ls(){Ns.makeCurrent(),cs.init()},multi:!0},{provide:re,useFactory:function Ul(){return(0,f.RDi)(document),document},deps:[]}]),io=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function va(){return new f.qLn},deps:[]},{provide:Mo,useClass:Ll,multi:!0,deps:[re,f.R0b,f.Lbi]},{provide:Mo,useClass:rc,multi:!0,deps:[re]},{provide:pn,useClass:pn,deps:[Mi,Ps,f.AFp]},{provide:f.FYo,useExisting:pn},{provide:kr,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[re]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Mi,useClass:Mi,deps:[Mo,f.R0b]},{provide:Yt,useClass:Wn,deps:[]}];let ic=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:zn,useExisting:f.AFp},fn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:io,imports:[Os,f.hGG]}),n})();"undefined"!=typeof window&&window;var pu=P(7669),en=P(8996);function Je(...n){const e=(0,pu.yG)(n);return(0,en.D)(n,e)}var on=P(8306),Vn=P(5577),ba=P(576);function ei(n,e){return(0,ba.m)(e)?(0,Vn.z)(n,e,1):(0,Vn.z)(n,1)}var wr=P(4482),At=P(5403);function ti(n,e){return(0,wr.e)((t,r)=>{let o=0;t.subscribe((0,At.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var ft=P(4004);class Po{}class Ls{}class Ni{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(h):this.headers.set(u,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ni?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ni;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ni?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let h=this.headers.get(t);if(!h)return;h=h.filter(m=>-1===u.indexOf(m)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class $l{encodeKey(e){return ps(e)}encodeValue(e){return ps(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xh=/%(\d[a-f0-9])/gi,gu={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ps(n){return encodeURIComponent(n).replace(xh,(e,t)=>{var r;return null!==(r=gu[t])&&void 0!==r?r:e})}function Vs(n){return`${n}`}class cr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $l,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function cc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[h,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],w=t.get(h)||[];w.push(m),t.set(h,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new cr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Vs(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Vs(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ir{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ko(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Fo(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Lo(n){return"undefined"!=typeof FormData&&n instanceof FormData}class gs{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function dc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ni),this.context||(this.context=new Ir),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+h}}else this.params=new cr,this.urlWithParams=t}serializeBody(){return null===this.body?null:ko(this.body)||Fo(this.body)||Lo(this.body)||function mu(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof cr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lo(this.body)?null:Fo(this.body)?this.body.type||null:ko(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,M=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((H,G)=>H.set(G,e.setHeaders[G]),b)),e.setParams&&(M=Object.keys(e.setParams).reduce((H,G)=>H.set(G,e.setParams[G]),M)),new gs(r,o,h,{params:M,headers:b,context:O,reportProgress:w,responseType:u,withCredentials:m})}}var an=(()=>((an=an||{})[an.Sent=0]="Sent",an[an.UploadProgress=1]="UploadProgress",an[an.ResponseHeader=2]="ResponseHeader",an[an.DownloadProgress=3]="DownloadProgress",an[an.Response=4]="Response",an[an.User=5]="User",an))();class yu{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ni,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ni extends yu{constructor(e={}){super(e),this.type=an.ResponseHeader}clone(e={}){return new ni({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _u extends yu{constructor(e={}){super(e),this.type=an.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _u({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hc extends yu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Vo(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ms=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof gs)u=t;else{let w,b;w=o.headers instanceof Ni?o.headers:new Ni(o.headers),o.params&&(b=o.params instanceof cr?o.params:new cr({fromObject:o.params})),u=new gs(t,r,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=Je(u).pipe(ei(w=>this.handler.handle(w)));if(t instanceof gs||"events"===o.observe)return h;const m=h.pipe(ti(w=>w instanceof _u));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,ft.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new cr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Vo(o,r))}post(t,r,o={}){return this.request("POST",t,Vo(o,r))}put(t,r,o={}){return this.request("PUT",t,Vo(o,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Po))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ta{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Aa=new f.OlP("HTTP_INTERCEPTORS");let Uo=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pc=/^\)\]\}',?\n/;let Oh=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new on.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((G,oe)=>o.setRequestHeader(G,oe.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const u=t.serializeBody();let h=null;const m=()=>{if(null!==h)return h;const G=1223===o.status?204:o.status,oe=o.statusText||"OK",Ve=new Ni(o.getAllResponseHeaders()),Ke=function mn(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return h=new ni({headers:Ve,status:G,statusText:oe,url:Ke}),h},w=()=>{let{headers:G,status:oe,statusText:Ve,url:Ke}=m(),dt=null;204!==oe&&(dt=void 0===o.response?o.responseText:o.response),0===oe&&(oe=dt?200:0);let jt=oe>=200&&oe<300;if("json"===t.responseType&&"string"==typeof dt){const un=dt;dt=dt.replace(pc,"");try{dt=""!==dt?JSON.parse(dt):null}catch(xt){dt=un,jt&&(jt=!1,dt={error:xt,text:dt})}}jt?(r.next(new _u({body:dt,headers:G,status:oe,statusText:Ve,url:Ke||void 0})),r.complete()):r.error(new hc({error:dt,headers:G,status:oe,statusText:Ve,url:Ke||void 0}))},b=G=>{const{url:oe}=m(),Ve=new hc({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:oe||void 0});r.error(Ve)};let M=!1;const O=G=>{M||(r.next(m()),M=!0);let oe={type:an.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(oe.total=G.total),"text"===t.responseType&&!!o.responseText&&(oe.partialText=o.responseText),r.next(oe)},H=G=>{let oe={type:an.UploadProgress,loaded:G.loaded};G.lengthComputable&&(oe.total=G.total),r.next(oe)};return o.addEventListener("load",w),o.addEventListener("error",b),o.addEventListener("timeout",b),o.addEventListener("abort",b),t.reportProgress&&(o.addEventListener("progress",O),null!==u&&o.upload&&o.upload.addEventListener("progress",H)),o.send(u),r.next({type:an.Sent}),()=>{o.removeEventListener("error",b),o.removeEventListener("abort",b),o.removeEventListener("load",w),o.removeEventListener("timeout",b),t.reportProgress&&(o.removeEventListener("progress",O),null!==u&&o.upload&&o.upload.removeEventListener("progress",H)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yt))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Nh=new f.OlP("XSRF_COOKIE_NAME"),Ph=new f.OlP("XSRF_HEADER_NAME");class Gl{}let kh=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(f.Lbi),f.LFG(Nh))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),gc=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Gl),f.LFG(Ph))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Wp=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Aa,[]);this.chain=r.reduceRight((o,u)=>new Ta(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ls),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),yn=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:gc,useClass:Uo}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Nh,useValue:t.cookieName}:[],t.headerName?{provide:Ph,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[gc,{provide:Aa,useExisting:gc,multi:!0},{provide:Gl,useClass:kh},{provide:Nh,useValue:"XSRF-TOKEN"},{provide:Ph,useValue:"X-XSRF-TOKEN"}]}),n})(),mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ms,{provide:Po,useClass:Wp},Oh,{provide:Ls,useExisting:Oh}],imports:[[yn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Ma=(()=>{class n{constructor(t,r){this.httpClient=t,this.datepipe=r}downloadFILE(t){return this.httpClient.get(t)}dowloadList(t){const r=JSON.stringify(t);let o=document.createElement("a");o.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(r));let u=new Date,h=this.datepipe.transform(u,"M/d/yy, h:mm a");o.setAttribute("download",t.label+"_"+h+"_file.json"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ms),f.LFG(xl))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:lr}=Array,{getPrototypeOf:ri,prototype:ql,keys:Ho}=Object;function ii(n){if(1===n.length){const e=n[0];if(lr(e))return{args:e,keys:null};if(function Pi(n){return n&&"object"==typeof n&&ri(n)===ql}(e)){const t=Ho(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Bs=P(8421);const{isArray:yc}=Array;function _c(n){return(0,ft.U)(e=>function zl(n,e){return yc(e)?n(...e):n(e)}(n,e))}function uo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let vc=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),_i=(()=>{class n extends vc{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const vi=new f.OlP("NgValueAccessor"),Wl={provide:vi,useExisting:(0,f.Gpc)(()=>ki),multi:!0};let ki=(()=>{class n extends _i{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},features:[f._Bn([Wl]),f.qOj]}),n})();const Zl={provide:vi,useExisting:(0,f.Gpc)(()=>Fi),multi:!0},wc=new f.OlP("CompositionEventMode");let Fi=(()=>{class n extends vc{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ec(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(wc,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Zl]),f.qOj]}),n})();const Un=new f.OlP("NgValidators"),js=new f.OlP("NgAsyncValidators");function Le(n){return null!=n}function Ze(n){const e=(0,f.QGY)(n)?(0,en.D)(n):n;return(0,f.CqO)(e),e}function Nt(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Gt(n,e){return e.map(t=>t(n))}function er(n){return n.map(e=>function An(n){return!n.validate}(e)?e:t=>e.validate(t))}function co(n){return null!=n?function wn(n){if(!n)return null;const e=n.filter(Le);return 0==e.length?null:function(t){return Nt(Gt(t,e))}}(er(n)):null}function Lr(n){return null!=n?function Vi(n){if(!n)return null;const e=n.filter(Le);return 0==e.length?null:function(t){return function Fr(...n){const e=(0,pu.jO)(n),{args:t,keys:r}=ii(n),o=new on.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,b=h;for(let M=0;M<h;M++){let O=!1;(0,Bs.Xf)(t[M]).subscribe((0,At.x)(u,H=>{O||(O=!0,b--),m[M]=H},()=>w--,void 0,()=>{(!w||!O)&&(b||u.next(r?uo(r,m):m),u.complete())}))}});return e?o.pipe(_c(e)):o}(Gt(t,e).map(Ze)).pipe((0,ft.U)(Nt))}}(er(n)):null}function Ui(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Yl(n){return n?Array.isArray(n)?n:[n]:[]}function Oa(n,e){return Array.isArray(n)?n.includes(e):n===e}function Na(n,e){const t=Yl(e);return Yl(n).forEach(o=>{Oa(t,o)||t.push(o)}),t}function Fh(n,e){return Yl(e).filter(t=>!Oa(n,t))}class Zp{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=co(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Lr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $o extends Zp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class In extends Zp{get formDirective(){return null}get path(){return null}}class wu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Lh=(()=>{class n extends wu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($o,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Iu=(()=>{class n extends wu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(In,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Cc(n,e){Bi(n,e),e.valueAccessor.writeValue(n.value),function eg(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$h(n,e)})}(n,e),function sE(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function iE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$h(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Cu(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bi(n,e){const t=function Vr(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ui(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Eu(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ui(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Cu(e._rawValidators,o),Cu(e._rawAsyncValidators,o)}function $h(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function td(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Cr="VALID",zo="INVALID",Pa="PENDING",Wo="DISABLED";function ig(n){return(Du(n)?n.validators:n)||null}function qh(n){return Array.isArray(n)?co(n):n||null}function sg(n,e){return(Du(e)?e.asyncValidators:n)||null}function rd(n){return Array.isArray(n)?Lr(n):n||null}function Du(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const og=n=>n instanceof od;function bc(n){return(n=>n instanceof sd)(n)?n.value:n.getRawValue()}function ag(n,e){const t=og(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function ug(n,e){og(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class Tc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=qh(this._rawValidators),this._composedAsyncValidatorFn=rd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cr}get invalid(){return this.status===zo}get pending(){return this.status==Pa}get disabled(){return this.status===Wo}get enabled(){return this.status!==Wo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=qh(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rd(e)}addValidators(e){this.setValidators(Na(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Na(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fh(e,this._rawAsyncValidators))}hasValidator(e){return Oa(this._rawValidators,e)}hasAsyncValidator(e){return Oa(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wo,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cr||this.status===Pa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wo:Cr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pa,this._hasOwnPendingAsyncValidator=!0;const t=Ze(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function rg(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=og(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof ad)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Wo:this.errors?zo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pa)?Pa:this._anyControlsHaveStatus(zo)?zo:Cr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Du(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sd extends Tc{constructor(e=null,t,r){super(ig(t),sg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Du(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){td(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){td(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class od extends Tc{constructor(e,t,r){super(ig(t),sg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ug(this,e),Object.keys(e).forEach(r=>{ag(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=bc(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ad extends Tc{constructor(e,t,r){super(ig(t),sg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ug(this,e),e.forEach((r,o)=>{ag(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>bc(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ud={provide:In,useExisting:(0,f.Gpc)(()=>Ac)},ka=(()=>Promise.resolve(null))();let Ac=(()=>{class n extends In{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new od({},co(t),Lr(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ka.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Cc(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ka.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),td(this._directives,t)})}addFormGroup(t){ka.then(()=>{const r=this._findContainer(t.path),o=new od({});(function tg(n,e){Bi(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ka.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ka.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function qo(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Un,10),f.Y36(js,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([ud]),f.qOj]}),n})();const fy={provide:$o,useExisting:(0,f.Gpc)(()=>Wh)},zh=(()=>Promise.resolve(null))();let Wh=(()=>{class n extends $o{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new sd,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function ng(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Fi?t=u:function oE(n){return Object.getPrototypeOf(n.constructor)===_i}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function Gh(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function Xl(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zh.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;zh.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(In,9),f.Y36(Un,10),f.Y36(js,10),f.Y36(vi,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([fy]),f.qOj,f.TTD]}),n})(),lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[xc]]}),n})(),my=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[nf]}),n})();var ai=P(2011),Zo=P(7579),sf=P(6451),md=P(5363);function wi(n,e){return(0,wr.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,At.x)(r,w=>{null==o||o.unsubscribe();let b=0;const M=u++;(0,Bs.Xf)(n(w,M)).subscribe(o=(0,At.x)(r,O=>r.next(e?e(w,O,M,b++):O),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var KC=P(6063);class YC extends Zo.x{constructor(e=1/0,t=1/0,r=KC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var cE=P(3099);function Cg(n,e,t){var r,o;let u,h=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,h=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,cE.B)({connector:()=>new YC(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}const yd=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var yy=P(5698);function dE(n){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,At.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function _y(n=hE){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,At.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function hE(){return new yd}var ho=P(4671);function Au(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((o,u)=>n(o,u,r)):ho.y,(0,yy.q)(1),t?dE(e):_y(()=>new yd))}function vy(n,e){return(0,ba.m)(e)?wi(()=>n,e):wi(()=>n)}var Ey=P(9468),hr=P(5813);P(5867);var ye=P(5861),Su=P(9681),by=P(4859),Mt=P(2090),xu=P(1877);const Ty=new Map,tD={activated:!1,tokenObservers:[]},nD={initialized:!1,enabled:!1};function tn(n){return Ty.get(n)||tD}function fo(n,e){Ty.set(n,e)}function af(){return nD}class aD{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Mt.BH,yield function uD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ui=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xy(n){if(!tn(n).activated)throw ui.create("use-before-activation",{appName:n.name})}function My(n,e){return lf.apply(this,arguments)}function lf(){return(lf=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(O){throw ui.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==h.status)throw ui.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(O){throw ui.create("fetch-parse-error",{originalErrorMessage:O.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+b,issuedAtTimeMillis:M}})).apply(this,arguments)}function yE(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const _d="firebase-app-check-store";let Oc=null;function df(){return Oc||(Oc=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ui.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_d,{keyPath:"compositeKey"})}}catch(t){e(ui.create("storage-open",{originalErrorMessage:t.message}))}}),Oc)}function Fy(){return(Fy=(0,ye.Z)(function*(n,e){const r=(yield df()).transaction(_d,"readwrite"),u=r.objectStore(_d).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var b;m(ui.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Ag=new xu.Yd("@firebase/app-check");function Uy(n,e){return(0,Mt.hl)()?function Py(n,e){return function _E(n,e){return Fy.apply(this,arguments)}(function Vy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ag.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Sg(){return af().enabled}function dD(){return IE.apply(this,arguments)}function IE(){return(IE=(0,ye.Z)(function*(){const n=af();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const aA={error:"UNKNOWN_ERROR"};function uA(n){return Mt.US.encodeString(JSON.stringify(n),!1)}function jy(n){return CE.apply(this,arguments)}function CE(){return(CE=(0,ye.Z)(function*(n,e=!1){const t=n.app;xy(t);const r=tn(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&Mg(w)&&(o=w)}if(!e&&o&&Mg(o))return{token:o.token};let m,h=!1;if(Sg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=My(yE(t,yield dD()),n.platformLoggerProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),h=!0);const w=yield r.exchangeTokenPromise;return yield Uy(t,w),fo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Ag.warn(w.message):Ag.error(w),u=w}return o?(m={token:o.token},fo(t,Object.assign(Object.assign({},r),{token:o})),yield Uy(t,o)):m=TE(u),h&&xg(t,m),m})).apply(this,arguments)}function bE(n,e){const t=tn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),fo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function hD(n){const{app:e}=n,t=tn(e);let r=t.tokenRefresher;r||(r=function Mu(n){const{app:e}=n;return new aD((0,ye.Z)(function*(){let r;if(r=tn(e).token?yield jy(n,!0):yield jy(n),r.error)throw r.error}),()=>!0,()=>{const t=tn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),fo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xg(n,e){const t=tn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Mg(n){return n.expireTimeMillis-Date.now()>0}function TE(n){return{token:uA(aA),error:n}}class Hy{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=tn(this.app);for(const t of e)bE(this.app,t.next);return Promise.resolve()}}const Qy="app-check-internal";!function NE(){(0,Su._registerComponent)(new by.wA("app-check",n=>function AE(n,e){return new Hy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Qy).initialize()})),(0,Su._registerComponent)(new by.wA(Qy,n=>function $y(n){return{getToken:e=>jy(n,e),addTokenListener:e=>function DE(n,e,t,r){const{app:o}=n,u=tn(o),h={next:t,error:r,type:e};if(fo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&Mg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),hD(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>hD(n))}(n,"INTERNAL",e),removeTokenListener:e=>bE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Su.registerVersion)("@firebase/app-check","0.5.3")}();class Jy{constructor(){return(0,hr.vb)("app-check")}}"undefined"!=typeof window&&window;var FE=P(127);const VE=new f.OlP("angularfire2.auth.use-emulator"),e_=new f.OlP("angularfire2.auth.settings"),t_=new f.OlP("angularfire2.auth.tenant-id"),n_=new f.OlP("angularfire2.auth.langugage-code"),UE=new f.OlP("angularfire2.auth.use-device-language"),po=new f.OlP("angularfire.auth.persistence"),Og=(n,e,t,r,o,u,h,m)=>(0,ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),h)for(const[b,M]of Object.entries(h))w.settings[b]=M;return m&&w.setPersistence(m),w},[t,r,o,u,h,m]);let Ng=(()=>{class n{constructor(t,r,o,u,h,m,w,b,M,O,H,G){const oe=new Zo.x,Ve=Je(void 0).pipe((0,md.Q)(h.outsideAngular),wi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,3059)))),(0,ft.U)(()=>(0,ai.on)(t,u,r)),(0,ft.U)(Ke=>Og(Ke,u,m,b,M,O,w,H)),Cg({bufferSize:1,refCount:!1}));if(ur(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{Ve.pipe(Au()).subscribe();const dt=Ve.pipe(wi(xt=>xt.getRedirectResult().then(Pn=>Pn,()=>null)),hr.iC,Cg({bufferSize:1,refCount:!1})),jt=Ve.pipe(wi(xt=>new on.y(Pn=>({unsubscribe:u.runOutsideAngular(()=>xt.onAuthStateChanged(eu=>Pn.next(eu),eu=>Pn.error(eu),()=>Pn.complete()))})))),un=Ve.pipe(wi(xt=>new on.y(Pn=>({unsubscribe:u.runOutsideAngular(()=>xt.onIdTokenChanged(eu=>Pn.next(eu),eu=>Pn.error(eu),()=>Pn.complete()))}))));this.authState=dt.pipe(vy(jt),(0,Ey.R)(h.outsideAngular),(0,md.Q)(h.insideAngular)),this.user=dt.pipe(vy(un),(0,Ey.R)(h.outsideAngular),(0,md.Q)(h.insideAngular)),this.idToken=this.user.pipe(wi(xt=>xt?(0,en.D)(xt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(wi(xt=>xt?(0,en.D)(xt.getIdTokenResult()):Je(null))),this.credential=(0,sf.T)(dt,oe,this.authState.pipe(ti(xt=>!xt))).pipe((0,ft.U)(xt=>(null==xt?void 0:xt.user)?xt:null),(0,Ey.R)(h.outsideAngular),(0,md.Q)(h.insideAngular))}return(0,ai.pX)(this,Ve,u,{spy:{apply:(Ke,dt,jt)=>{(Ke.startsWith("signIn")||Ke.startsWith("createUser"))&&jt.then(un=>oe.next(un))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ai.Dh),f.LFG(ai.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(hr.HU),f.LFG(VE,8),f.LFG(e_,8),f.LFG(t_,8),f.LFG(n_,8),f.LFG(UE,8),f.LFG(po,8),f.LFG(Jy,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class go extends Zo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var BE=P(4986),Pg=P(8189);function r_(...n){return function wD(){return(0,Pg.J)(1)}()((0,en.D)(n,(0,pu.yG)(n)))}function Id(...n){const e=(0,pu.yG)(n);return(0,wr.e)((t,r)=>{(e?r_(n,t,e):r_(n,t)).subscribe(r)})}function i_(){return(0,wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,At.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function ID(n,e,t,r,o){return(u,h)=>{let m=t,w=e,b=0;u.subscribe((0,At.x)(h,M=>{const O=b++;w=m?n(w,M,O):(m=!0,M),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Ou(n,e){return(0,wr.e)(ID(n,e,arguments.length>=2,!0))}function CD(n,e){return n===e}P(3059);var et,o_=P(3942),HE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ba={},ff=ff||{},Ct=HE||self;function kg(){}function Fg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lg="closure_uid_"+(1e9*Math.random()>>>0),GE=0;function ja(n,e,t){return n.call.apply(n.bind,arguments)}function Vg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ur(n,e,t){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:Vg).apply(null,arguments)}function Ug(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Ko(){this.s=this.s,this.o=this.o}var a_={};Ko.prototype.s=!1,Ko.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $E(n){return Object.prototype.hasOwnProperty.call(n,Lg)&&n[Lg]||(n[Lg]=++GE)}(this);delete a_[n]}},Ko.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},zE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function c_(n){return Array.prototype.concat.apply([],arguments)}function Bg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pf(n){return/^[\s\xa0]*$/.test(n)}var Ci,WE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Br(n,e){return-1!=n.indexOf(e)}function l_(n,e){return n<e?-1:n>e?1:0}e:{var d_=Ct.navigator;if(d_){var kc=d_.userAgent;if(kc){Ci=kc;break e}}Ci=""}function jg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ZE(n){const e={};for(const t in n)e[t]=n[t];return e}var KE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fc(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<KE.length;u++)t=KE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function h_(n){return h_[" "](n),n}h_[" "]=kg;var mf,n,bD=Br(Ci,"Opera"),bd=Br(Ci,"Trident")||Br(Ci,"MSIE"),vs=Br(Ci,"Edge"),gf=vs||bd,f_=Br(Ci,"Gecko")&&!(Br(Ci.toLowerCase(),"webkit")&&!Br(Ci,"Edge"))&&!(Br(Ci,"Trident")||Br(Ci,"MSIE"))&&!Br(Ci,"Edge"),YE=Br(Ci.toLowerCase(),"webkit")&&!Br(Ci,"Edge");function p_(){var n=Ct.document;return n?n.documentMode:void 0}e:{var g_="",m_=(n=Ci,f_?/rv:([^\);]+)(\)|;)/.exec(n):vs?/Edge\/([\d\.]+)/.exec(n):bd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YE?/WebKit\/(\S+)/.exec(n):bD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(m_&&(g_=m_?m_[1]:""),bd){var y_=p_();if(null!=y_&&y_>parseFloat(g_)){mf=String(y_);break e}}mf=g_}var TD={};var AD=Ct.document&&bd&&(p_()||parseInt(mf,10))||void 0,SD=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",kg,e),Ct.removeEventListener("test",kg,e)}catch(t){}return n}();function Di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Hg(n,e){if(Di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(f_){e:{try{h_(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:v_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hg.Z.h.call(this)}}Di.prototype.h=function(){this.defaultPrevented=!0},ci(Hg,Di);var v_={2:"touch",3:"pen",4:"mouse"};Hg.prototype.h=function(){Hg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),XE=0;function ew(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++XE,this.ca=this.fa=!1}function E_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ji(n){this.src=n,this.g={},this.h=0}function tw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Dd(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(E_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function nw(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}ji.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=nw(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new ew(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var $g="closure_lm_"+(1e6*Math.random()|0),Gg={};function w_(n,e,t,r,o){if(r&&r.once)return I_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)w_(n,e[u],t,r,o);return null}return t=T_(t),n&&n[yf]?n.N(e,t,Cd(r)?!!r.capture:!!r,o):rw(n,e,t,!1,r,o)}function rw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=Cd(o)?!!o.capture:!!o,m=D_(n);if(m||(n[$g]=m=new ji(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function _A(){var e=xD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)SD||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(zg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function I_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)I_(n,e[u],t,r,o);return null}return t=T_(t),n&&n[yf]?n.O(e,t,Cd(r)?!!r.capture:!!r,o):rw(n,e,t,!0,r,o)}function qg(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)qg(n,e[u],t,r,o);else r=Cd(r)?!!r.capture:!!r,t=T_(t),n&&n[yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=nw(u=n.g[e],t,r,o))&&(E_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=D_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=nw(e,t,r,o)),(t=-1<n?e[n]:null)&&C_(t))}function C_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[yf])tw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=D_(e))?(tw(t,n),0==t.h&&(t.src=null,e[$g]=null)):E_(n)}}}function zg(n){return n in Gg?Gg[n]:Gg[n]="on"+n}function xD(n,e){if(n.ca)n=!0;else{e=new Hg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&C_(n),n=t.call(r,e)}return n}function D_(n){return(n=n[$g])instanceof ji?n:null}var b_="__closure_events_fn_"+(1e9*Math.random()>>>0);function T_(n){return"function"==typeof n?n:(n[b_]||(n[b_]=function(e){return n.handleEvent(e)}),n[b_])}function br(){Ko.call(this),this.i=new ji(this),this.P=this,this.I=null}function jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Di(e,n);else if(e instanceof Di)e.target=e.target||n;else{var o=e;Fc(e=new Di(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Lc(h,r,!0,e)&&o}if(o=Lc(h=e.g=n,r,!0,e)&&o,o=Lc(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Lc(h=e.g=t[u],r,!1,e)&&o}function Lc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&tw(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}ci(br,Ko),br.prototype[yf]=!0,br.prototype.removeEventListener=function(n,e,t,r){qg(this,n,e,t,r)},br.prototype.M=function(){if(br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)E_(t[r]);delete n.g[e],n.h--}}this.I=null},br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Nu=Ct.JSON.stringify;function MD(){var n=vf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Vc,iw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new RD,n=>n.reset());class RD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function A_(n){Ct.setTimeout(()=>{throw n},0)}function $s(n,e){Vc||function li(){var n=Ct.Promise.resolve(void 0);Vc=function(){n.then(Gs)}}(),Ha||(Vc(),Ha=!0),vf.add(n,e)}var Ha=!1,vf=new class _f{constructor(){this.h=this.g=null}add(e,t){const r=iw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Gs(){for(var n;n=MD();){try{n.h.call(n.g)}catch(t){A_(t)}var e=iw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ha=!1}function Td(n,e){br.call(this),this.h=n||1,this.g=e||Ct,this.j=Ur(this.kb,this),this.l=Date.now()}function Pu(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ku(n,e,t){if("function"==typeof n)t&&(n=Ur(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ur(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function Uc(n){n.g=ku(()=>{n.g=null,n.i&&(n.i=!1,Uc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(Td,br),(et=Td.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jr(this,"tick"),this.da&&(Pu(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){Td.Z.M.call(this),Pu(this),delete this.g};class Ad extends Ko{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uc(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(n){Ko.call(this),this.h=n,this.g={}}ci(Yo,Ko);var Bc=[];function jc(n,e,t,r){Array.isArray(t)||(t&&(Bc[0]=t.toString()),t=Bc);for(var o=0;o<t.length;o++){var u=w_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Hc(n){jg(n.g,function(e,t){this.g.hasOwnProperty(t)&&C_(e)},n),n.g={}}function $a(){this.g=!0}function $c(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return Nu(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Yo.prototype.M=function(){Yo.Z.M.call(this),Hc(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$a.prototype.Aa=function(){this.g=!1},$a.prototype.info=function(){};var Fu={},S_=null;function Ef(){return S_=S_||new br}function x_(n){Di.call(this,Fu.Ma,n)}function wf(n){const e=Ef();jr(e,new x_(e,n))}function M_(n,e){Di.call(this,Fu.STAT_EVENT,n),this.stat=e}function bi(n){const e=Ef();jr(e,new M_(e,n))}function R_(n,e){Di.call(this,Fu.Na,n),this.size=e}function Sd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Fu.Ma="serverreachability",ci(x_,Di),Fu.STAT_EVENT="statevent",ci(M_,Di),Fu.Na="timingevent",ci(R_,Di);var Wg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zg(){}function O_(){}Zg.prototype.h=null;var P_,If={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function N_(){Di.call(this,"d")}function dw(){Di.call(this,"c")}function xd(){}function Gc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Yo(this),this.P=vA,this.W=new Td(n=gf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hw}function hw(){this.i=null,this.g="",this.h=!1}ci(N_,Di),ci(dw,Di),ci(xd,Zg),xd.prototype.g=function(){return new XMLHttpRequest},xd.prototype.i=function(){return{}},P_=new xd;var vA=45e3,fw={},k_={};function F_(n,e,t){n.K=1,n.v=$_(Jo(e)),n.s=t,n.U=!0,L_(n,null)}function L_(n,e){n.F=Date.now(),Cf(n),n.A=Jo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Jg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new hw,n.g=iv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ad(Ur(n.Ia,n,n.g),n.O)),jc(n.V,n.g,"readystatechange",n.gb),e=n.H?ZE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),wf(1),function sw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var M=b[0];b=b[1];var O=M.split("_");h=2<=O.length&&"type"==O[1]?h+(M+"=")+b+"&":h+(M+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function OD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function pw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Md(n,t),o==k_){4==e&&(n.o=4,bi(14),r=!1),$c(n.j,n.m,null,"[Incomplete Response]");break}if(o==fw){n.o=4,bi(15),$c(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$c(n.j,n.m,o,null),U_(n,o)}OD(n)&&o!=k_&&o!=fw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),im(e),e.L=!0,bi(11))):($c(n.j,n.m,t,"[Invalid Chunked Response]"),Qo(n),Rd(n))}function Md(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?k_:(t=Number(e.substring(t,r)),isNaN(t)?fw:(r+=1)+t>e.length?k_:(e=e.substr(r,t),n.C=r+t,e))}function Cf(n){n.Y=Date.now()+n.P,V_(n,n.P)}function V_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sd(Ur(n.eb,n),e)}function Kg(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Rd(n){0==n.l.G||n.I||Pw(n.l,n)}function Qo(n){Kg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Pu(n.W),Hc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function U_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Tf(t.i,n)))if(t.I=n.N,!n.J&&Tf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sd(Ur(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;sm(t),nv(t)}rm(t),bi(18)}if(1>=K_(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else qa(t,11)}else if((n.J||t.g==n)&&sm(t),!pf(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const M=b[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const O=b[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const oe=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.i;!u.g&&(Br(oe,"spdy")||Br(oe,"quic")||Br(oe,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Xg(u,u.h),u.h=null))}if(r.D){const Ve=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.sa=Ve,Cn(r.F,r.D,Ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Fw(r,r.H?r.la:null,r.W),h.J){Iw(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(Kg(m),Cf(m)),r.g=h}else zs(r);0<t.l.length&&Es(t)}else"stop"!=b[0]&&"close"!=b[0]||qa(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?qa(t,7):nm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}wf(4)}catch(b){}}function B_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Fg(n)||"string"==typeof n)zE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Fg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function gw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Fg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Od(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Od)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function j_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];qc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)qc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function qc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Gc.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Xo(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const M=Xo(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>M)&&(3!=M||gf||this.g&&(this.h.h||this.g.ga()||Yc(this.g)))){this.I||4!=M||7==e||wf(8==e||0>=O?3:2),Kg(this);var t=this.g.ba();this.N=t;t:if(OD(this)){var r=Yc(this.g);n="";var o=r.length,u=4==Xo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qo(this),Rd(this);var h="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function ow(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pf(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,bi(12),Qo(this),Rd(this);break e}$c(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,U_(this,t)}this.U?(pw(this,M,h),gf&&this.i&&3==M&&(jc(this.V,this.W,"tick",this.fb),this.W.start())):($c(this.j,this.m,h,null),U_(this,h)),4==M&&Qo(this),this.i&&!this.I&&(4==M?Pw(this.l,this):(this.i=!1,Cf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),Qo(this),Rd(this)}}}catch(M){}},et.fb=function(){if(this.g){var n=Xo(this.g),e=this.g.ga();this.C<e.length&&(Kg(this),pw(this,n,e),this.i&&4!=n&&Cf(this))}},et.cancel=function(){this.I=!0,Qo(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function aw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wf(3),bi(17)),Qo(this),this.o=2,Rd(this)):V_(this,this.Y-n)},(et=Od.prototype).R=function(){j_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return j_(this),this.g.concat()},et.get=function(n,e){return qc(this.h,n)?this.h[n]:e},et.set=function(n,e){qc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var mw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof zc){this.g=void 0!==e?e:n.g,Df(this,n.j),this.s=n.s,Nd(this,n.i),H_(this,n.m),this.l=n.l,e=n.h;var t=new Pd;t.i=e.i,e.g&&(t.g=new Od(e.g),t.h=e.h),Yg(this,t),this.o=n.o}else n&&(t=String(n).match(mw))?(this.g=!!e,Df(this,t[1]||"",!0),this.s=Wc(t[2]||""),Nd(this,t[3]||"",!0),H_(this,t[4]),this.l=Wc(t[5]||"",!0),Yg(this,t[6]||"",!0),this.o=Wc(t[7]||"")):(this.g=!!e,this.h=new Pd(null,this.g))}function Jo(n){return new zc(n)}function Df(n,e,t){n.j=t?Wc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Nd(n,e,t){n.i=t?Wc(e,!0):e}function H_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Yg(n,e,t){e instanceof Pd?(n.h=e,function ww(n,e){e&&!n.j&&(Ga(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ew(this,r),Jg(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zc(e,EA)),n.h=new Pd(e,n.g))}function Cn(n,e,t){n.h.set(e,t)}function $_(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ND),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ND(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zc(e,Qg,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zc(e,Qg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zc(t,"/"==t.charAt(0)?vw:G_,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zc(t,PD)),n.join("")};var Qg=/[#\/\?@]/g,G_=/[#\?:]/g,vw=/[#\?]/g,EA=/[#\?@]/g,PD=/#/g;function Pd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ga(n){n.g||(n.g=new Od,n.h=0,n.i&&function yw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ew(n,e){Ga(n),e=Kc(n,e),qc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,qc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&j_(n)))}function q_(n,e){return Ga(n),e=Kc(n,e),qc(n.g.h,e)}function Jg(n,e,t){Ew(n,e),0<t.length&&(n.i=null,n.g.set(Kc(n,e),Bg(t)),n.h+=t.length)}function Kc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function W_(n){this.l=n||kD,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Pd.prototype).add=function(n,e){Ga(this),this.i=null,n=Kc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Ga(this),this.g.forEach(function(t,r){zE(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Ga(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Ga(this);var e=[];if("string"==typeof n)q_(this,n)&&(e=c_(e,this.g.get(Kc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=c_(e,n[t])}return e},et.set=function(n,e){return Ga(this),this.i=null,q_(this,n=Kc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var kD=10;function Z_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function K_(n){return n.h?1:n.g?n.g.size:0}function Tf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Xg(n,e){n.g?n.g.add(e):n.h=e}function Iw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Cw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Bg(n.i)}function Y_(){}function Dw(){this.g=new Y_}function Q_(n,e,t){const r=t||"";try{B_(n,function(o,u){let h=o;Cd(o)&&(h=Nu(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Af(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function kd(n){this.l=n.$b||null,this.j=n.ib||!1}function Sf(n,e){br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}W_.prototype.cancel=function(){if(this.i=Cw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Y_.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},Y_.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},ci(kd,Zg),kd.prototype.g=function(){return new Sf(this.l,this.j)},kd.prototype.i=function(n){return function(){return n}}({}),ci(Sf,br);var em=0;function J_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Fd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ld(n)}function Ld(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Sf.prototype).open=function(n,e){if(this.readyState!=em)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ld(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fd(this)),this.readyState=em},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ld(this)),this.g&&(this.readyState=3,Ld(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;J_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fd(this):Ld(this),3==this.readyState&&J_(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Fd(this))},et.Ta=function(n){this.g&&(this.response=n,Fd(this))},et.ha=function(){this.g&&Fd(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wA=Ct.JSON.parse;function tr(n){br.call(this),this.headers=new Od,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tw,this.K=this.L=!1}ci(tr,br);var Tw="",Aw=/^https?$/i,FD=["POST","PUT"];function Sw(n){return"content-type"==n.toLowerCase()}function xw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Mw(n),tm(n)}function Mw(n){n.D||(n.D=!0,jr(n,"complete"),jr(n,"error"))}function X_(n){if(n.h&&void 0!==ff&&(!n.C[1]||4!=Xo(n)||2!=n.ba()))if(n.v&&4==Xo(n))ku(n.Fa,0,n);else if(jr(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(mw)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!Aw.test(o?o.toLowerCase():"")}t=r}if(t)jr(n,"complete"),jr(n,"success");else{n.m=6;try{var h=2<Xo(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",Mw(n)}}finally{tm(n)}}}function tm(n,e){if(n.g){ev(n);const t=n.g,r=n.C[0]?kg:null;n.g=null,n.C=null,e||jr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function ev(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function Yc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Tw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function LD(n){let e="";return jg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function Vd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Rw(n){this.za=0,this.l=[],this.h=new $a,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vd("baseRetryDelayMs",5e3,n),this.$a=Vd("retryDelaySeedMs",1e4,n),this.Ya=Vd("forwardChannelMaxRetries",2,n),this.ra=Vd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new W_(n&&n.concurrentRequestLimit),this.Ca=new Dw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function nm(n){if(rv(n),3==n.G){var e=n.V++,t=Jo(n.F);Cn(t,"SID",n.J),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),Hi(n,t),(e=new Gc(n,n.h,e,void 0)).K=2,e.v=$_(Jo(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=iv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Cf(e)}Ud(n)}function nv(n){n.g&&(im(n),n.g.cancel(),n.g=null)}function rv(n){nv(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),sm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function xf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Es(n)}function Es(n){Z_(n.i)||n.m||(n.m=!0,$s(n.Ha,n),n.C=0)}function Ow(n,e){var t;t=e?e.m:n.V++;const r=Jo(n.F);Cn(r,"SID",n.J),Cn(r,"RID",t),Cn(r,"AID",n.U),Hi(n,r),n.o&&n.s&&tv(r,n.o,n.s),t=new Gc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=qs(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Xg(n.i,t),F_(t,r,e)}function Hi(n,e){n.j&&B_({},function(t,r){Cn(e,r,t)})}function qs(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ur(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const M=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{Q_(M,h,"req"+b+"_")}catch(O){r&&r(M)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function zs(n){n.g||n.u||(n.Y=1,$s(n.Ga,n),n.A=0)}function rm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sd(Ur(n.Ga,n),kw(n,n.A)),n.A++,0))}function im(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Nw(n){n.g=new Gc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Jo(n.oa);Cn(e,"RID","rpc"),Cn(e,"SID",n.J),Cn(e,"CI",n.N?"0":"1"),Cn(e,"AID",n.U),Hi(n,e),Cn(e,"TYPE","xmlhttp"),n.o&&n.s&&tv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=$_(Jo(e)),t.s=null,t.U=!0,L_(t,n)}function sm(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function Pw(n,e){var t=null;if(n.g==e){sm(n),im(n),n.g=null;var r=2}else{if(!Tf(n.i,e))return;t=e.D,Iw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;jr(r=Ef(),new R_(r,t,e,o)),Es(n)}else zs(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function VD(n,e){return!(K_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sd(Ur(n.Ha,n,e),kw(n,n.C)),n.C++,0)))}(n,e)||2==r&&rm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:qa(n,5);break;case 4:qa(n,10);break;case 3:qa(n,6);break;default:qa(n,2)}}function kw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function qa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ur(n.jb,n);t||(t=new zc("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||Df(t,"https"),$_(t)),function bw(n,e){const t=new $a;if(Ct.Image){const r=new Image;r.onload=Ug(Af,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ug(Af,t,r,"TestLoadImage: error",!1,e),r.onabort=Ug(Af,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ug(Af,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.j&&n.j.va(e),Ud(n),rv(n)}function Ud(n){n.G=0,n.I=-1,n.j&&((0!=Cw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Bg(n.l),n.l.length=0),n.j.ua())}function Fw(n,e,t){let r=function bf(n){return n instanceof zc?Jo(n):new zc(n,void 0)}(t);if(""!=r.i)e&&Nd(r,e+"."+r.i),H_(r,r.m);else{const o=Ct.location;r=function _w(n,e,t,r){var o=new zc(null,void 0);return n&&Df(o,n),e&&Nd(o,e),t&&H_(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&jg(n.aa,function(o,u){Cn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Cn(r,e,t),Cn(r,"VER",n.ma),Hi(n,r),r}function iv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tr(t&&n.Ba&&!n.qa?new kd({ib:!0}):n.qa)).L=n.H,e}function Lw(){}function Mf(){if(bd&&!(10<=Number(AD)))throw Error("Environmental error: no available transport.")}function $i(n,e){br.call(this),this.g=new Rw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!pf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qc(this)}function Rf(n){N_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Vw(){dw.call(this),this.status=1}function Qc(n){this.g=n}(et=tr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():P_.g(),this.C=function lw(n){return n.h||(n.h=n.i())}(this.u?this.u:P_),this.g.onreadystatechange=Ur(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void xw(this,u)}n=t||"";const o=new Od(this.headers);r&&B_(r,function(u,h){o.set(h,u)}),r=function u_(n){e:{var e=Sw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=Dd(FD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ev(this),0<this.B&&((this.K=function fr(n){return bd&&function QE(){return function DD(n){var e=TD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=WE(String(mf)).split("."),t=WE("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=l_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||l_(0==o[2].length,0==u[2].length)||l_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.pa,this)):this.A=ku(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){xw(this,u)}},et.pa=function(){void 0!==ff&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jr(this,"complete"),jr(this,"abort"),tm(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tm(this,!0)),tr.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?X_(this):this.cb())},et.cb=function(){X_(this)},et.ba=function(){try{return 2<Xo(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wA(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Rw.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Gc(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ZE(u),Fc(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qs(this,o,e),Cn(t=Jo(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),Hi(this,t),this.o&&u&&tv(t,this.o,u),Xg(this.i,o),this.Ra&&Cn(t,"TYPE","init"),this.ja?(Cn(t,"$req",e),Cn(t,"SID","null"),o.$=!0,F_(o,t,null)):F_(o,t,e),this.G=2}}else 3==this.G&&(n?Ow(this,n):0==this.l.length||Z_(this.i)||Ow(this))},et.Ga=function(){if(this.u=null,Nw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sd(Ur(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bi(10),nv(this),Nw(this))},et.ab=function(){null!=this.v&&(this.v=null,nv(this),rm(this),bi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),bi(2)):(this.h.info("Failed to ping google.com"),bi(1))},(et=Lw.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Mf.prototype.g=function(n,e){return new $i(n,e)},ci($i,br),$i.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$s(Ur(n.hb,n,e))),bi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Fw(n,null,n.W),Es(n)},$i.prototype.close=function(){nm(this.g)},$i.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,xf(this.g,e)}else this.v?((e={}).__data__=Nu(n),xf(this.g,e)):xf(this.g,n)},$i.prototype.M=function(){this.g.j=null,delete this.j,nm(this.g),delete this.g,$i.Z.M.call(this)},ci(Rf,N_),ci(Vw,dw),ci(Qc,Lw),Qc.prototype.xa=function(){jr(this.g,"a")},Qc.prototype.wa=function(n){jr(this.g,new Rf(n))},Qc.prototype.va=function(n){jr(this.g,new Vw(n))},Qc.prototype.ua=function(){jr(this.g,"b")},Mf.prototype.createWebChannel=Mf.prototype.g,$i.prototype.send=$i.prototype.u,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,Wg.NO_ERROR=0,Wg.TIMEOUT=8,Wg.HTTP_ERROR=6,cw.COMPLETE="complete",O_.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",br.prototype.listen=br.prototype.N,tr.prototype.listenOnce=tr.prototype.O,tr.prototype.getLastError=tr.prototype.La,tr.prototype.getLastErrorCode=tr.prototype.Da,tr.prototype.getStatus=tr.prototype.ba,tr.prototype.getResponseJson=tr.prototype.Qa,tr.prototype.getResponseText=tr.prototype.ga,tr.prototype.send=tr.prototype.ea;var Uw=Ba.createWebChannelTransport=function(){return new Mf},sv=Ba.getStatEventTarget=function(){return Ef()},Bd=Ba.ErrorCode=Wg,Bw=Ba.EventType=cw,jw=Ba.Event=Fu,ov=Ba.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hw=Ba.FetchXmlHttpFactory=kd,Of=Ba.WebChannel=O_,$w=Ba.XhrIo=tr;const av="@firebase/firestore";class Tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");let jd="9.6.7";const Lu=new xu.Yd("@firebase/firestore");function uv(){return Lu.logLevel}function ke(n,...e){if(Lu.logLevel<=xu.in.DEBUG){const t=e.map(cv);Lu.debug(`Firestore (${jd}): ${n}`,...t)}}function nr(n,...e){if(Lu.logLevel<=xu.in.ERROR){const t=e.map(cv);Lu.error(`Firestore (${jd}): ${n}`,...t)}}function Nf(n,...e){if(Lu.logLevel<=xu.in.WARN){const t=e.map(cv);Lu.warn(`Firestore (${jd}): ${n}`,...t)}}function cv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${jd}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function vt(n,e){n||st()}function ze(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tr.UNAUTHENTICATED))}shutdown(){}}class HD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qw{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let h=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ar,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=h;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ar)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new Gw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new Tr(e)}}class zw{constructor(e,t,r){this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Ww{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new zw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.p=t.token,new lv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Gi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Kw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Gi.A=-1;class dv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Kw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Jc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Vu(n){return n+"\0"}class Sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Sr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Xc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function om(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class am{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===am.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof am?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends am{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const Yw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends am{construct(e,t,r){return new Hr(e,t,r)}static isValidIdentifier(e){return Yw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Me(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}class ct{constructor(e){this.fields=e,e.sort(Hr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const qD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(vt(!!n),"string"==typeof n){let e=0;const t=qD.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ea(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function $d(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xn(n){const e=n.mapValue.fields.__previous_value__;return $d(e)?xn(e):e}function um(n){const e=mo(n.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}class Qw{constructor(e,t,r,o,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class el{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}function tl(n){return null==n}function Gd(n){return 0===n&&1/n==-1/0}function hv(n){return"number"==typeof n&&Number.isInteger(n)&&!Gd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(qt.fromString(e))}static fromName(e){return new Ye(qt.fromString(e).popFirst(5))}static empty(){return new Ye(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new qt(e.slice()))}}const Jw={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$d(n)?4:10:st()}function yo(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return um(n).isEqual(um(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=mo(r.timestampValue),h=mo(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ea(n.bytesValue).isEqual(ea(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return jn(r.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jn(r.integerValue)===jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=jn(r.doubleValue),h=jn(o.doubleValue);return u===h?Gd(u)===Gd(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Jc(n.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Xc(u)!==Xc(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!yo(u[m],h[m])))return!1;return!0}(n,e);default:return st()}var o}function Pf(n,e){return void 0!==(n.values||[]).find(t=>yo(t,e))}function ta(n,e){if(n===e)return 0;const t=nl(n),r=nl(e);if(t!==r)return Pt(t,r);switch(t){case 0:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=jn(o.integerValue||o.doubleValue),m=jn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Xw(n.timestampValue,e.timestampValue);case 4:return Xw(um(n),um(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=ea(o),m=ea(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const b=Pt(h[w],m[w]);if(0!==b)return b}return Pt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Pt(jn(o.latitude),jn(u.latitude));return 0!==h?h:Pt(jn(o.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const b=ta(h[w],m[w]);if(b)return b}return Pt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let M=0;M<m.length&&M<b.length;++M){const O=Pt(m[M],b[M]);if(0!==O)return O;const H=ta(h[m[M]],w[b[M]]);if(0!==H)return H}return Pt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function Xw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=mo(n),r=mo(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function qd(n){return fv(n)}function fv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=mo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ea(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=fv(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${fv(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function rl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cm(n){return!!n&&"integerValue"in n}function kf(n){return!!n&&"arrayValue"in n}function pv(n){return!!n&&"nullValue"in n}function eI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uu(n){return!!n&&"mapValue"in n}function za(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=za(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=za(n.arrayValue.values[t]);return e}return Object.assign({},n)}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(t)}setAll(e){let t=Hr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=za(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Uu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Uu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Hd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new di(za(this.value))}}function tI(n){const e=[];return Hd(n.fields,(t,r)=>{const o=new Hr([t]);if(Uu(r)){const u=tI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new ct(e)}class Mn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Mn(e,0,_t.min(),_t.min(),di.empty(),0)}static newFoundDocument(e,t,r){return new Mn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Mn(e,2,t,_t.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,_t.min(),di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let lm=(()=>{class n{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}return n.UNKNOWN_ID=-1,n})();class Ff{constructor(e,t){this.fieldPath=e,this.kind=t}}class zd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zd(0,dm.min())}}class dm{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dm(_t.min(),Ye.empty(),-1)}}class nI{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function rI(n,e=null,t=[],r=[],o=null,u=null,h=null){return new nI(n,e,t,r,o,u,h)}function Lf(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+qd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qd(r)).join(",")),e.P=t}return e.P}function gv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!KD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aI(n.startAt,e.startAt)&&aI(n.endAt,e.endAt)}function mv(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class qi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new iI(e,t,r):"array-contains"===t?new oI(e,r):"in"===t?new Vf(e,r):"not-in"===t?new WD(e,r):"array-contains-any"===t?new ZD(e,r):new qi(e,t,r)}static v(e,t,r){return"in"===t?new hm(e,r):new zD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(ta(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.V(ta(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class iI extends qi{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.V(t)}}class hm extends qi{constructor(e,t){super(e,"in",t),this.keys=sI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zD extends qi{constructor(e,t){super(e,"not-in",t),this.keys=sI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class oI extends qi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kf(t)&&Pf(t.arrayValue,this.value)}}class Vf extends qi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pf(this.value.arrayValue,t)}}class WD extends qi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pf(this.value.arrayValue,t)}}class ZD extends qi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pf(this.value.arrayValue,r))}}class Wd{constructor(e,t){this.position=e,this.inclusive=t}}class Zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function KD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function yv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(h.referenceValue),t.key):ta(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function aI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yo(n.position[t],e.position[t]))return!1;return!0}class Wa{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function il(n,e,t,r,o,u,h,m){return new Wa(n,e,t,r,o,u,h,m)}function Kd(n){return new Wa(n)}function Uf(n){return!tl(n.limit)&&"F"===n.limitType}function fm(n){return!tl(n.limit)&&"L"===n.limitType}function pm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _v(n){for(const e of n.filters)if(e.S())return e.field;return null}function gm(n){return null!==n.collectionGroup}function Yd(n){const e=ze(n);if(null===e.D){e.D=[];const t=_v(e),r=pm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Zd(t)),e.D.push(new Zd(Hr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zd(Hr.keyField(),u))}}}return e.D}function zi(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=rI(e.path,e.collectionGroup,Yd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Yd(e))t.push(new Zd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Wd(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Wd(e.startAt.position,!e.startAt.inclusive):null;e.C=rI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function uI(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qd(n,e){return gv(zi(n),zi(e))&&n.limitType===e.limitType}function vv(n){return`${Lf(zi(n))}|lt:${n.limitType}`}function Ev(n){return`Query(target=${function IA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${qd(r.value)}`;var r}).join(", ")}]`),tl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>qd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>qd(t)).join(",")),`Target(${e})`}(zi(n))}; limitType=${n.limitType})`}function wv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ye.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=yv(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,Yd(t),r)||t.endAt&&!function(o,u,h){const m=yv(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,Yd(t),r)));var t,r}function cI(n){return(e,t)=>{let r=!1;for(const o of Yd(n)){const u=Iv(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Iv(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),w=h.data.field(o);return null!==m&&null!==w?ta(m,w):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function lI(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function Cv(n){return{integerValue:""+n}}function dI(n,e){return hv(e)?Cv(e):lI(n,e)}class mm{constructor(){this._=void 0}}function YD(n,e,t){return n instanceof Jd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof sl?fI(n,e):n instanceof Bu?Dv(n,e):function(r,o){const u=hI(r,o),h=pI(u)+pI(r.k);return cm(u)&&cm(r.k)?Cv(h):lI(r.O,h)}(n,e)}function QD(n,e,t){return n instanceof sl?fI(n,e):n instanceof Bu?Dv(n,e):t}function hI(n,e){return n instanceof Xd?cm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jd extends mm{}class sl extends mm{constructor(e){super(),this.elements=e}}function fI(n,e){const t=bv(e);for(const r of n.elements)t.some(o=>yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Bu extends mm{constructor(e){super(),this.elements=e}}function Dv(n,e){let t=bv(e);for(const r of n.elements)t=t.filter(o=>!yo(o,r));return{arrayValue:{values:t}}}class Xd extends mm{constructor(e,t){super(),this.O=e,this.k=t}}function pI(n){return jn(n.integerValue||n.doubleValue)}function bv(n){return kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Bf{constructor(e,t){this.field=e,this.transform=t}}class XD{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class jf{}function Tv(n,e,t){n instanceof th?function(r,o,u){const h=r.value.clone(),m=mI(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ol?function(r,o,u){if(!eh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=mI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Sv(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Av(n,e,t){var o;n instanceof th?function(r,o,u){if(!eh(r.precondition,o))return;const h=r.value.clone(),m=xv(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(gI(o),h).setHasLocalMutations()}(n,e,t):n instanceof ol?function(r,o,u){if(!eh(r.precondition,o))return;const h=xv(r.fieldTransforms,u,o),m=o.data;m.setAll(Sv(r)),m.setAll(h),o.convertToFoundDocument(gI(o),m).setHasLocalMutations()}(n,e,t):eh(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function eb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=hI(r.transform,o||null);null!=u&&(null==t&&(t=di.empty()),t.set(r.field,u))}return t||null}function ym(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Jc(t,r,(o,u)=>function JD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof sl&&r instanceof sl||t instanceof Bu&&r instanceof Bu?Jc(t.elements,r.elements,yo):t instanceof Xd&&r instanceof Xd?yo(t.k,r.k):t instanceof Jd&&r instanceof Jd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function gI(n){return n.isFoundDocument()?n.version:_t.min()}class th extends jf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class ol extends jf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Sv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mI(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,QD(h,m,t[o]))}return r}function xv(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,YD(u,h,e))}return r}class _m extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Mv extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Hf{constructor(e){this.count=e}}var rr,Rt;function nh(n){switch(n){default:return st();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function yI(n){if(void 0===n)return nr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case rr.OK:return fe.OK;case rr.CANCELLED:return fe.CANCELLED;case rr.UNKNOWN:return fe.UNKNOWN;case rr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case rr.INTERNAL:return fe.INTERNAL;case rr.UNAVAILABLE:return fe.UNAVAILABLE;case rr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case rr.NOT_FOUND:return fe.NOT_FOUND;case rr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case rr.ABORTED:return fe.ABORTED;case rr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case rr.DATA_LOSS:return fe.DATA_LOSS;default:return st()}}(Rt=rr||(rr={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";class ir{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $f(this.root,e,this.comparator,!1)}getReverseIterator(){return new $f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $f(this.root,e,this.comparator,!0)}}class $f{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:$r.RED,this.left=null!=o?o:$r.EMPTY,this.right=null!=u?u:$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new $r(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $r.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new $r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _I(this.data.getIterator())}getIteratorFrom(e){return new _I(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class _I{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rh(n){return n.hasNext()?n.getNext():void 0}const vI=new ir(Ye.comparator);function ws(){return vI}const Rv=new ir(Ye.comparator);function ih(){return Rv}const Gf=new ir(Ye.comparator),tb=new Dn(Ye.comparator);function Qt(...n){let e=tb;for(const t of n)e=e.add(t);return e}const EI=new Dn(Pt);function vm(){return EI}class qf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t)),new qf(_t.min(),r,vm(),ws(),Qt())}}class zf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new zf(pr.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class sh{constructor(e,t,r,o){this.M=e,this.removedTargetIds=t,this.key=r,this.$=o}}class wI{constructor(e,t){this.targetId=e,this.F=t}}class nb{constructor(e,t,r=pr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class II{constructor(){this.B=0,this.L=Ov(),this.U=pr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Qt(),t=Qt(),r=Qt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new zf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ov()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class rb{constructor(e){this.nt=e,this.st=new Map,this.it=ws(),this.rt=al(),this.ot=new Dn(Pt)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.F.count,o=this.wt(t);if(o){const u=o.target;if(mv(u))if(0===r){const h=new Ye(u.path);this.at(t,h,Mn.newNoDocument(h,_t.min()))}else vt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&mv(m.target)){const w=new Ye(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.at(h,w,Mn.newNoDocument(w,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=Qt();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const b=this.wt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new qf(e,t,this.ot,this.it,r);return this.it=ws(),this.rt=al(),this.ot=new Dn(Pt),o}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new II,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Dn(Pt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new II),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function al(){return new ir(Ye.comparator)}function Ov(){return new ir(Ye.comparator)}const oh={asc:"ASCENDING",desc:"DESCENDING"},CA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class CI{constructor(e,t){this.databaseId=e,this.N=t}}function Wf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(n,e){return n.N?e.toBase64():e.toUint8Array()}function DI(n,e){return Wf(n,e.toTimestamp())}function Gr(n){return vt(!!n),_t.fromTimestamp(function(e){const t=mo(e);return new Sr(t.seconds,t.nanos)}(n))}function Em(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wm(n){const e=qt.fromString(n);return vt(Cm(e)),e}function Zf(n,e){return Em(n.databaseId,e.path)}function na(n,e){const t=wm(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(TI(t))}function Nv(n,e){return Em(n.databaseId,e)}function bI(n){const e=wm(n);return 4===e.length?qt.emptyPath():TI(e)}function Kf(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TI(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AI(n,e,t){return{name:Zf(n,e),fields:t.value.mapValue.fields}}function SI(n,e,t){const r=na(n,e.name),o=Gr(e.updateTime),u=new di({mapValue:{fields:e.fields}}),h=Mn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Za(n,e){let t;if(e instanceof th)t={update:AI(n,e.key,e.value)};else if(e instanceof _m)t={delete:Zf(n,e.key)};else if(e instanceof ol)t={update:AI(n,e.key,e.data),updateMask:cb(e.fieldMask)};else{if(!(e instanceof Mv))return st();t={verify:Zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof sl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Bu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Xd)return{fieldPath:u.field.canonicalString(),increment:h.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:DI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function Im(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Hn.updateTime(Gr(o.updateTime)):void 0!==o.exists?Hn.exists(o.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(vt("REQUEST_TIME"===h.setToServerValue),m=new Jd):"appendMissingElements"in h?m=new sl(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Bu(h.removeAllFromArray.values||[]):"increment"in h?m=new Xd(u,h.increment):st();const w=Hr.fromServerFormat(h.fieldPath);return new Bf(w,m)}(n,o)):[];var o;if(e.update){const o=na(n,e.update.name),u=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ct((e.updateMask.fieldPaths||[]).map(b=>Hr.fromServerFormat(b)));return new ol(o,u,h,t,r)}return new th(o,u,t,r)}if(e.delete){const o=na(n,e.delete);return new _m(o,t)}if(e.verify){const o=na(n,e.verify);return new Mv(o,t)}return st()}function Pv(n,e){return{documents:[Nv(n,e.path)]}}function kv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Nv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Nv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(M=>function(O){if("=="===O.op){if(eI(O.value))return{unaryFilter:{field:ah(O.field),op:"IS_NAN"}};if(pv(O.value))return{unaryFilter:{field:ah(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(eI(O.value))return{unaryFilter:{field:ah(O.field),op:"IS_NOT_NAN"}};if(pv(O.value))return{unaryFilter:{field:ah(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ah(O.field),op:ab(O.op),value:O.value}}}(M));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:ah((M=b).field),direction:OI(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(b=e.limit,n.N||tl(b)?b:{value:b});var b,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Fv(n){let e=bI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=RI(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new Zd(uh((O=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(M){let O;return O="object"==typeof M?M.value:M,tl(O)?null:O}(t.limit));let w=null;var M;t.startAt&&(w=new Wd((M=t.startAt).values||[],!!M.before));let b=null;return t.endAt&&(b=function(M){return new Wd(M.values||[],!M.before)}(t.endAt)),il(e,o,h,u,m,"F",w,b)}function RI(n){return n?void 0!==n.unaryFilter?[Yf(n)]:void 0!==n.fieldFilter?[ub(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>RI(e)).reduce((e,t)=>e.concat(t)):st():[]}function OI(n){return oh[n]}function ab(n){return CA[n]}function ah(n){return{fieldPath:n.canonicalString()}}function uh(n){return Hr.fromServerFormat(n.fieldPath)}function ub(n){return qi.create(uh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function Yf(n){switch(n.unaryFilter.op){case"IS_NAN":const e=uh(n.unaryFilter.field);return qi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=uh(n.unaryFilter.field);return qi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=uh(n.unaryFilter.field);return qi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=uh(n.unaryFilter.field);return qi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function cb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cm(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function sn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dm(e)),e=lb(n.get(t),e);return Dm(e)}function lb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Dm(n){return n+"\x01\x01"}function Wi(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&st(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:st()}u=h+2}return new qt(r)}class db{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Is{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Is.store="owner",Is.key="owner";class ju{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}ju.store="mutationQueues",ju.keyPath="userId";class nn{constructor(e,t,r,o,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=u}}nn.store="mutations",nn.keyPath="batchId",nn.userMutationsIndex="userMutationsIndex",nn.userMutationsKeyPath=["userId","batchId"];class gr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,sn(t)]}static key(e,t,r){return[e,sn(t),r]}}gr.store="documentMutations",gr.PLACEHOLDER=new gr;class hb{constructor(e,t){this.path=e,this.readTime=t}}class fb{constructor(e,t){this.path=e,this.version=t}}class Rn{constructor(e,t,r,o,u,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=h}}Rn.store="remoteDocuments",Rn.readTimeIndex="readTimeIndex",Rn.readTimeIndexPath="readTime",Rn.collectionReadTimeIndex="collectionReadTimeIndex",Rn.collectionReadTimeIndexPath=["parentPath","readTime"];class _o{constructor(e){this.byteSize=e}}_o.store="remoteDocumentGlobal",_o.key="remoteDocumentGlobalKey";class hi{constructor(e,t,r,o,u,h,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=h,this.query=m}}hi.store="targets",hi.keyPath="targetId",hi.queryTargetsIndexName="queryTargetsIndex",hi.queryTargetsKeyPath=["canonicalId","targetId"];class xr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}xr.store="targetDocuments",xr.keyPath=["targetId","path"],xr.documentTargetsIndex="documentTargetsIndex",xr.documentTargetsKeyPath=["path","targetId"];class Cs{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Cs.key="targetGlobalKey",Cs.store="targetGlobal";class ul{constructor(e,t){this.collectionId=e,this.parent=t}}ul.store="collectionParents",ul.keyPath=["collectionId","parent"];class Hu{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Hu.store="clientMetadata",Hu.keyPath="clientId";class $u{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}$u.store="bundles",$u.keyPath="bundleId";class Gu{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Gu.store="namedQueries",Gu.keyPath="name";class Zi{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Zi.store="indexConfiguration",Zi.keyPath="indexId",Zi.collectionGroupIndex="collectionGroupIndex",Zi.collectionGroupIndexPath="collectionGroup";class Ki{constructor(e,t,r,o,u,h){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=o,this.documentKey=u,this.largestBatchId=h}}Ki.store="indexState",Ki.keyPath=["indexId","uid"],Ki.sequenceNumberIndex="sequenceNumberIndex",Ki.sequenceNumberIndexPath=["uid","sequenceNumber"];class Yi{constructor(e,t,r,o,u){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=o,this.documentKey=u}}Yi.store="indexEntries",Yi.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Yi.documentKeyIndex="documentKeyIndex",Yi.documentKeyIndexPath=["indexId","uid","documentKey"];class Mr{constructor(e,t,r,o,u,h){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=o,this.largestBatchId=u,this.overlayMutation=h}}Mr.store="documentOverlays",Mr.keyPath=["userId","collectionPath","documentId"],Mr.collectionPathOverlayIndex="collectionPathOverlayIndex",Mr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Mr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Mr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const NI=[ju.store,nn.store,gr.store,Rn.store,hi.store,Is.store,Cs.store,xr.store,Hu.store,_o.store,ul.store,$u.store,Gu.store],PI=[...NI,Mr.store],pb=[...PI,Zi.store,Ki.store,Yi.store],Lv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},w=>r(w))}),h=!0,u===o&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(o=>o?ge.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Qf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ar,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Jf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Tm(r.target.error);this.At.reject(new Jf(e,o))}}static open(e,t,r,o){try{return new Qf(t,e.transaction(o,r))}catch(u){throw new Jf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new FI(t)}}class Ws{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Ws.vt((0,Mt.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),cl(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,Mt.hl)())return!1;if(Ws.St())return!0;const e=(0,Mt.z$)(),t=Ws.vt(e),r=0<t&&t<10,o=Ws.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Me(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Jf(e,m))},u.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.bt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.xt(e);const w=Qf.open(u.db,e,h?"readonly":"readwrite",r),b=o(w).next(M=>(w.Pt(),M)).catch(M=>(w.abort(M),ge.reject(M))).toPromise();return b.catch(()=>{}),yield w.Rt,b}catch(w){const b="FirebaseError"!==w.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),u.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kI{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return cl(this.$t.delete())}}class Jf extends Me{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qu(n){return"IndexedDbTransactionError"===n.name}class FI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),cl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ge((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,m)=>m.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}Wt(e){const t=this.cursor({});return new ge((r,o)=>{t.onerror=u=>{const h=Tm(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new kI(m),b=t(m.primaryKey,m.value,w);if(b instanceof ge){const M=b.catch(O=>(w.done(),ge.reject(O)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Tm(r.target.error);t(o)}})}let Vv=!1;function Tm(n){const e=Ws.vt((0,Mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vv||(Vv=!0,setTimeout(()=>{throw r},0)),r}}return n}class fi extends bm{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function On(n,e){const t=ze(n);return Ws.Nt(t.zt,e)}class Uv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Tv(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Av(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Av(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,(t,r)=>ym(t,r))&&Jc(this.baseMutations,e.baseMutations,(t,r)=>ym(t,r))}}class Bv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=Gf;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Bv(e,t,r,o)}}class LI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zs{constructor(e,t,r,o,u=_t.min(),h=_t.min(),m=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class VI{constructor(e){this.Ht=e}}function Am(n,e){let t;if(e.document)t=SI(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),o=Ka(e.noDocument.readTime);t=Mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ye.fromSegments(e.unknownDocument.path),o=Ka(e.unknownDocument.version);t=Mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(jv(e.readTime)),t}function UI(n,e){const t=Sm(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const o={name:Zf(h=n.Ht,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Wf(h,m.version.toTimestamp())};return new Rn(null,null,o,e.hasCommittedMutations,t,r)}var h,m;if(e.isNoDocument()){const o=e.key.path.toArray(),u=ll(e.version),h=e.hasCommittedMutations;return new Rn(null,new hb(o,u),null,h,t,r)}if(e.isUnknownDocument()){const o=e.key.path.toArray(),u=ll(e.version);return new Rn(new fb(o,u),null,null,!0,t,r)}return st()}function Sm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jv(n){const e=new Sr(n[0],n[1]);return _t.fromTimestamp(e)}function ll(n){const e=n.toTimestamp();return new db(e.seconds,e.nanoseconds)}function Ka(n){const e=new Sr(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function dl(n,e){const t=(e.baseMutations||[]).map(u=>Im(n.Ht,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Im(n.Ht,u)),o=Sr.fromMillis(e.localWriteTimeMs);return new Uv(e.batchId,o,t,r)}function ch(n){const e=Ka(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ka(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=zi(Kd(bI(o.documents[0])))):r=zi(Fv(n.query)),new Zs(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function Xf(n,e){const t=ll(e.snapshotVersion),r=ll(e.lastLimboFreeSnapshotVersion);let o;o=mv(e.target)?Pv(n.Ht,e.target):kv(n.Ht,e.target);const u=e.resumeToken.toBase64();return new hi(e.targetId,Lf(e.target),t,u,e.sequenceNumber,r,o)}function ep(n){const e=Fv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?uI(e,e.limit,"L"):e}function BI(n,e){return new LI(e.largestBatchId,Im(n.Ht,e.overlayMutation))}function Hv(n,e){const t=e.path.lastSegment();return[n,sn(e.path.popLast()),t]}class gb{getBundleMetadata(e,t){return $v(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ka(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return $v(e).put({bundleId:(r=t).id,createTime:ll(Gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tp(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:ep(o.bundledQuery),readTime:Ka(o.readTime)};var o})}saveNamedQuery(e,t){return tp(e).put({name:(r=t).name,readTime:ll(Gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $v(n){return On(n,$u.store)}function tp(n){return On(n,Gu.store)}class xm{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new xm(e,t.uid||"")}getOverlay(e,t){return np(e).get(Hv(this.userId,t)).next(r=>r?BI(this.O,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach(u=>{const h=new LI(t,u);o.push(this.Yt(e,h))}),ge.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(sn(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(np(e).Gt(Mr.collectionPathOverlayIndex,m))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const o=new Map,u=sn(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return np(e).qt(Mr.collectionPathOverlayIndex,h).next(m=>{for(const w of m){const b=BI(this.O,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=new Map;let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return np(e).Qt({index:Mr.collectionGroupOverlayIndex,range:m},(w,b,M)=>{const O=BI(this.O,b);u.size<o||O.largestBatchId===h?(u.set(O.getKey(),O),h=O.largestBatchId):M.done()}).next(()=>u)}Yt(e,t){return np(e).put(function(r,o,u){const[h,m,w]=Hv(o,u.mutation.key);return new Mr(o,m,w,u.mutation.key.getCollectionGroup(),u.largestBatchId,Za(r.Ht,u.mutation))}(this.O,this.userId,t))}}function np(n){return On(n,Mr.store)}class lh{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),Gd(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(ea(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?yo(e,Jw)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):st()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const o of Object.keys(r))this.ie(o,t),this.Zt(r[o],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const o of r)this.Zt(o,t)}ce(e,t){this.ee(t,37),Ye.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function Gv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function mb(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Gv(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}lh.le=new lh;class yb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const o=t.codePointAt(0);this.de(240|o>>>18),this.de(128|63&o>>>12),this.de(128|63&o>>>6),this.de(128|63&o)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const o=t.codePointAt(0);this.me(240|o>>>18),this.me(128|63&o>>>12),this.me(128|63&o>>>6),this.me(128|63&o)}}this.ge()}Ie(e){const t=this.Ee(e),r=mb(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ae(e){const t=this.Ee(e),r=mb(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class _b{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class jI{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class qv{constructor(){this.Se=new yb,this.De=new _b(this.Se),this.Ce=new jI(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class zv{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}}function Mm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:(t=Wv(n.arrayValue,e.arrayValue),0!==t?t:Wv(n.directionalValue,e.directionalValue)))}function Wv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class vb{constructor(){this.xe=new Zv}addToCollectionParentIndex(e,t){return this.xe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t,r){return ge.resolve(Qt())}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Zv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Dn(qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dn(qt.comparator)).toArray()}}class HI{constructor(e){this.user=e,this.ke=new Zv,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const u={collectionId:r,parent:sn(o)};return $I(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Vu(t),""],!1,!0);return $I(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Wi(h.parent))}return r})}addFieldIndex(e,t){const r=ip(e),o=new Zi((u=t).indexId,u.collectionGroup,u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind]));var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=ip(e),o=sp(e),u=rp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return ge.resolve(Qt())}getFieldIndex(e,t){return ge.resolve(null)}Oe(e,t){const r=new qv;for(const o of e.fields.filter(h=>2!==h.kind)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);lh.le.Xt(u,h)}return r.Ve()}Me(e){const t=new qv;return lh.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=ip(e),o=sp(e);return(t?r.qt(Zi.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return ge.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(b,M){const O=M?new zd(M.sequenceNumber,new dm(Ka(M.readTime),new Ye(Wi(M.documentKey)),M.largestBatchId)):zd.empty(),H=b.fields.map(([G,oe])=>new Ff(Hr.fromServerFormat(G),oe));return new lm(b.indexId,b.collectionGroup,H,O)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>r.indexState.sequenceNumber-o.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ip(e),u=sp(e);return this.$e(e).next(h=>o.qt(Zi.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(m=>ge.forEach(m,w=>{return u.put(new Ki(w.indexId,this.user.uid||"",h,ll((H=r).readTime),sn(H.documentKey.path),H.largestBatchId));var H})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?ge.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ge.forEach(m,w=>this.Fe(e,o,w).next(b=>{const M=this.Be(u,w);return b.isEqual(M)?ge.resolve():this.Le(e,u,b,M)}))))})}Ue(e,t,r){return rp(e).put(new Yi(r.indexId,this.uid,r.arrayValue,r.directionalValue,sn(t.key.path)))}qe(e,t,r){return rp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,sn(t.key.path)])}Fe(e,t,r){const o=rp(e);let u=new Dn(Mm);return o.Qt({index:Yi.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,sn(t.path)])},(h,m)=>{u=u.add(new zv(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}Be(e,t){let r=new Dn(Mm);const o=this.Oe(t,e);if(null==o)return r;const u=t.fields.find(m=>2===m.kind);if(null!=u){const h=e.data.field(u.fieldPath);if(kf(h))for(const m of h.arrayValue.values||[])r=r.add(new zv(t.indexId,e.key,this.Me(m),o))}else r=r.add(new zv(t.indexId,e.key,new Uint8Array,o));return r}Le(e,t,r,o){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,w,b,M){const O=h.getIterator(),H=m.getIterator();let G=rh(O),oe=rh(H);for(;G||oe;){let Ve=!1,Ke=!1;if(G&&oe){const dt=w(G,oe);dt<0?Ke=!0:dt>0&&(Ve=!0)}else null!=G?Ke=!0:Ve=!0;Ve?(b(oe),oe=rh(H)):Ke?(M(G),G=rh(O)):(G=rh(O),oe=rh(H))}}(r,o,Mm,h=>{u.push(this.Ue(e,t,h))},h=>{u.push(this.qe(e,t,h))}),ge.waitFor(u)}$e(e){let t=1;return sp(e).Qt({index:Ki.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}}function $I(n){return On(n,ul.store)}function rp(n){return On(n,Yi.store)}function ip(n){return On(n,Zi.store)}function sp(n){return On(n,Ki.store)}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GI(n,e,t){const r=n.store(nn.store),o=n.store(gr.store),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Qt({range:h},(M,O,H)=>(m++,H.delete()));u.push(w.next(()=>{vt(1===m)}));const b=[];for(const M of t.mutations){const O=gr.key(e,M.key.path,t.batchId);u.push(o.delete(O)),b.push(M.key)}return ge.waitFor(u).next(()=>b)}function Yv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);class Rm{constructor(e,t,r,o){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=o,this.Ke={}}static Jt(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Rm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hl(e).Qt({index:nn.userMutationsIndex,range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=op(e),h=hl(e);return h.add({}).next(m=>{vt("number"==typeof m);const w=new Uv(m,t,r,o),b=function(H,G,oe){const Ve=oe.baseMutations.map(dt=>Za(H.Ht,dt)),Ke=oe.mutations.map(dt=>Za(H.Ht,dt));return new nn(G,oe.batchId,oe.localWriteTime.toMillis(),Ve,Ke)}(this.O,this.userId,w),M=[];let O=new Dn((H,G)=>Pt(H.canonicalString(),G.canonicalString()));for(const H of o){const G=gr.key(this.userId,H.key.path,m);O=O.add(H.key.path.popLast()),M.push(h.put(b)),M.push(u.put(G,gr.PLACEHOLDER))}return O.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Ke[m]=w.keys()}),ge.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return hl(e).get(t).next(r=>r?(vt(r.userId===this.userId),dl(this.O,r)):null)}Ge(e,t){return this.Ke[t]?ge.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Ke[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return hl(e).Qt({index:nn.userMutationsIndex,range:o},(h,m,w)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=dl(this.O,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hl(e).Qt({index:nn.userMutationsIndex,range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hl(e).qt(nn.userMutationsIndex,t).next(r=>r.map(o=>dl(this.O,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gr.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return op(e).Qt({range:o},(h,m,w)=>{const[b,M,O]=h,H=Wi(M);if(b===this.userId&&t.path.isEqual(H))return hl(e).get(O).next(G=>{if(!G)throw st();vt(G.userId===this.userId),u.push(dl(this.O,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Pt);const o=[];return t.forEach(u=>{const h=gr.prefixForPath(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=op(e).Qt({range:m},(b,M,O)=>{const[H,G,oe]=b,Ve=Wi(G);H===this.userId&&u.path.isEqual(Ve)?r=r.add(oe):O.done()});o.push(w)}),ge.waitFor(o).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=gr.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Dn(Pt);return op(e).Qt({range:h},(w,b,M)=>{const[O,H,G]=w,oe=Wi(H);O===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(G)):M.done()}).next(()=>this.je(e,m))}je(e,t){const r=[],o=[];return t.forEach(u=>{o.push(hl(e).get(u).next(h=>{if(null===h)throw st();vt(h.userId===this.userId),r.push(dl(this.O,h))}))}),ge.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return GI(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ge.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(gr.prefixForUser(this.userId)),o=[];return op(e).Qt({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=Wi(u[1]);o.push(w)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return Eb(e,this.userId,t)}We(e){return wb(e).get(this.userId).next(t=>t||new ju(this.userId,-1,""))}}function Eb(n,e,t){const r=gr.prefixForPath(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return op(n).Qt({range:u,jt:!0},(m,w,b)=>{const[M,O,H]=m;M===e&&O===o&&(h=!0),b.done()}).next(()=>h)}function hl(n){return On(n,nn.store)}function op(n){return On(n,gr.store)}function wb(n){return On(n,ju.store)}class dh{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new dh(0)}static Je(){return new dh(-1)}}class DA{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new dh(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>_t.fromTimestamp(new Sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Xe(e,o)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ap(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ap(e).Qt((h,m)=>{const w=ch(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ge.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ap(e).Qt((r,o)=>{const u=ch(o);t(u)})}Ye(e){return Ib(e).get(Cs.key).next(t=>(vt(null!==t),t))}Xe(e,t){return Ib(e).put(Cs.key,t)}Ze(e,t){return ap(e).put(Xf(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lf(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ap(e).Qt({range:o,index:hi.queryTargetsIndexName},(h,m,w)=>{const b=ch(m);gv(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=vo(e);return t.forEach(h=>{const m=sn(h.path);o.push(u.put(new xr(r,m))),o.push(this.referenceDelegate.addReference(e,r,h))}),ge.waitFor(o)}removeMatchingKeys(e,t,r){const o=vo(e);return ge.forEach(t,u=>{const h=sn(u.path);return ge.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=vo(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=vo(e);let u=Qt();return o.Qt({range:r,jt:!0},(h,m,w)=>{const b=Wi(h[1]),M=new Ye(b);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=sn(t.path),o=IDBKeyRange.bound([r],[Vu(r)],!1,!0);let u=0;return vo(e).Qt({index:xr.documentTargetsIndex,jt:!0,range:o},([h,m],w,b)=>{0!==h&&(u++,b.done())}).next(()=>u>0)}Tt(e,t){return ap(e).get(t).next(r=>r?ch(r):null)}}function ap(n){return On(n,hi.store)}function Ib(n){return On(n,Cs.store)}function vo(n){return On(n,xr.store)}function hh(n){return up.apply(this,arguments)}function up(){return up=(0,ye.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Lv)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),up.apply(this,arguments)}function fl([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class qI{constructor(e){this.en=e,this.buffer=new Dn(fl),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){qu(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield hh(o)}yield t.un(e)}))}}class Db{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Gi.A);const r=new qI(t);return this.an.forEachTarget(e,o=>r.rn(o.sequenceNumber)).next(()=>this.an.ln(e,o=>r.rn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Kv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,o,u,h,m,w,b;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,h=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),uv()<=xu.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(b-w)+`ms\nTotal Duration: ${b-M}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class Qv{constructor(e,t){this.db=e,this.garbageCollector=new Db(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,o)=>t(o))}addReference(e,t,r){return cp(e,r)}removeReference(e,t,r){return cp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cp(e,t)}wn(e,t){return function(r,o){let u=!1;return wb(r).Wt(h=>Eb(r,h,o).next(m=>(m&&(u=!0),ge.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this._n(e,(h,m)=>{if(m<=t){const w=this.wn(e,h).next(b=>{if(!b)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,_t.min()),vo(e).delete([0,sn(h.path)])))});o.push(w)}}).next(()=>ge.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cp(e,t)}_n(e,t){const r=vo(e);let o,u=Gi.A;return r.Qt({index:xr.documentTargetsIndex},([h,m],{path:w,sequenceNumber:b})=>{0===h?(u!==Gi.A&&t(new Ye(Wi(o)),u),u=b,o=w):u=Gi.A}).next(()=>{u!==Gi.A&&t(new Ye(Wi(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cp(n,e){return vo(n).put((r=n.currentSequenceNumber,new xr(0,sn(e.path),r)));var r}class pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Hd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return om(this.inner)}}class Jv{constructor(){this.changes=new pl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bA{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ya(e).put(Xv(t),r)}removeEntry(e,t){const r=Ya(e),o=Xv(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Ya(e).get(Xv(t)).next(r=>this.gn(t,r))}yn(e,t){return Ya(e).get(Xv(t)).next(r=>({document:this.gn(t,r),size:Yv(r)}))}getEntries(e,t){let r=ws();return this.pn(e,t,(o,u)=>{const h=this.gn(o,u);r=r.insert(o,h)}).next(()=>r)}In(e,t){let r=ws(),o=new ir(Ye.comparator);return this.pn(e,t,(u,h)=>{const m=this.gn(u,h);r=r.insert(u,m),o=o.insert(u,Yv(h))}).next(()=>({documents:r,En:o}))}pn(e,t,r){if(t.isEmpty())return ge.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let h=u.getNext();return Ya(e).Qt({range:o},(m,w,b)=>{const M=Ye.fromSegments(m);for(;h&&Ye.comparator(h,M)<0;)r(h,null),h=u.getNext();h&&h.isEqual(M)&&(r(h,w),h=u.hasNext()?u.getNext():null),h?b.Ut(h.path.toArray()):b.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAll(e,t,r){let o=ws();const u=t.length+1,h={};if(r.isEqual(_t.min())){const m=t.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=t.toArray(),w=Sm(r);h.range=IDBKeyRange.lowerBound([m,w],!0),h.index=Rn.collectionReadTimeIndex}return Ya(e).Qt(h,(m,w,b)=>{if(m.length!==u)return;const M=this.gn(Ye.fromSegments(m),w);t.isPrefixOf(M.key.path)?o=o.insert(M.key,M):b.done()}).next(()=>o)}newChangeBuffer(e){return new zI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lp(e).get(_o.key).next(t=>(vt(!!t),t))}mn(e,t){return lp(e).put(_o.key,t)}gn(e,t){if(t){const r=Am(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Mn.newInvalidDocument(e)}}class zI extends Jv{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new pl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Dn((u,h)=>Pt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.An.get(u);if(h.isValidDocument()){const w=UI(this.Tn.O,h);o=o.add(u.path.popLast()),r+=Yv(w)-m,t.push(this.Tn.addEntry(e,u,w))}else if(r-=m,this.trackRemovals){const w=UI(this.Tn.O,h.convertToNoDocument(_t.min()));t.push(this.Tn.addEntry(e,u,w))}else t.push(this.Tn.removeEntry(e,u))}),o.forEach(u=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Tn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:o})=>(o.forEach((u,h)=>{this.An.set(u,h)}),r))}}function lp(n){return On(n,_o.store)}function Ya(n){return On(n,Rn.store)}function Xv(n){return n.path.toArray()}class TA{constructor(e){this.O=e}kt(e,t,r,o){const u=new Qf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Is.store),(m=e).createObjectStore(ju.store,{keyPath:ju.keyPath}),m.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(gr.store),bb(e),function(m){m.createObjectStore(Rn.store)}(e));let h=ge.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(xr.store),m.deleteObjectStore(hi.store),m.deleteObjectStore(Cs.store)}(e),bb(e)),h=h.next(()=>function(m){const w=m.store(Cs.store),b=new Cs(0,0,_t.min().toTimestamp(),0);return w.put(Cs.key,b)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store(nn.store).qt().next(b=>{m.deleteObjectStore(nn.store),m.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0});const M=w.store(nn.store),O=b.map(H=>M.put(H));return ge.waitFor(O)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore(Hu.store,{keyPath:Hu.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Rn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore(_o.store)}(e),this.Pn(u)))),r<7&&o>=7&&(h=h.next(()=>this.bn(u))),r<8&&o>=8&&(h=h.next(()=>this.vn(e,u))),r<9&&o>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const w=m.objectStore(Rn.store);w.createIndex(Rn.readTimeIndex,Rn.readTimeIndexPath,{unique:!1}),w.createIndex(Rn.collectionReadTimeIndex,Rn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.Vn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore($u.store,{keyPath:$u.keyPath})})(e),function(m){m.createObjectStore(Gu.store,{keyPath:Gu.keyPath})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore(Mr.store,{keyPath:Mr.keyPath});w.createIndex(Mr.collectionPathOverlayIndex,Mr.collectionPathOverlayIndexPath,{unique:!1}),w.createIndex(Mr.collectionGroupOverlayIndex,Mr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>{!function(m){m.createObjectStore(Zi.store,{keyPath:Zi.keyPath,autoIncrement:!0}).createIndex(Zi.collectionGroupIndex,Zi.collectionGroupIndexPath,{unique:!1}),m.createObjectStore(Ki.store,{keyPath:Ki.keyPath}).createIndex(Ki.sequenceNumberIndex,Ki.sequenceNumberIndexPath,{unique:!1}),m.createObjectStore(Yi.store,{keyPath:Yi.keyPath}).createIndex(Yi.documentKeyIndex,Yi.documentKeyIndexPath,{unique:!1})}(e)})),h}Pn(e){let t=0;return e.store(Rn.store).Qt((r,o)=>{t+=Yv(o)}).next(()=>{const r=new _o(t);return e.store(_o.store).put(_o.key,r)})}Rn(e){const t=e.store(ju.store),r=e.store(nn.store);return t.qt().next(o=>ge.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt(nn.userMutationsIndex,h).next(m=>ge.forEach(m,w=>{vt(w.userId===u.userId);const b=dl(this.O,w);return GI(e,u.userId,b).next(()=>{})}))}))}bn(e){const t=e.store(xr.store),r=e.store(Rn.store);return e.store(Cs.store).get(Cs.key).next(o=>{const u=[];return r.Qt((h,m)=>{const w=new qt(h),b=[0,sn(w)];u.push(t.get(b).next(M=>M?ge.resolve():t.put(new xr(0,sn(w),o.highestListenSequenceNumber))))}).next(()=>ge.waitFor(u))})}vn(e,t){e.createObjectStore(ul.store,{keyPath:ul.keyPath});const r=t.store(ul.store),o=new Zv,u=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:sn(w)})}};return t.store(Rn.store).Qt({jt:!0},(h,m)=>{const w=new qt(h);return u(w.popLast())}).next(()=>t.store(gr.store).Qt({jt:!0},([h,m,w],b)=>{const M=Wi(m);return u(M.popLast())}))}Vn(e){const t=e.store(hi.store);return t.Qt((r,o)=>{const u=ch(o),h=Xf(this.O,u);return t.put(h)})}}function bb(n){n.createObjectStore(xr.store,{keyPath:xr.keyPath}).createIndex(xr.documentTargetsIndex,xr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(hi.store,{keyPath:hi.keyPath}).createIndex(hi.queryTargetsIndexName,hi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Cs.store)}const e0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dp{constructor(e,t,r,o,u,h,m,w,b,M,O=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=u,this.window=h,this.document=m,this.Dn=b,this.Cn=M,this.schemaVersion=O,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=H=>Promise.resolve(),!dp.Vt())throw new Me(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qv(this,o),this.Bn=t+"main",this.O=new VI(w),this.Ln=new Ws(this.Bn,this.schemaVersion,new TA(this.O)),this.Un=new DA(this.referenceDelegate,this.O),this.qn=new bA(this.O),this.Kn=new gb,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===M&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(fe.FAILED_PRECONDITION,e0);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Gi(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>t0(e).put(new Hu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(qu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return hp(e).get(Is.key).next(t=>ge.resolve(this.ts(t)))}es(e){return t0(e).delete(this.clientId)}ns(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=On(r,Hu.store);return o.qt().next(u=>{const h=e.rs(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return ge.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ge.resolve(!0):hp(e).get(Is.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Me(fe.FAILED_PRECONDITION,e0);return!1}}return!(!this.networkEnabled||!this.inForeground)||t0(e).qt().next(r=>void 0===this.rs(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Is.store,Hu.store],t=>{const r=new fi(t,Gi.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>t0(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return Rm.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new HI(e)}getDocumentOverlayCache(e){return xm.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=13===(h=this.schemaVersion)?pb:12===h?PI:11===h?NI:void st();var h;let m;return this.Ln.runTransaction(e,o,u,w=>(m=new fi(w,this.Nn?this.Nn.next():Gi.A),"readwrite-primary"===t?this.Jn(m).next(b=>!!b||this.Yn(m)).next(b=>{if(!b)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Me(fe.FAILED_PRECONDITION,Lv);return r(m)}).next(b=>this.Zn(m).next(()=>b)):this._s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}_s(e){return hp(e).get(Is.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(fe.FAILED_PRECONDITION,e0)})}Zn(e){const t=new Is(this.clientId,this.allowTabSynchronization,Date.now());return hp(e).put(Is.key,t)}static Vt(){return Ws.Vt()}Xn(e){const t=hp(e);return t.get(Is.key).next(r=>this.ts(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete(Is.key)):ge.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,Mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hp(n){return On(n,Is.store)}function t0(n){return On(n,Hu.store)}function n0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class r0{constructor(e,t){this.progress=e,this.ws=t}}class Tb{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Is(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Rs(e,t.path):gm(t)?this.Ps(e,t,r):this.bs(e,t,r);var o}Rs(e,t){return this.ys(e,new Ye(t)).next(r=>{let o=ih();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ps(e,t,r){const o=t.collectionGroup;let u=ih();return this.indexManager.getCollectionParents(e,o).next(h=>ge.forEach(h,m=>{const w=(b=t,M=m.child(o),new Wa(M,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,M;return this.bs(e,w,r).next(b=>{b.forEach((M,O)=>{u=u.insert(M,O)})})}).next(()=>u))}bs(e,t,r){let o;return this.qn.getAll(e,t.path,r).next(u=>(o=u,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const w=m.key;let b=o.get(w);null==b&&(b=Mn.newInvalidDocument(w),o=o.insert(w,b)),Av(m,b,h.localWriteTime),b.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,h)=>{wv(t,h)||(o=o.remove(u))}),o))}}class Ti{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=o}static Ss(e,t){let r=Qt(),o=Qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ti(e,t.fromCache,r,o)}}class WI{Ds(e){this.Cs=e}As(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(_t.min())?this.Ns(e,t):this.Cs.Es(e,o).next(u=>{const h=this.xs(t,u);return(Uf(t)||fm(t))&&this.ks(t.limitType,h,o,r)?this.Ns(e,t):(uv()<=xu.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ev(t)),this.Cs.As(e,t,r).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}xs(e,t){let r=new Dn(cI(e));return t.forEach((o,u)=>{wv(e,u)&&(r=r.add(u))}),r}ks(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ns(e,t){return uv()<=xu.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Ev(t)),this.Cs.As(e,t,_t.min())}}class s0{constructor(e,t,r,o){this.persistence=e,this.Os=t,this.O=o,this.Ms=new ir(Pt),this.$s=new pl(u=>Lf(u),gv),this.Fs=_t.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new Tb(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ZI(n,e,t,r){return new s0(n,e,t,r)}function KI(n,e){return fp.apply(this,arguments)}function fp(){return fp=(0,ye.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.gs.getAllMutationBatches(r).next(u=>(o=u,t.Ls(e),t.gs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=Qt();for(const b of o){h.push(b.batchId);for(const M of b.mutations)w=w.add(M.key)}for(const b of u){m.push(b.batchId);for(const M of b.mutations)w=w.add(M.key)}return t.Us.Es(r,w).next(b=>({qs:b,removedBatchIds:h,addedBatchIds:m}))})})}),fp.apply(this,arguments)}function YI(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Bs.newChangeBuffer({trackRemovals:!0});return function(h,m,w,b){const M=w.batch,O=M.keys();let H=ge.resolve();return O.forEach(G=>{H=H.next(()=>b.getEntry(m,G)).next(oe=>{const Ve=w.docVersions.get(G);vt(null!==Ve),oe.version.compareTo(Ve)<0&&(M.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),b.addEntry(oe)))})}),H.next(()=>h.gs.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,o))})}function o0(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function Ab(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach((b,M)=>{const O=o.get(M);if(!O)return;m.push(t.Un.removeMatchingKeys(u,b.removedDocuments,M).next(()=>t.Un.addMatchingKeys(u,b.addedDocuments,M)));let H=O.withSequenceNumber(u.currentSequenceNumber);var G,oe,Ve;e.targetMismatches.has(M)?H=H.withResumeToken(pr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):b.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(b.resumeToken,r)),o=o.insert(M,H),oe=H,Ve=b,(0===(G=O).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.Un.updateTargetData(u,H))});let w=ws();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(a0(u,h,e.documentUpdates).next(b=>{w=b})),!r.isEqual(_t.min())){const b=t.Un.getLastRemoteSnapshotVersion(u).next(M=>t.Un.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return ge.waitFor(m).next(()=>h.apply(u)).next(()=>t.Us.Ts(u,w)).next(()=>w)}).then(u=>(t.Ms=o,u))}function a0(n,e,t){let r=Qt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ws();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):ke("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),u})}function QI(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function fh(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Un.getTargetData(r,e).next(u=>u?(o=u,ge.resolve(o)):t.Un.allocateTargetId(r).next(h=>(o=new Zs(e,h,0,r.currentSequenceNumber),t.Un.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ms.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function ph(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,ye.Z)(function*(n,e,t){const r=ze(n),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!qu(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.$s.delete(o.target)}),pp.apply(this,arguments)}function Ji(n,e,t){const r=ze(n);let o=_t.min(),u=Qt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,b){const M=ze(m),O=M.$s.get(b);return void 0!==O?ge.resolve(M.Ms.get(O)):M.Un.getTargetData(w,b)}(r,h,zi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.Os.As(h,e,t?o:_t.min(),t?u:Qt())).next(m=>({documents:m,Ks:u})))}function JI(n,e){const t=ze(n),r=ze(t.Un),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Tt(u,e).next(h=>h?h.target:null))}function Sb(n){const e=ze(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,u){const h=ze(r);let m=ws(),w=Sm(u);const b=Ya(o),M=IDBKeyRange.lowerBound(w,!0);return b.Qt({index:Rn.readTimeIndex,range:M},(O,H)=>{const G=Am(h.O,H);m=m.insert(G.key,G),w=H.readTime}).next(()=>({ws:m,readTime:jv(w)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function Om(){return Om=(0,ye.Z)(function*(n){const e=ze(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Ya(r);let u=_t.min();return o.Qt({index:Rn.readTimeIndex,reverse:!0},(h,m,w)=>{m.readTime&&(u=jv(m.readTime)),w.done()}).next(()=>u)}(t)).then(t=>{e.Fs=t})}),Om.apply(this,arguments)}function u0(){return u0=(0,ye.Z)(function*(n,e,t,r){const o=ze(n);let u=Qt(),h=ws();for(const b of t){const M=e.Gs(b.metadata.name);b.document&&(u=u.add(M));const O=e.js(b);O.setReadTime(e.Qs(b.metadata.readTime)),h=h.insert(M,O)}const m=o.Bs.newChangeBuffer({trackRemovals:!0}),w=yield fh(o,(b=r,zi(Kd(qt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>a0(b,m,h).next(M=>(m.apply(b),M)).next(M=>o.Un.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Un.addMatchingKeys(b,u,w.targetId)).next(()=>o.Us.Ts(b,M)).next(()=>M)))}),u0.apply(this,arguments)}function XI(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,ye.Z)(function*(n,e,t=Qt()){const r=yield fh(n,zi(ep(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Gr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Kn.saveNamedQuery(u,e);const m=r.withResumeToken(pr.EMPTY_BYTE_STRING,h);return o.Ms=o.Ms.insert(m.targetId,m),o.Un.updateTargetData(u,m).next(()=>o.Un.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Un.addMatchingKeys(u,t,r.targetId)).next(()=>o.Kn.saveNamedQuery(u,e))})}),c0.apply(this,arguments)}class AA{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ge.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Gr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:ep(r.bundledQuery),readTime:Gr(r.readTime)}),ge.resolve();var r}}class eC{constructor(){this.overlays=new ir(Ye.comparator),this.Hs=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(o=>{this.Yt(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Hs.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Hs.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const o=new Map,u=t.length+1,h=new Ye(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ir((b,M)=>b-M);const h=this.overlays.getIterator();for(;h.hasNext();){const b=h.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let M=u.get(b.largestBatchId);null===M&&(M=new Map,u=u.insert(b.largestBatchId,M)),M.set(b.getKey(),b)}}const m=new Map,w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,M)=>m.set(M,b)),!(m.size>=o)););return ge.resolve(m)}Yt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);null!==o&&this.Hs.get(o.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new LI(t,r));let u=this.Hs.get(t);void 0===u&&(u=new Set,this.Hs.set(t,u)),u.add(r.key)}}class Nm{constructor(){this.Js=new Dn(Rr.Ys),this.Xs=new Dn(Rr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Rr(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Rr(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Ye(new qt([])),r=new Rr(t,e),o=new Rr(t,e+1),u=[];return this.Xs.forEachInRange([r,o],h=>{this.ei(h),u.push(h.key)}),u}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Ye(new qt([])),r=new Rr(t,e),o=new Rr(t,e+1);let u=Qt();return this.Xs.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Rr(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Rr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Ye.comparator(e.key,t.key)||Pt(e.oi,t.oi)}static Zs(e,t){return Pt(e.oi,t.oi)||Ye.comparator(e.key,t.key)}}class Rb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Dn(Rr.Ys)}checkEmpty(e){return ge.resolve(0===this.gs.length)}addMutationBatch(e,t,r,o){const u=this.ci;this.ci++;const h=new Uv(u,t,r,o);this.gs.push(h);for(const m of o)this.ui=this.ui.add(new Rr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ge.resolve(h)}lookupMutationBatch(e,t){return ge.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.hi(t+1),u=o<0?0:o;return ge.resolve(this.gs.length>u?this.gs[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ge.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Rr(t,0),o=new Rr(t,Number.POSITIVE_INFINITY),u=[];return this.ui.forEachInRange([r,o],h=>{const m=this.ai(h.oi);u.push(m)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Pt);return t.forEach(o=>{const u=new Rr(o,0),h=new Rr(o,Number.POSITIVE_INFINITY);this.ui.forEachInRange([u,h],m=>{r=r.add(m.oi)})}),ge.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const h=new Rr(new Ye(u),0);let m=new Dn(Pt);return this.ui.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.oi)),!0)},h),ge.resolve(this.li(m))}li(e){const t=[];return e.forEach(r=>{const o=this.ai(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return ge.forEach(t.mutations,o=>{const u=new Rr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Rr(t,0),o=this.ui.firstAfterOrEqual(r);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ge.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class tC{constructor(e){this.di=e,this.docs=new ir(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),ge.resolve(r)}getAll(e,t,r){let o=ws();const u=new Ye(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||w.readTime.compareTo(r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}_i(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gp(this)}getSize(e){return ge.resolve(this.size)}}class gp extends Jv{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Tn.addEntry(e,o)):this.Tn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class l0{constructor(e){this.persistence=e,this.wi=new pl(t=>Lf(t),gv),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.mi=0,this.gi=new Nm,this.targetCount=0,this.yi=dh.He()}forEachTarget(e,t){return this.wi.forEach((r,o)=>t(o)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),ge.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new dh(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Ze(t),ge.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.wi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.wi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ge.waitFor(u).next(()=>o)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.gi.containsKey(t))}}class nC{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Gi(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new l0(this),this.indexManager=new vb,this.qn=new tC(r=>this.referenceDelegate.Ii(r)),this.O=new VI(t),this.Kn=new AA(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new Rb(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new Ob(this.Nn.next());return this.referenceDelegate.Ei(),r(o).next(u=>this.referenceDelegate.Ti(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,t){return ge.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class Ob extends bm{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Ri=new Nm,this.Pi=null}static bi(e){return new Pm(e)}get vi(){if(this.Pi)return this.Pi;throw st()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(o=>this.vi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.vi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.vi,r=>{const o=Ye.fromPath(r);return this.Vi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function d0(n,e){return`firestore_clients_${n}_${e}`}function rC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function h0(n,e){return`firestore_targets_${n}_${e}`}class f0{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Si(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Me(o.error.code,o.error.message))),h?new f0(e,t,o.state,u):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class km{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new km(e,r.state,o):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=vm();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=hv(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new mp(e,u):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class p0{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new p0(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class g0{constructor(){this.activeTargetIds=vm()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m0{constructor(e,t,r,o,u){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new ir(Pt),this.started=!1,this.$i=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Fi=d0(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new g0),this.Li=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.ds();for(const o of t){if(o===e.xi)continue;const u=e.getItem(d0(e.persistenceKey,o));if(u){const h=mp.Si(o,u);h&&(e.Mi=e.Mi.insert(h.clientId,h))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const o=e.Qi(r);o&&e.Wi(o)}for(const o of e.$i)e.Oi(o);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(h0(this.persistenceKey,e));if(r){const o=km.Si(e,r);o&&(t=o.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ji(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const o=t.er(r.key);return t.nr(o,null)}{const o=t.sr(r.key,r.newValue);if(o)return t.nr(o.clientId,o)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const o=t.ir(r.key,r.newValue);if(o)return t.rr(o)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const o=t.cr(r.key,r.newValue);if(o)return t.ur(o)}}else if(r.key===t.Ki){if(null!==r.newValue){const o=t.Qi(r.newValue);if(o)return t.Wi(o)}}else if(r.key===t.Bi){const o=function(u){let h=Gi.A;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),h=m}catch(m){nr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Gi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const o=new f0(this.currentUser,e,t,r),u=rC(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Di())}Ji(e){const t=rC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const o=h0(this.persistenceKey,e),u=new km(e,t,r);this.setItem(o,u.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return mp.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),o=Number(r[1]);return f0.Si(new Tr(void 0!==r[2]?r[2]:null),o,t)}cr(e,t){const r=this.qi.exec(e),o=Number(r[1]);return km.Si(o,t)}Qi(e){return p0.Si(e)}rr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),o=this.zi(this.Mi),u=this.zi(r),h=[],m=[];return u.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.dr(h,m).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=vm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Nb{constructor(){this._r=new g0,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new g0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class SA{mr(e){}shutdown(){}}class Pb{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class MA{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class kb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,o,u){const h=this.$r(e,t);ke("RestConnection","Sending: ",h,r);const m={};return this.Fr(m,o,u),this.Br(e,h,m,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw Nf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}Lr(e,t,r,o,u){return this.Mr(e,t,r,o,u)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}$r(e,t){return`${this.kr}/v1/${t}:${xA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,o){return new Promise((u,h)=>{const m=new $w;m.listenOnce(Bw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Bd.NO_ERROR:const b=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Bd.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),h(new Me(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const M=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const H=function(G){const oe=G.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(oe)>=0?oe:fe.UNKNOWN}(O.status);h(new Me(H,O.message))}else h(new Me(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Me(fe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}Ur(e,t,r){const o=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Uw(),h=sv(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Hw({})),this.Fr(m.initMessageHeaders,t,r),(0,Mt.uI)()||(0,Mt.b$)()||(0,Mt.d)()||(0,Mt.w1)()||(0,Mt.Mn)()||(0,Mt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let M=!1,O=!1;const H=new MA({Ar:oe=>{O?ke("Connection","Not sending because WebChannel is closed:",oe):(M||(ke("Connection","Opening WebChannel transport."),b.open(),M=!0),ke("Connection","WebChannel sending:",oe),b.send(oe))},Rr:()=>b.close()}),G=(oe,Ve,Ke)=>{oe.listen(Ve,dt=>{try{Ke(dt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return G(b,Of.EventType.OPEN,()=>{O||ke("Connection","WebChannel transport opened.")}),G(b,Of.EventType.CLOSE,()=>{O||(O=!0,ke("Connection","WebChannel transport closed"),H.Cr())}),G(b,Of.EventType.ERROR,oe=>{O||(O=!0,Nf("Connection","WebChannel transport errored:",oe),H.Cr(new Me(fe.UNAVAILABLE,"The operation could not be completed")))}),G(b,Of.EventType.MESSAGE,oe=>{var Ve;if(!O){const Ke=oe.data[0];vt(!!Ke);const dt=Ke,jt=dt.error||(null===(Ve=dt[0])||void 0===Ve?void 0:Ve.error);if(jt){ke("Connection","WebChannel received error:",jt);const un=jt.status;let xt=function(eu){const WC=rr[eu];if(void 0!==WC)return yI(WC)}(un),Pn=jt.message;void 0===xt&&(xt=fe.INTERNAL,Pn="Unknown error status: "+un+" with message "+jt.message),O=!0,H.Cr(new Me(xt,Pn)),b.close()}else ke("Connection","WebChannel received:",Ke),H.Nr(Ke)}}),G(h,jw.STAT_EVENT,oe=>{oe.stat===ov.PROXY?ke("Connection","Detected buffering proxy"):oe.stat===ov.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Dr()},0),H}}function yp(){return"undefined"!=typeof window?window:null}function Fm(){return"undefined"!=typeof document?document:null}function _p(n){return new CI(n,!0)}class Lm{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=o,this.Gr=u,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,o,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class zu{constructor(e,t,r,o,u,h,m,w){this.Sn=e,this.Xr=r,this.Zr=o,this.eo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Lm(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,ye.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,ye.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.no===t&&this.po(r,o)},r=>{e(()=>{const o=new Me(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(o)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(o=>{r(()=>this.Io(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}uo(){var e=this;this.state=5,this.ro.Hr((0,ye.Z)(function*(){e.state=0,e.start()}))}Io(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iC extends zu{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.O=u}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function ob(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:st(),o=e.targetChange.targetIds||[],u=function(w,b){return w.N?(vt(void 0===b||"string"==typeof b),pr.fromBase64String(b||"")):(vt(void 0===b||b instanceof Uint8Array),pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const b=void 0===w.code?fe.UNKNOWN:yI(w.code);return new Me(b,w.message||"")}(h);t=new nb(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=na(n,r.document.name),u=Gr(r.document.updateTime),h=new di({mapValue:{fields:r.document.fields}}),m=Mn.newFoundDocument(o,u,h);t=new sh(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=na(n,r.document),u=r.readTime?Gr(r.readTime):_t.min(),h=Mn.newNoDocument(o,u);t=new sh([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=na(n,r.document);t=new sh([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Hf(r.count||0);t=new wI(r.targetId,u)}}var w;return t}(this.O,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Gr(u.readTime):_t.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=Kf(this.O),t.addTarget=function(o,u){let h;const m=u.target;return h=mv(m)?{documents:Pv(o,m)}:{query:kv(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=ib(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(h.readTime=Wf(o,u.snapshotVersion.toTimestamp())),h}(this.O,e);const r=function MI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=Kf(this.O),t.removeTarget=e,this.fo(t)}}class y0 extends zu{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.O=u,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function xI(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=Gr(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=Gr(o)),new XD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.Vo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=Kf(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Za(this.O,r))};this.fo(t)}}class _0 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=o,this.Co=!1}No(){if(this.Co)throw new Me(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.eo.Mr(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(fe.UNKNOWN,o.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.eo.Lr(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(fe.UNKNOWN,o.toString())})}terminate(){this.Co=!0}}class Fb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(nr(t),this.Oo=!1):ke("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class v0{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=u,this.jo.mr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Qa(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const M=ze(b);M.Ko.add(4),yield ml(M),M.Qo.set("Unknown"),M.Ko.delete(4),yield gl(M)}),function(b){return w.apply(this,arguments)})(h))}))}),this.Qo=new Fb(r,o)}}function gl(n){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ye.Z)(function*(n){if(Qa(n))for(const e of n.Go)yield e(!0)}),Vm.apply(this,arguments)}function ml(n){return sC.apply(this,arguments)}function sC(){return sC=(0,ye.Z)(function*(n){for(const e of n.Go)yield e(!1)}),sC.apply(this,arguments)}function E0(n,e){const t=ze(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),uC(t)?aC(t):vp(t).co()&&oC(t,e))}function Um(n,e){const t=ze(n),r=vp(t);t.qo.delete(e),r.co()&&Lb(t,e),0===t.qo.size&&(r.co()?r.ho():Qa(t)&&t.Qo.set("Unknown"))}function oC(n,e){n.Wo.Z(e.targetId),vp(n).Ao(e)}function Lb(n,e){n.Wo.Z(e),vp(n).Ro(e)}function aC(n){n.Wo=new rb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),vp(n).start(),n.Qo.Mo()}function uC(n){return Qa(n)&&!vp(n).oo()&&n.qo.size>0}function Qa(n){return 0===ze(n).Ko.size}function cC(n){n.Wo=void 0}function Vb(n){return w0.apply(this,arguments)}function w0(){return w0=(0,ye.Z)(function*(n){n.qo.forEach((e,t)=>{oC(n,e)})}),w0.apply(this,arguments)}function Ub(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ye.Z)(function*(n,e){cC(n),uC(n)?(n.Qo.Bo(e),aC(n)):n.Qo.set("Unknown")}),Bm.apply(this,arguments)}function lC(n,e,t){return jm.apply(this,arguments)}function jm(){return jm=(0,ye.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof nb&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.qo.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.qo.delete(m),o.Wo.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hm(n,r)}else if(e instanceof sh?n.Wo.ct(e):e instanceof wI?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(_t.min()))try{const r=yield o0(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.Wo.yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.qo.get(w);b&&o.qo.set(w,b.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=o.qo.get(m);if(!w)return;o.qo.set(m,w.withResumeToken(pr.EMPTY_BYTE_STRING,w.snapshotVersion)),Lb(o,m);const b=new Zs(w.target,m,1,w.sequenceNumber);oC(o,b)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Hm(n,r)}var r}),jm.apply(this,arguments)}function Hm(n,e,t){return I0.apply(this,arguments)}function I0(){return I0=(0,ye.Z)(function*(n,e,t){if(!qu(e))throw e;n.Ko.add(1),yield ml(n),n.Qo.set("Offline"),t||(t=()=>o0(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield gl(n)}))}),I0.apply(this,arguments)}function C0(n,e){return e().catch(t=>Hm(n,t,e))}function Ja(n){return dC.apply(this,arguments)}function dC(){return dC=(0,ye.Z)(function*(n){const e=ze(n),t=yl(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;hC(e);)try{const o=yield QI(e.localStore,r);if(null===o){0===e.Uo.length&&t.ho();break}r=o.batchId,$m(e,o)}catch(o){yield Hm(e,o)}fC(e)&&pC(e)}),dC.apply(this,arguments)}function hC(n){return Qa(n)&&n.Uo.length<10}function $m(n,e){n.Uo.push(e);const t=yl(n);t.co()&&t.bo&&t.vo(e.mutations)}function fC(n){return Qa(n)&&!yl(n).oo()&&n.Uo.length>0}function pC(n){yl(n).start()}function Bb(n){return D0.apply(this,arguments)}function D0(){return D0=(0,ye.Z)(function*(n){yl(n).Do()}),D0.apply(this,arguments)}function RA(n){return b0.apply(this,arguments)}function b0(){return b0=(0,ye.Z)(function*(n){const e=yl(n);for(const t of n.Uo)e.vo(t.mutations)}),b0.apply(this,arguments)}function jb(n,e,t){return T0.apply(this,arguments)}function T0(){return T0=(0,ye.Z)(function*(n,e,t){const r=n.Uo.shift(),o=Bv.from(r,e,t);yield C0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ja(n)}),T0.apply(this,arguments)}function Hb(n,e){return A0.apply(this,arguments)}function A0(){return A0=(0,ye.Z)(function*(n,e){var t;e&&yl(n).bo&&(yield(t=(0,ye.Z)(function*(r,o){if(nh(u=o.code)&&u!==fe.ABORTED){const h=r.Uo.shift();yl(r).ao(),yield C0(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Ja(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),fC(n)&&pC(n)}),A0.apply(this,arguments)}function gC(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,ye.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Qa(t);t.Ko.add(3),yield ml(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield gl(t)}),S0.apply(this,arguments)}function x0(n,e){return mC.apply(this,arguments)}function mC(){return mC=(0,ye.Z)(function*(n,e){const t=ze(n);e?(t.Ko.delete(2),yield gl(t)):e||(t.Ko.add(2),yield ml(t),t.Qo.set("Unknown"))}),mC.apply(this,arguments)}function vp(n){return n.zo||(n.zo=function(e,t,r){const o=ze(e);return o.No(),new iC(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:Vb.bind(null,n),vr:Ub.bind(null,n),To:lC.bind(null,n)}),n.Go.push(function(){var e=(0,ye.Z)(function*(t){t?(n.zo.ao(),uC(n)?aC(n):n.Qo.set("Unknown")):(yield n.zo.stop(),cC(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function yl(n){return n.Ho||(n.Ho=function(e,t,r){const o=ze(e);return o.No(),new y0(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:Bb.bind(null,n),vr:Hb.bind(null,n),So:RA.bind(null,n),Vo:jb.bind(null,n)}),n.Go.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Ho.ao(),yield Ja(n)):(yield n.Ho.stop(),n.Uo.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class yC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new yC(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(n,e){if(nr("AsyncQueue",`${e}: ${n}`),qu(n))return new Me(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class gh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=ih(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new gh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $b{constructor(){this.Jo=new ir(Ye.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):st():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class wp{constructor(e,t,r,o,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new wp(e,t,gh.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class OA{constructor(){this.Xo=void 0,this.listeners=[]}}class NA{constructor(){this.queries=new pl(e=>vv(e),Qd),this.onlineState="Unknown",this.Zo=new Set}}function i(n,e){return s.apply(this,arguments)}function s(){return s=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new OA),o)try{u.Xo=yield t.onListen(r)}catch(h){const m=Ep(h,`Initialization of query '${Ev(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.tc(t.onlineState),u.Xo&&e.ec(u.Xo)&&_(t)}),s.apply(this,arguments)}function a(n,e){return c.apply(this,arguments)}function c(){return c=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),c.apply(this,arguments)}function l(n,e){const t=ze(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.ec(o)&&(r=!0);h.Xo=o}}r&&_(t)}function p(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function _(n){n.Zo.forEach(e=>{e.next()})}class E{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new wp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=wp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class I{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class T{constructor(e){this.O=e}Gs(e){return na(this.O,e)}js(e){return e.metadata.exists?SI(this.O,e.document,!1):Mn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Gr(e)}}class S{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=k(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new T(this.O);for(const o of e)if(o.metadata.queries){const u=r.Gs(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||Qt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function Mb(n,e,t,r){return u0.apply(this,arguments)}(e.localStore,new T(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const o of e.queries)yield XI(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new r0(Object.assign({},e.progress),t)})()}}function k(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class B{constructor(e){this.key=e}}class K{constructor(e){this.key=e}}class ve{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=Qt(),this.mutatedKeys=Qt(),this.mc=cI(e),this.gc=new gh(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new $b,o=t?t.gc:this.gc;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=Uf(this.query)&&o.size===this.query.limit?o.last():null,b=fm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,O)=>{const H=o.get(M),G=wv(this.query,O)?O:null,oe=!!H&&this.mutatedKeys.has(H.key),Ve=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ke=!1;H&&G?H.data.isEqual(G.data)?oe!==Ve&&(r.track({type:3,doc:G}),Ke=!0):this.Tc(H,G)||(r.track({type:2,doc:G}),Ke=!0,(w&&this.mc(G,w)>0||b&&this.mc(G,b)<0)&&(m=!0)):!H&&G?(r.track({type:0,doc:G}),Ke=!0):H&&!G&&(r.track({type:1,doc:H}),Ke=!0,(w||b)&&(m=!0)),Ke&&(G?(h=h.add(G),u=Ve?u.add(M):u.delete(M)):(h=h.delete(M),u=u.delete(M)))}),Uf(this.query)||fm(this.query))for(;h.size>this.query.limit;){const M=Uf(this.query)?h.last():h.first();h=h.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{gc:h,Ec:r,ks:m,mutatedKeys:u}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const u=e.Ec.Yo();u.sort((b,M)=>function(O,H){const G=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return G(O)-G(H)}(b.type,M.type)||this.mc(b.doc,M.doc)),this.Ac(r);const h=t?this.Rc():[],m=0===this.wc.size&&this.current?1:0,w=m!==this._c;return this._c=m,0!==u.length||w?{snapshot:new wp(this.query,e.gc,o,u,e.mutatedKeys,0===m,w,!1),Pc:h}:{Pc:h}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new $b,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=Qt(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new K(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new B(r))}),t}vc(e){this.dc=e.Ks,this.wc=Qt();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return wp.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class Fe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ge{constructor(e){this.key=e,this.Sc=!1}}class tt{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Dc={},this.Cc=new pl(m=>vv(m),Qd),this.Nc=new Map,this.xc=new Set,this.kc=new ir(Ye.comparator),this.Oc=new Map,this.Mc=new Nm,this.$c={},this.Fc=new Map,this.Bc=dh.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function Te(n,e){return lt.apply(this,arguments)}function lt(){return lt=(0,ye.Z)(function*(n,e){const t=sT(n);let r,o;const u=t.Cc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Vc();else{const h=yield fh(t.localStore,zi(e));t.isPrimaryClient&&E0(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield Ot(t,e,r,"current"===m)}return o}),lt.apply(this,arguments)}function Ot(n,e,t,r){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,ye.Z)(function*(n,e,t,r){n.Uc=(M,O,H)=>{return(G=(0,ye.Z)(function*(oe,Ve,Ke,dt){let jt=Ve.view.Ic(Ke);jt.ks&&(jt=yield Ji(oe.localStore,Ve.query,!1).then(({documents:Pn})=>Ve.view.Ic(Pn,jt)));const un=dt&&dt.targetChanges.get(Ve.targetId),xt=Ve.view.applyChanges(jt,oe.isPrimaryClient,un);return Zb(oe,Ve.targetId,xt.Pc),xt.snapshot}),function(oe,Ve,Ke,dt){return G.apply(this,arguments)})(n,M,O,H);var G};const o=yield Ji(n.localStore,e,!0),u=new ve(e,o.Ks),h=u.Ic(o.documents),m=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);Zb(n,t,w.Pc);const b=new Fe(e,t,u);return n.Cc.set(e,b),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),w.snapshot}),Kt.apply(this,arguments)}function Ds(n,e){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,ye.Z)(function*(n,e){const t=ze(n),r=t.Cc.get(e),o=t.Nc.get(r.targetId);if(o.length>1)return t.Nc.set(r.targetId,o.filter(u=>!Qd(u,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ph(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Um(t.remoteStore,r.targetId),zm(t,r.targetId)}).catch(hh))):(zm(t,r.targetId),yield ph(t.localStore,r.targetId,!0))}),Xa.apply(this,arguments)}function Ip(){return Ip=(0,ye.Z)(function*(n,e,t){const r=oT(n);try{const o=yield function(u,h){const m=ze(u),w=Sr.now(),b=h.reduce((O,H)=>O.add(H.key),Qt());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",O=>m.Us.Es(O,b).next(H=>{M=H;const G=[];for(const oe of h){const Ve=eb(oe,M.get(oe.key));null!=Ve&&G.push(new ol(oe.key,Ve,tI(Ve.value.mapValue),Hn.exists(!0)))}return m.gs.addMutationBatch(O,w,G,h)})).then(O=>(O.applyToLocalDocumentSet(M),{batchId:O.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let w=u.$c[u.currentUser.toKey()];w||(w=new ir(Pt)),w=w.insert(h,m),u.$c[u.currentUser.toKey()]=w}(r,o.batchId,t),yield _l(r,o.changes),yield Ja(r.remoteStore)}catch(o){const u=Ep(o,"Failed to persist write");t.reject(u)}}),Ip.apply(this,arguments)}function Gm(n,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ye.Z)(function*(n,e){const t=ze(n);try{const r=yield Ab(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Oc.get(u);h&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Sc=!0:o.modifiedDocuments.size>0?vt(h.Sc):o.removedDocuments.size>0&&(vt(h.Sc),h.Sc=!1))}),yield _l(t,r,e)}catch(r){yield hh(r)}}),Cp.apply(this,arguments)}function qm(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Cc.forEach((u,h)=>{const m=h.view.tc(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=ze(u);m.onlineState=h;let w=!1;m.queries.forEach((b,M)=>{for(const O of M.listeners)O.tc(h)&&(w=!0)}),w&&_(m)}(r.eventManager,e),o.length&&r.Dc.To(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R0(n,e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ye.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Oc.get(e),u=o&&o.key;if(u){let h=new ir(Ye.comparator);h=h.insert(u,Mn.newNoDocument(u,_t.min()));const m=Qt().add(u),w=new qf(_t.min(),new Map,new Dn(Pt),h,m);yield Gm(r,w),r.kc=r.kc.remove(u),r.Oc.delete(e),Kb(r)}else yield ph(r.localStore,e,!1).then(()=>zm(r,e,t)).catch(hh)}),Dp.apply(this,arguments)}function O0(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,ye.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield YI(t.localStore,e);Wb(t,r,null),zb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _l(t,o)}catch(o){yield hh(o)}}),bp.apply(this,arguments)}function zx(n,e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,ye.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,h){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.gs.lookupMutationBatch(w,h).next(M=>(vt(null!==M),b=M.keys(),m.gs.removeMutationBatch(w,M))).next(()=>m.gs.performConsistencyCheck(w)).next(()=>m.Us.Es(w,b))})}(r.localStore,e);Wb(r,e,t),zb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _l(r,o)}catch(o){yield hh(o)}}),Gb.apply(this,arguments)}function qb(){return qb=(0,ye.Z)(function*(n,e){const t=ze(n);Qa(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=ze(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.gs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Fc.get(r)||[];o.push(e),t.Fc.set(r,o)}catch(r){const o=Ep(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),qb.apply(this,arguments)}function zb(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function Wb(n,e,t){const r=ze(n);let o=r.$c[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.$c[r.currentUser.toKey()]=o}}function zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||PA(n,r)})}function PA(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Um(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),Kb(n))}function Zb(n,e,t){for(const r of t)r instanceof B?(n.Mc.addReference(r.key,e),Zx(n,r)):r instanceof K?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||PA(n,r.key)):st()}function Zx(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.xc.add(r),Kb(n))}function Kb(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Ye(qt.fromString(e)),r=n.Bc.next();n.Oc.set(r,new Ge(t)),n.kc=n.kc.insert(t,r),E0(n.remoteStore,new Zs(zi(Kd(t.path)),r,2,Gi.A))}}function _l(n,e,t){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,ye.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],h=[];var m;r.Cc.isEmpty()||(r.Cc.forEach((m,w)=>{h.push(r.Uc(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),o.push(b);const M=Ti.Ss(w.targetId,b);u.push(M)}}))}),yield Promise.all(h),r.Dc.To(o),yield(m=(0,ye.Z)(function*(w,b){const M=ze(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>ge.forEach(b,H=>ge.forEach(H.vs,G=>M.persistence.referenceDelegate.addReference(O,H.targetId,G)).next(()=>ge.forEach(H.Vs,G=>M.persistence.referenceDelegate.removeReference(O,H.targetId,G)))))}catch(O){if(!qu(O))throw O;ke("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const H=O.targetId;if(!O.fromCache){const G=M.Ms.get(H),Ve=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);M.Ms=M.Ms.insert(H,Ve)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),Yb.apply(this,arguments)}function Kx(n,e){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,ye.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield KI(t.localStore,e);t.currentUser=e,(o=t).Fc.forEach(h=>{h.forEach(m=>{m.reject(new Me(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _l(t,r.qs)}var o}),Qb.apply(this,arguments)}function Yx(n,e){const t=ze(n),r=t.Oc.get(e);if(r&&r.Sc)return Qt().add(r.key);{let o=Qt();const u=t.Nc.get(e);if(!u)return o;for(const h of u){const m=t.Cc.get(h);o=o.unionWith(m.view.yc)}return o}}function Qx(n,e){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,ye.Z)(function*(n,e){const t=ze(n),r=yield Ji(t.localStore,e.query,!0),o=e.view.vc(r);return t.isPrimaryClient&&Zb(t,e.targetId,o.Pc),o}),Jb.apply(this,arguments)}function Jx(n){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,ye.Z)(function*(n){const e=ze(n);return Sb(e.localStore).then(t=>_l(e,t))}),Xb.apply(this,arguments)}function Xx(n,e,t,r){return eT.apply(this,arguments)}function eT(){return eT=(0,ye.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(h,m){const w=ze(h),b=ze(w.gs);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>b.Ge(M,m).next(O=>O?w.Us.Es(M,O):ge.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Ja(o.remoteStore):"acknowledged"===t||"rejected"===t?(Wb(o,e,r||null),zb(o,e),m=e,ze(ze(o.localStore).gs).Qe(m)):st(),yield _l(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),eT.apply(this,arguments)}function tT(){return tT=(0,ye.Z)(function*(n,e){const t=ze(n);if(sT(t),oT(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kA(t,r.toArray());t.Lc=!0,yield x0(t.remoteStore,!0);for(const u of o)E0(t.remoteStore,u)}else if(!1===e&&!1!==t.Lc){const r=[];let o=Promise.resolve();t.Nc.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(zm(t,h),ph(t.localStore,h,!0))),Um(t.remoteStore,h)}),yield o,yield kA(t,r),function(u){const h=ze(u);h.Oc.forEach((m,w)=>{Um(h.remoteStore,w)}),h.Mc.ii(),h.Oc=new Map,h.kc=new ir(Ye.comparator)}(t),t.Lc=!1,yield x0(t.remoteStore,!1)}}),tT.apply(this,arguments)}function kA(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,ye.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const h of e){let m;const w=r.Nc.get(h);if(w&&0!==w.length){m=yield fh(r.localStore,zi(w[0]));for(const b of w){const M=r.Cc.get(b),O=yield Qx(r,M);O.snapshot&&u.push(O.snapshot)}}else{const b=yield JI(r.localStore,h);m=yield fh(r.localStore,b),yield Ot(r,FA(b),h,!1)}o.push(m)}return r.Dc.To(u),o}),nT.apply(this,arguments)}function FA(n){return il(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tM(n){const e=ze(n);return ze(ze(e.localStore).persistence).ds()}function nM(n,e,t,r){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n,e,t,r){const o=ze(n);if(o.Lc)ke("SyncEngine","Ignoring unexpected query state notification.");else if(o.Nc.has(e))switch(t){case"current":case"not-current":{const u=yield Sb(o.localStore),h=qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield _l(o,u,h);break}case"rejected":yield ph(o.localStore,e,!0),zm(o,e,r);break;default:st()}}),rT.apply(this,arguments)}function rM(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,ye.Z)(function*(n,e,t){const r=sT(n);if(r.Lc){for(const o of e){if(r.Nc.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield JI(r.localStore,o),h=yield fh(r.localStore,u);yield Ot(r,FA(u),h.targetId,!1),E0(r.remoteStore,h)}for(const o of t)r.Nc.has(o)&&(yield ph(r.localStore,o,!1).then(()=>{Um(r.remoteStore,o),zm(r,o)}).catch(hh))}}),iT.apply(this,arguments)}function sT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R0.bind(null,e),e.Dc.To=l.bind(null,e.eventManager),e.Dc.qc=p.bind(null,e.eventManager),e}function oT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zx.bind(null,e),e}class LA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.O=_p(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return ZI(this.persistence,new WI,e.initialUser,this.O)}jc(e){return new nC(Pm.bi,this.O)}Gc(e){return new Nb}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VA extends LA{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield function xb(n){return Om.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield oT(r.zc.syncEngine),yield Ja(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return ZI(this.persistence,new WI,e.initialUser,this.O)}Qc(e){return new Cb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=n0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new dp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yp(),Fm(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Nb}}class sM extends VA{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.zc.syncEngine;r.sharedClientState instanceof m0&&(r.sharedClientState.syncEngine={hr:Xx.bind(null,o),lr:nM.bind(null,o),dr:rM.bind(null,o),ds:tM.bind(null,o),ar:Jx.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var u=(0,ye.Z)(function*(h){yield function eM(n,e){return tT.apply(this,arguments)}(r.zc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}Gc(e){const t=yp();if(!m0.Vt(t))throw new Me(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=n0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new m0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class aT{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qm(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Kx.bind(null,r.syncEngine),yield x0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NA}createDatastore(e){const t=_p(e.databaseInfo.databaseId),r=new kb(e.databaseInfo);return new _0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qm(this.syncEngine,m,0),h=Pb.Vt()?new Pb:new SA,new v0(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,w,b){const M=new tt(r,o,u,h,m,w);return b&&(M.Lc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=ze(t);ke("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield ml(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function UA(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _C{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class oM{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),o=Number(r);isNaN(o)&&e.eu(`length string (${r}) is not valid number`);const u=yield e.nu(o);return new I(JSON.parse(u),t.length+o)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,ye.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class aM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,h){const m=ze(u),w=Kf(m.O)+"/documents",b={documents:h.map(G=>Zf(m.O,G))},M=yield m.Lr("BatchGetDocuments",w,b),O=new Map;M.forEach(G=>{const oe=function sb(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=na(t,r.found.name),u=Gr(r.found.updateTime),h=new di({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=na(t,r.missing),u=Gr(r.readTime);return Mn.newNoDocument(o,u)}(n,e):st()}(m.O,G);O.set(oe.key.toString(),oe)});const H=[];return h.forEach(G=>{const oe=O.get(G.toString());vt(!!oe),H.push(oe)}),H}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ye.fromPath(o);e.mutations.push(new Mv(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const h=ze(o),m=Kf(h.O)+"/documents",w={writes:u.map(b=>Za(h.O,b))};yield h.Mr("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Me(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.ru=5,this.ro=new Lm(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,ye.Z)(function*(){const t=new aM(e.datastore),r=e.cu(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.uu(u)}))}).catch(o=>{e.uu(o)})}))}cu(e){try{const t=this.updateFunction(e);return!tl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!nh(t)}return!1}}class cM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Tr.UNAUTHENTICATED,this.clientId=dv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ye.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ep(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function BA(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield KI(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),uT.apply(this,arguments)}function jA(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lT(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gC(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gC(e.remoteStore,u)),n.onlineComponents=e}),cT.apply(this,arguments)}function lT(n){return dT.apply(this,arguments)}function dT(){return dT=(0,ye.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield BA(n,new LA)),n.offlineComponents}),dT.apply(this,arguments)}function vC(n){return hT.apply(this,arguments)}function hT(){return hT=(0,ye.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield jA(n,new aT)),n.onlineComponents}),hT.apply(this,arguments)}function HA(n){return lT(n).then(e=>e.persistence)}function fT(n){return lT(n).then(e=>e.localStore)}function $A(n){return vC(n).then(e=>e.remoteStore)}function pT(n){return vC(n).then(e=>e.syncEngine)}function Wm(n){return gT.apply(this,arguments)}function gT(){return gT=(0,ye.Z)(function*(n){const e=yield vC(n),t=e.eventManager;return t.onListen=Te.bind(null,e.syncEngine),t.onUnlisten=Ds.bind(null,e.syncEngine),t}),gT.apply(this,arguments)}function GA(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,h,m,w){const b=new _C({next:O=>{u.enqueueAndForget(()=>a(o,M));const H=O.docs.has(h);!H&&O.fromCache?w.reject(new Me(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&O.fromCache&&m&&"server"===m.source?w.reject(new Me(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),M=new E(Kd(h.path),b,{includeMetadataChanges:!0,uc:!0});return i(o,M)}(yield Wm(n),n.asyncQueue,e,t,r)})),r.promise}function qA(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,h,m,w){const b=new _C({next:O=>{u.enqueueAndForget(()=>a(o,M)),O.fromCache&&"server"===m.source?w.reject(new Me(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),M=new E(h,b,{includeMetadataChanges:!0,uc:!0});return i(o,M)}(yield Wm(n),n.asyncQueue,e,t,r)})),r.promise}const zA=new Map;function mT(n,e,t){if(!t)throw new Me(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WA(n,e,t,r){if(!0===e&&!0===r)throw new Me(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZA(n){if(!Ye.isDocumentKey(n))throw new Me(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KA(n){if(Ye.isDocumentKey(n))throw new Me(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=EC(n);throw new Me(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YA(n,e){if(e<=0)throw new Me(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class QA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,WA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QA({}),this._settingsFrozen=!1,e instanceof el?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jD;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Ww(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zA.get(e);t&&(ke("ComponentProvider","Removing Datastore"),zA.delete(e),t.terminate())}(this),Promise.resolve()}}class Nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class Wu extends Xi{constructor(e,t,r){super(e,t,Kd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Ye(e))}withConverter(e){return new Wu(this.firestore,e,this._path)}}function JA(n,e,...t){if(n=(0,Mt.m9)(n),mT("collection","path",e),n instanceof N0){const r=qt.fromString(e,...t);return KA(r),new Wu(n,null,r)}{if(!(n instanceof Nn||n instanceof Wu))throw new Me(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return KA(r),new Wu(n.firestore,null,r)}}function wC(n,e,...t){if(n=(0,Mt.m9)(n),1===arguments.length&&(e=dv.R()),mT("doc","path",e),n instanceof N0){const r=qt.fromString(e,...t);return ZA(r),new Nn(n,null,new Ye(r))}{if(!(n instanceof Nn||n instanceof Wu))throw new Me(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return ZA(r),new Nn(n.firestore,n instanceof Wu?n.converter:null,new Ye(r))}}function XA(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),(n instanceof Nn||n instanceof Wu)&&(e instanceof Nn||e instanceof Wu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eS(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&Qd(n._query,e._query)&&n.converter===e.converter}class EM{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Lm(this,"async_queue_retry"),this.yu=()=>{const t=Fm();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Fm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Fm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Ar;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,ye.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!qu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,nr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const o=yC.createAndSchedule(this,e,t,r,u=>this.Tu(u));return this.du.push(o),o}pu(){this._u&&st()}verifyOperationInProgress(){}Au(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function yT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class wM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends N0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new EM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tS(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||tS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qw(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new cM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nS(n,e,t){const r=new Ar;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield BA(n,t),yield jA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function rS(n){if(n._initialized||n._terminated)throw new Me(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zu(pr.fromBase64String(e))}catch(t){throw new Me(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zu(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tp{constructor(e){this._methodName=e}}class IC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const RM=/^__.*__$/;class OM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ol(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}class iS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ol(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class CC{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=o,void 0===u&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new CC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.Nu(e),o}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.vu(),o}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return TC(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(sS(this.Vu)&&RM.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class NM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||_p(e)}Fu(e,t,r,o=!1){return new CC({Vu:e,methodName:t,$u:r,path:Hr.emptyPath(),Cu:!1,Mu:o},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Ap(n){const e=n._freezeSettings(),t=_p(n._databaseId);return new NM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DC(n,e,t,r,o,u={}){const h=n.Fu(u.merge||u.mergeFields?2:0,e,t,o);wT("Data must be an object, but it was:",h,r);const m=uS(r,h);let w,b;if(u.merge)w=new ct(h.fieldMask),b=h.fieldTransforms;else if(u.mergeFields){const M=[];for(const O of u.mergeFields){const H=IT(e,O,t);if(!h.contains(H))throw new Me(fe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);lS(M,H)||M.push(H)}w=new ct(M),b=h.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,b=h.fieldTransforms;return new OM(new di(m),w,b)}class P0 extends Tp{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof P0}}function oS(n,e,t){return new CC({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class _T extends Tp{_toFieldTransform(e){return new Bf(e.path,new Jd)}isEqual(e){return e instanceof _T}}class PM extends Tp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=oS(this,e,!0),r=this.Bu.map(u=>Sp(u,t)),o=new sl(r);return new Bf(e.path,o)}isEqual(e){return this===e}}class kM extends Tp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=oS(this,e,!0),r=this.Bu.map(u=>Sp(u,t)),o=new Bu(r);return new Bf(e.path,o)}isEqual(e){return this===e}}class FM extends Tp{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Xd(e.O,dI(e.O,this.Lu));return new Bf(e.path,t)}isEqual(e){return this===e}}function vT(n,e,t,r){const o=n.Fu(1,e,t);wT("Data must be an object, but it was:",o,r);const u=[],h=di.empty();Hd(r,(w,b)=>{const M=bC(e,w,t);b=(0,Mt.m9)(b);const O=o.xu(M);if(b instanceof P0)u.push(M);else{const H=Sp(b,O);null!=H&&(u.push(M),h.set(M,H))}});const m=new ct(u);return new iS(h,m,o.fieldTransforms)}function ET(n,e,t,r,o,u){const h=n.Fu(1,e,t),m=[IT(e,r,t)],w=[o];if(u.length%2!=0)throw new Me(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(IT(e,u[H])),w.push(u[H+1]);const b=[],M=di.empty();for(let H=m.length-1;H>=0;--H)if(!lS(b,m[H])){const G=m[H];let oe=w[H];oe=(0,Mt.m9)(oe);const Ve=h.xu(G);if(oe instanceof P0)b.push(G);else{const Ke=Sp(oe,Ve);null!=Ke&&(b.push(G),M.set(G,Ke))}}const O=new ct(b);return new iS(M,O,h.fieldTransforms)}function aS(n,e,t,r=!1){return Sp(t,n.Fu(r?4:3,e))}function Sp(n,e){if(cS(n=(0,Mt.m9)(n)))return wT("Unsupported field value:",e,n),uS(n,e);if(n instanceof Tp)return function(t,r){if(!sS(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=Sp(h,r.ku(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dI(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Sr.fromDate(t);return{timestampValue:Wf(r.O,o)}}if(t instanceof Sr){const o=new Sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wf(r.O,o)}}if(t instanceof IC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zu)return{bytesValue:ib(r.O,t._byteString)};if(t instanceof Nn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.Ou(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Em(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${EC(t)}`)}(n,e)}function uS(n,e){const t={};return om(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hd(n,(r,o)=>{const u=Sp(o,e.Du(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function cS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sr||n instanceof IC||n instanceof Zu||n instanceof Nn||n instanceof Tp)}function wT(n,e,t){if(!cS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=EC(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function IT(n,e,t){if((e=(0,Mt.m9)(e))instanceof vl)return e._internalPath;if("string"==typeof e)return bC(n,e);throw TC("Field path arguments must be of type string or ",n,!1,void 0,t)}const LM=new RegExp("[~\\*/\\[\\]]");function bC(n,e,t){if(e.search(LM)>=0)throw TC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vl(...e.split("."))._internalPath}catch(r){throw TC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function TC(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Me(fe.INVALID_ARGUMENT,m+n+w)}function lS(n,e){return n.some(t=>t.isEqual(e))}class k0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new VM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class VM extends k0{data(){return super.data()}}function AC(n,e){return"string"==typeof e?bC(n,e):e instanceof vl?e._internalPath:e._delegate._internalPath}class xp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class El extends k0{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new F0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class F0 extends El{data(e={}){return super.data(e)}}class mh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new F0(this._firestore,this._userDataWriter,r.key,r,new xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new F0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new xp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new F0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new xp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:UM(h.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function dS(n,e){return n instanceof El&&e instanceof El?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mh&&e instanceof mh&&n._firestore===e._firestore&&eS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hS(n){if(fm(n)&&0===n.explicitOrderBy.length)throw new Me(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L0{}function yh(n,...e){for(const t of e)n=t._apply(n);return n}class BM extends L0{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Ap(e.firestore),r=function(o,u,h,m,w,b,M){let O;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){_S(M,b);const G=[];for(const oe of M)G.push(yS(m,o,oe));O={arrayValue:{values:G}}}else O=yS(m,o,M)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||_S(M,b),O=aS(h,"where",M,"in"===b||"not-in"===b);const H=qi.create(w,b,O);return function(G,oe){if(oe.S()){const Ke=_v(G);if(null!==Ke&&!Ke.isEqual(oe.field))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ke.toString()}' and '${oe.field.toString()}'`);const dt=pm(G);null!==dt&&vS(0,oe.field,dt)}const Ve=function(Ke,dt){for(const jt of Ke.filters)if(dt.indexOf(jt.op)>=0)return jt.op;return null}(G,function(Ke){switch(Ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Ve)throw new Me(fe.INVALID_ARGUMENT,Ve===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Ve.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Xi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Wa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class HM extends L0{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Zd(o,u);return function(m,w){if(null===pm(m)){const b=_v(m);null!==b&&vS(0,b,w.field)}}(r,h),h}(e._query,this.Uu,this.Gu);return new Xi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Wa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fS extends L0{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Xi(e.firestore,e.converter,uI(e._query,this.ju,this.Qu))}}class pS extends L0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=mS(e,this.type,this.Wu,this.zu);return new Xi(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class gS extends L0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=mS(e,this.type,this.Wu,this.zu);return new Xi(e.firestore,e.converter,(o=t,new Wa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function mS(n,e,t,r){if(t[0]=(0,Mt.m9)(t[0]),t[0]instanceof k0)return function(o,u,h,m,w){if(!m)throw new Me(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const b=[];for(const M of Yd(o))if(M.field.isKeyField())b.push(rl(u,m.key));else{const O=m.data.field(M.field);if($d(O))throw new Me(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const H=M.field.canonicalString();throw new Me(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(O)}return new Wd(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ap(n.firestore);return function(u,h,m,w,b,M){const O=u.explicitOrderBy;if(b.length>O.length)throw new Me(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let G=0;G<b.length;G++){const oe=b[G];if(O[G].field.isKeyField()){if("string"!=typeof oe)throw new Me(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!gm(u)&&-1!==oe.indexOf("/"))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const Ve=u.path.child(qt.fromString(oe));if(!Ye.isDocumentKey(Ve))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Ke=new Ye(Ve);H.push(rl(h,Ke))}else{const Ve=aS(m,w,oe);H.push(Ve)}}return new Wd(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function yS(n,e,t){if("string"==typeof(t=(0,Mt.m9)(t))){if(""===t)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gm(e)&&-1!==t.indexOf("/"))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!Ye.isDocumentKey(r))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rl(n,new Ye(r))}if(t instanceof Nn)return rl(n,t._key);throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${EC(t)}.`)}function _S(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vS(n,e,t){if(!t.isEqual(e))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class CT{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Hd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new IC(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xn(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(um(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);vt(Cm(r));const o=new el(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return o.isEqual(t)||nr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function SC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YM extends CT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class ES{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ap(e)}set(e,t,r){this._verifyNotCommitted();const o=_h(e,this._firestore),u=SC(o.converter,t,r),h=DC(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Hn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,Mt.m9)(t))||t instanceof vl?ET(this._dataReader,"WriteBatch.update",u._key,t,r,o):vT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new _m(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,Mt.m9)(n)).firestore!==e)throw new Me(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Mp extends CT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function wS(n,e,t){n=zt(n,Nn);const r=zt(n.firestore,$n),o=SC(n.converter,e,t);return Zm(r,[DC(Ap(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Hn.none())])}function IS(n,e,t,...r){n=zt(n,Nn);const o=zt(n.firestore,$n),u=Ap(o);let h;return h="string"==typeof(e=(0,Mt.m9)(e))||e instanceof vl?ET(u,"updateDoc",n._key,e,t,r):vT(u,"updateDoc",n._key,e),Zm(o,[h.toMutation(n._key,Hn.exists(!0))])}function CS(n,...e){var t,r,o;n=(0,Mt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||yT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(yT(e[h])){const O=e[h];e[h]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[h+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[h+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let w,b,M;if(n instanceof Nn)b=zt(n.firestore,$n),M=Kd(n._key.path),w={next:O=>{e[h]&&e[h](DT(b,n,O))},error:e[h+1],complete:e[h+2]};else{const O=zt(n,Xi);b=zt(O.firestore,$n),M=O._query;const H=new Mp(b);w={next:G=>{e[h]&&e[h](new mh(b,H,O,G))},error:e[h+1],complete:e[h+2]},hS(n._query)}return function(O,H,G,oe){const Ve=new _C(oe),Ke=new E(H,Ve,G);return O.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return i(yield Wm(O),Ke)})),()=>{Ve.Jc(),O.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return a(yield Wm(O),Ke)}))}}(Or(b),M,m,w)}function Zm(n,e){return function(t,r){const o=new Ar;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function M0(n,e,t){return Ip.apply(this,arguments)}(yield pT(t),r,o)})),o.promise}(Or(n),e)}function DT(n,e,t){const r=t.docs.get(e._key),o=new Mp(n);return new El(n,o,e._key,r,new xp(t.hasPendingWrites,t.fromCache),e.converter)}class oR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ap(e)}get(e){const t=_h(e,this._firestore),r=new YM(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new k0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new k0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=_h(e,this._firestore),u=SC(o.converter,t,r),h=DC(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,Mt.m9)(t))||t instanceof vl?ET(this._dataReader,"Transaction.update",u._key,t,r,o):vT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new Mp(this._firestore);return super.get(e).then(o=>new El(this._firestore,r,t._key,o._document,new xp(!1,!1),t.converter))}}function bT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bS(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function TS(){if(!function GD(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){jd=Su.SDK_VERSION,(0,Su._registerComponent)(new by.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new $n(o,new qw(t.getProvider("auth-internal")),new Zw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Su.registerVersion)(av,"3.4.5",n),(0,Su.registerVersion)(av,"3.4.5","esm2017")}();class V0{constructor(e){this._delegate=e}static fromBase64String(e){return TS(),new V0(Zu.fromBase64String(e))}static fromUint8Array(e){return bS(),new V0(Zu.fromUint8Array(e))}toBase64(){return TS(),this._delegate.toBase64()}toUint8Array(){return bS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TT(n){return function gR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mR{enableIndexedDbPersistence(e,t){return function CM(n,e){rS(n=zt(n,$n));const t=Or(n),r=n._freezeSettings(),o=new aT;return nS(t,o,new VA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function DM(n){rS(n=zt(n,$n));const e=Or(n),t=n._freezeSettings(),r=new aT;return nS(e,r,new sM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bM(n){if(n._initialized&&!n._terminated)throw new Me(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Ws.Vt())return Promise.resolve();const o=r+"main";yield Ws.delete(o)}),function(r){return t.apply(this,arguments)})(n0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof el||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _M(n,e,t,r={}){var o;const u=(n=zt(n,N0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Nf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Tr.MOCK_USER;else{h=(0,Mt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Tr(w)}n._authCredentials=new HD(new Gw(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function AM(n){return function lM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield HA(n),t=yield $A(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.Ko.delete(0),gl(o)}(t)}))}(Or(n=zt(n,$n)))}(this._delegate)}disableNetwork(){return function SM(n){return function dM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield HA(n),t=yield $A(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=ze(o);u.Ko.add(0),yield ml(u),u.Qo.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=zt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function TM(n){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Wx(n,e){return qb.apply(this,arguments)}(yield pT(e),t)})),t.promise}(Or(n=zt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function sR(n,e){return function pM(n,e){const t=new _C(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Wm(n),o=t,ze(r).Zo.add(o),void o.next();var r,o})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Wm(n),o=t,void ze(r).Zo.delete(o);var r,o}))}}(Or(n=zt(n,$n)),yT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,JA(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,wC(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function vM(n,e){if(n=zt(n,N0),mT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new Wa(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aR(n,e){return function gM(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,vC(o).then(u=>u.datastore));var o;new uM(n.asyncQueue,r,e,t).run()})),t.promise}(Or(n=zt(n,$n)),t=>e(new oR(n,t)))}(this._delegate,t=>e(new SS(this,t)))}batch(){return Or(this._delegate),new xS(new ES(this._delegate,e=>Zm(this._delegate,e)))}loadBundle(e){return function xM(n,e){const t=Or(n=zt(n,$n)),r=new wM;return function mM(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return UA(w,b);if(w instanceof ArrayBuffer)return UA(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new oM(w,h);var w}(t,_p(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function iM(n,e,t){const r=ze(n);var o;(o=(0,ye.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(H,G){const oe=ze(H),Ve=Gr(G.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Ke=>oe.Kn.getBundleMetadata(Ke,G.id)).then(Ke=>!!Ke&&Ke.createTime.compareTo(Ve)>=0)}(u.localStore,w))return yield h.close(),void m._completeWith((H=w,{taskState:"Success",documentsLoaded:H.totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}));m._updateProgress(k(w));const b=new S(w,u.localStore,h.O);let M=yield h.Kc();for(;M;){const H=yield b.lc(M);H&&m._updateProgress(H),M=yield h.Kc()}const O=yield b.complete();yield _l(u,O.ws,void 0),yield function(H,G){const oe=ze(H);return oe.persistence.runTransaction("Save bundle","readwrite",Ve=>oe.Kn.saveBundleMetadata(Ve,G))}(u.localStore,w),m._completeWith(O.progress)}catch(w){Nf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w)}var H}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield pT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function MM(n,e){return function yM(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Kn.getNamedQuery(u,r))}(yield fT(n),e)}))}(Or(n=zt(n,$n)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class xC extends CT{constructor(e){super(),this.firestore=e}convertBytes(e){return new V0(new Zu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class SS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xC(e)}get(e){const t=Op(e);return this._delegate.get(t).then(r=>new U0(this._firestore,new El(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Op(e);return r?(bT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}}class xS{constructor(e){this._delegate=e}set(e,t,r){const o=Op(e);return r?(bT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new F0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new B0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Rp(e,new xC(e),t),o.set(t,u)),u}}Rp.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new Nn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new ra(t,new Nn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,JA(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Nn&&XA(this._delegate,e)}set(e,t){t=bT("DocumentReference.set",t);try{return t?wS(this._delegate,e,t):wS(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IS(this._delegate,e):IS(this._delegate,e,t,...r)}catch(o){throw bs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function rR(n){return Zm(zt(n.firestore,$n),[new _m(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=MS(e),r=RS(e,o=>new U0(this.firestore,new El(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return CS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function JM(n){n=zt(n,Nn);const e=zt(n.firestore,$n),t=Or(e),r=new Mp(e);return function hM(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,h){try{const m=yield function(w,b){const M=ze(w);return M.persistence.runTransaction("read document","readonly",O=>M.Us.ys(O,b))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Me(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ep(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield fT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new El(e,r,n._key,o,new xp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function XM(n){n=zt(n,Nn);const e=zt(n.firestore,$n);return GA(Or(e),n._key,{source:"server"}).then(t=>DT(e,n,t))}(this._delegate):function QM(n){n=zt(n,Nn);const e=zt(n.firestore,$n);return GA(Or(e),n._key).then(t=>DT(e,n,t))}(this._delegate),t.then(r=>new U0(this.firestore,new El(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function MS(n){for(const e of n)if("object"==typeof e&&!TT(e))return e;return{}}function RS(n,e){var t,r;let o;return o=TT(n[0])?n[0]:TT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class U0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dS(this._delegate,e._delegate)}}class B0 extends U0{data(e){const t=this._delegate.data(e);return function BD(n,e){n||st()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xC(e)}where(e,t,r){try{return new Ts(this.firestore,yh(this._delegate,function jM(n,e,t){const r=e,o=AC("where",n);return new BM(o,r,t)}(e,t,r)))}catch(o){throw bs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,yh(this._delegate,function $M(n,e="asc"){const t=e,r=AC("orderBy",n);return new HM(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,yh(this._delegate,function GM(n){return YA("limit",n),new fS("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,yh(this._delegate,function qM(n){return YA("limitToLast",n),new fS("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,yh(this._delegate,function zM(...n){return new pS("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,yh(this._delegate,function WM(...n){return new pS("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,yh(this._delegate,function ZM(...n){return new gS("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,yh(this._delegate,function KM(...n){return new gS("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return eS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tR(n){n=zt(n,Xi);const e=zt(n.firestore,$n),t=Or(e),r=new Mp(e);return function fM(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,h){try{const m=yield Ji(o,u,!0),w=new ve(u,m.Ks),b=w.Ic(m.documents),M=w.applyChanges(b,!1);h.resolve(M.snapshot)}catch(m){const w=Ep(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield fT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new mh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function nR(n){n=zt(n,Xi);const e=zt(n.firestore,$n),t=Or(e),r=new Mp(e);return qA(t,n._query,{source:"server"}).then(o=>new mh(e,r,n,o))}(this._delegate):function eR(n){n=zt(n,Xi);const e=zt(n.firestore,$n),t=Or(e),r=new Mp(e);return hS(n._query),qA(t,n._query).then(o=>new mh(e,r,n,o))}(this._delegate),t.then(r=>new AT(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MS(e),r=RS(e,o=>new AT(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return CS(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}class _R{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new B0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new B0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _R(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new B0(this._firestore,r))})}isEqual(e){return dS(this._delegate,e._delegate)}}class Km extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?wC(this._delegate):wC(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function iR(n,e){const t=zt(n.firestore,$n),r=wC(n),o=SC(n.converter,e);return Zm(t,[DC(Ap(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return XA(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}function Op(n){return zt(n,Nn)}class ST{constructor(...e){this._delegate=new vl(...e)}static documentId(){return new ST(Hr.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.m9)(e))instanceof vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Np{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cR(){return new _T("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Np(e)}static delete(){const e=function uR(){return new P0("deleteField")}();return e._methodName="FieldValue.delete",new Np(e)}static arrayUnion(...e){const t=function lR(...n){return new PM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Np(t)}static arrayRemove(...e){const t=function dR(...n){return new kM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Np(t)}static increment(e){const t=function hR(n){return new FM("increment",n)}(e);return t._methodName="FieldValue.increment",new Np(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vR={Firestore:AS,GeoPoint:IC,Timestamp:Sr,Blob:V0,Transaction:SS,WriteBatch:xS,DocumentReference:ra,DocumentSnapshot:U0,Query:Ts,QueryDocumentSnapshot:B0,QuerySnapshot:AT,CollectionReference:Km,FieldPath:ST,FieldValue:Np,setLogLevel:function yR(n){!function UD(n){Lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function OS(n,e){return function IR(n,e=BE.z){return new on.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function xT(n,e){return OS(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function MC(n,e){return xT(n,e).pipe(Id(void 0),i_(),(0,ft.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(M=>M.doc.ref.isEqual(h.ref)),b=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function NS(n,e,t){return MC(n,t).pipe(Ou((r,o)=>function DR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return MT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return MT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function s_(n,e=ho.y){return n=null!=n?n:CD,(0,wr.e)((t,r)=>{let o,u=!0;t.subscribe((0,At.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function MT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function PS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function wR(n){(function ER(n,e){n.INTERNAL.registerComponent(new by.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},vR)))})(n,(e,t)=>new AS(e,t,new mR)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(o_.Z);class kS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Id(void 0),i_(),ti(([r,o])=>o.length>0||!r),(0,ft.U)(([r,o])=>o),hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PS(e);return NS(this.query,t,this.afs.schedulers.outsideAngular).pipe(hr.iC)}valueChanges(e={}){return xT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hr.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(hr.iC)}add(e){return this.ref.add(e)}doc(e){return new FS(this.ref.doc(e),this.afs)}}class FS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=LS(r,t);return new kS(o,u,this.afs)}snapshotChanges(){return function CR(n,e){return OS(n,e).pipe(Id(void 0),i_(),(0,ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(hr.iC)}}class TR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MC(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ti(t=>t.length>0),hr.iC):MC(this.query,this.afs.schedulers.outsideAngular).pipe(hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PS(e);return NS(this.query,t,this.afs.schedulers.outsideAngular).pipe(hr.iC)}valueChanges(e={}){return xT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),hr.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(hr.iC)}}const AR=new f.OlP("angularfire2.enableFirestorePersistence"),SR=new f.OlP("angularfire2.firestore.persistenceSettings"),xR=new f.OlP("angularfire2.firestore.settings"),MR=new f.OlP("angularfire2.firestore.use-emulator");function LS(n,e=(t=>t)){return{query:e(n),ref:n}}let RT=(()=>{class n{constructor(t,r,o,u,h,m,w,b,M,O,H,G,oe,Ve,Ke,dt,jt){this.schedulers=w;const un=(0,ai.on)(t,m,r),xt=M;O&&Og(un,m,H,oe,Ve,Ke,G,dt),[this.firestore,this.persistenceEnabled$]=(0,ai.cc)(`${un.name}.firestore`,"AngularFirestore",un.name,()=>{const Pn=m.runOutsideAngular(()=>un.firestore());if(u&&Pn.settings(u),xt&&Pn.useEmulator(...xt),o&&!ur(h)){const eu=()=>{try{return(0,en.D)(Pn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(WC){return"undefined"!=typeof console&&console.warn(WC),Je(!1)}};return[Pn,m.runOutsideAngular(eu)]}return[Pn,Je(!1)]},[u,xt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=LS(o,r),m=this.schedulers.ngZone.run(()=>u);return new kS(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new TR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new FS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ai.Dh),f.LFG(ai.xv,8),f.LFG(AR,8),f.LFG(xR,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(hr.HU),f.LFG(SR,8),f.LFG(MR,8),f.LFG(Ng,8),f.LFG(VE,8),f.LFG(e_,8),f.LFG(t_,8),f.LFG(n_,8),f.LFG(UE,8),f.LFG(po,8),f.LFG(Jy,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),RR=0;const VS={label:"Who are u?",items:[],isCompleted:0};let RC=(()=>{class n{constructor(t){this.afs=t,this.subj=new go(VS)}create(...t){const r=this.subj.value;return this.subj.next(Object.assign(Object.assign({},r),{items:[...r.items,...t.filter(o=>""!==o).map(o=>({label:o,isDone:!1,id:RR++,linkForFile:""}))]})),document.getElementById("labelInput").value="",this}delete(...t){const r=this.subj.value;return this.subj.next(Object.assign(Object.assign({},r),{items:r.items.filter(o=>-1===t.indexOf(o))})),this}update(t,...r){if(""!==t.label){const o=this.subj.value;this.subj.next(Object.assign(Object.assign({},o),{items:o.items.map(u=>r.indexOf(u)>=0?Object.assign(Object.assign({},u),t):u)}))}else this.delete(...r);return this}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(RT))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var OR=P(9672);function US(n,e,t){n?(0,OR.f)(t,n,e):e()}function BS(n){return new on.y(e=>{(0,Bs.Xf)(n()).subscribe(e)})}var Ym=P(515),jS=P(727);function HS(){return(0,wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,At.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kR extends on.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,At.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jS.w0.EMPTY)}return e}refCount(){return HS()(this)}}function vh(n){return(0,wr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,At.x)(t,void 0,void 0,h=>{u=(0,Bs.Xf)(n(h,vh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function OT(n){return n<=0?()=>Ym.E:(0,wr.e)((e,t)=>{let r=[];e.subscribe((0,At.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var Eo=P(8505);class wl{constructor(e,t){this.id=e,this.url=t}}class NT extends wl{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class j0 extends wl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $S extends wl{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VR extends wl{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UR extends wl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BR extends wl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jR extends wl{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HR extends wl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $R extends wl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class GR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zR{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WR{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class ZR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qm(n){return new ZR(n)}const WS="ngNavigationCancelingError";function PT(n){const e=Error("NavigationCancelingError: "+n);return e[WS]=!0,e}function YR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ku(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ZS(n[o],e[o]))return!1;return!0}function ZS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function KS(n){return Array.prototype.concat.apply([],n)}function YS(n){return n.length>0?n[n.length-1]:null}function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Yu(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,en.D)(Promise.resolve(n)):Je(n)}const XR={exact:function XS(n,e,t){if(!kp(n.segments,e.segments)||!OC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!XS(n.children[r],e.children[r],t))return!1;return!0},subset:ex},QS={exact:function eO(n,e){return Ku(n,e)},subset:function tO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZS(n[t],e[t]))},ignored:()=>!0};function JS(n,e,t){return XR[t.paths](n.root,e.root,t.matrixParams)&&QS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ex(n,e,t){return tx(n,e,e.segments,t)}function tx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!kp(o,t)||e.hasChildren()||!OC(o,t,r))}if(n.segments.length===t.length){if(!kp(n.segments,t)||!OC(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ex(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(kp(n.segments,o)&&OC(n.segments,o,r)&&n.children[Ft])&&tx(n.children[Ft],e,u,r)}}function OC(n,e,t){return e.every((r,o)=>QS[t](n[o].parameters,r.parameters))}class Pp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qm(this.queryParams)),this._queryParamMap}toString(){return iO.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ai(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return NC(this)}}class H0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qm(this.parameters)),this._parameterMap}toString(){return ox(this)}}function kp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class nx{}class rx{parse(e){const t=new fO(e);return new Pp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$0(e.root,!0)}`,r=function aO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${PC(t)}=${PC(o)}`).join("&"):`${PC(t)}=${PC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function sO(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const iO=new rx;function NC(n){return n.segments.map(e=>ox(e)).join("/")}function $0(n,e){if(!n.hasChildren())return NC(n);if(e){const t=n.children[Ft]?$0(n.children[Ft],!1):"",r=[];return Ai(n.children,(o,u)=>{u!==Ft&&r.push(`${u}:${$0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function rO(n,e){let t=[];return Ai(n.children,(r,o)=>{o===Ft&&(t=t.concat(e(r,o)))}),Ai(n.children,(r,o)=>{o!==Ft&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ft?[$0(n.children[Ft],!1)]:[`${o}:${$0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${NC(n)}/${t[0]}`:`${NC(n)}/(${t.join("//")})`}}function ix(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function PC(n){return ix(n).replace(/%3B/gi,";")}function kT(n){return ix(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kC(n){return decodeURIComponent(n)}function sx(n){return kC(n.replace(/\+/g,"%20"))}function ox(n){return`${kT(n.path)}${function oO(n){return Object.keys(n).map(e=>`;${kT(e)}=${kT(n[e])}`).join("")}(n.parameters)}`}const uO=/^[^\/()?;=#]+/;function FC(n){const e=n.match(uO);return e?e[0]:""}const cO=/^[^=?&#]+/,dO=/^[^&#]+/;class fO{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Bt(e,t)),r}parseSegment(){const e=FC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new H0(kC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=FC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=FC(this.remaining);o&&(r=o,this.capture(r))}e[kC(t)]=kC(r)}parseQueryParam(e){const t=function lO(n){const e=n.match(cO);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function hO(n){const e=n.match(dO);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=sx(t),u=sx(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=FC(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ft);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Ft]:new Bt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ax{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=FT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=FT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=LT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return LT(e,this._root).map(t=>t.value)}}function FT(n,e){if(n===e.value)return e;for(const t of e.children){const r=FT(n,t);if(r)return r}return null}function LT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=LT(n,t);if(r.length)return r.unshift(e),r}return[]}class Il{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Jm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ux extends ax{constructor(e,t){super(e),this.snapshot=t,VT(this,e)}toString(){return this.snapshot.toString()}}function cx(n,e){const t=function pO(n,e){const h=new LC([],{},{},"",{},Ft,e,null,n.root,-1,{});return new dx("",new Il(h,[]))}(n,e),r=new go([new H0("",{})]),o=new go({}),u=new go({}),h=new go({}),m=new go(""),w=new Xm(r,o,h,m,u,Ft,e,t.root);return w.snapshot=t.root,new ux(new Il(w,[]),t)}class Xm{constructor(e,t,r,o,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>Qm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>Qm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function gO(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class LC{constructor(e,t,r,o,u,h,m,w,b,M,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=M,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dx extends ax{constructor(e,t){super(t),this.url=e,VT(this,t)}toString(){return hx(this._root)}}function VT(n,e){e.value._routerState=n,e.children.forEach(t=>VT(n,t))}function hx(n){const e=n.children.length>0?` { ${n.children.map(hx).join(", ")} } `:"";return`${n.value}${e}`}function UT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ku(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ku(e.params,t.params)||n.params.next(t.params),function QR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ku(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ku(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function BT(n,e){const t=Ku(n.params,e.params)&&function nO(n,e){return kp(n,e)&&n.every((t,r)=>Ku(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||BT(n.parent,e.parent))}function G0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function yO(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return G0(n,r,o);return G0(n,r)})}(n,e,t);return new Il(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>G0(n,m)),h}}const r=function _O(n){return new Xm(new go(n.url),new go(n.params),new go(n.queryParams),new go(n.fragment),new go(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>G0(n,u));return new Il(r,o)}}function VC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function q0(n){return"object"==typeof n&&null!=n&&n.outlets}function jT(n,e,t,r,o){let u={};return r&&Ai(r,(h,m)=>{u[m]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new Pp(t.root===n?e:fx(t.root,n,e),u,o)}function fx(n,e,t){const r={};return Ai(n.children,(o,u)=>{r[u]=o===e?t:fx(o,e,t)}),new Bt(n.segments,r)}class px{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&VC(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(q0);if(o&&o!==YS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class HT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gx(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return UC(n,e,t);const r=function DO(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(q0(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!yx(w,b,h))return u;r+=2}else{if(!yx(w,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Ft]=new Bt(n.segments.slice(r.pathIndex),n.children),UC(u,0,o)}return r.match&&0===o.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?$T(n,e,t):r.match?UC(n,0,o):$T(n,e,t)}function UC(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function CO(n){return q0(n[0])?n[0].outlets:{[Ft]:n}}(t),o={};return Ai(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=gx(n.children[h],e,u))}),Ai(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new Bt(n.segments,o)}}function $T(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(q0(u)){const w=bO(u.outlets);return new Bt(r,w)}if(0===o&&VC(t[0])){r.push(new H0(n.segments[e].path,mx(t[0]))),o++;continue}const h=q0(u)?u.outlets[Ft]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&VC(m)?(r.push(new H0(h,mx(m))),o+=2):(r.push(new H0(h,{})),o++)}return new Bt(r,{})}function bO(n){const e={};return Ai(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=$T(new Bt([],{}),0,t))}),e}function mx(n){const e={};return Ai(n,(t,r)=>e[r]=`${t}`),e}function yx(n,e,t){return n==t.path&&Ku(e,t.parameters)}class AO{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),UT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Jm(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Ai(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Jm(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Jm(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Jm(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new WR(u.value.snapshot))}),e.children.length&&this.forwardEvent(new qR(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(UT(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),UT(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function SO(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class GT{constructor(e,t){this.routes=e,this.module=t}}function Eh(n){return"function"==typeof n}function Fp(n){return n instanceof Pp}const z0=Symbol("INITIAL_VALUE");function W0(){return wi(n=>function NR(...n){const e=(0,pu.yG)(n),t=(0,pu.jO)(n),{args:r,keys:o}=ii(n);if(0===r.length)return(0,en.D)([],e);const u=new on.y(function PR(n,e,t=ho.y){return r=>{US(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)US(e,()=>{const b=(0,en.D)(n[w],e);let M=!1;b.subscribe((0,At.x)(r,O=>{u[w]=O,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>uo(o,h):ho.y));return t?u.pipe(_c(t)):u}(n.map(e=>e.pipe((0,yy.q)(1),Id(z0)))).pipe(Ou((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==z0?o:(u===z0&&(r=!0),r||!1!==u&&h!==t.length-1&&!Fp(u)?o:u),e)},z0),ti(e=>e!==z0),(0,ft.U)(e=>Fp(e)?e:!0===e),(0,yy.q)(1)))}class PO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Z0,this.attachRef=null}}class Z0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new PO,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let qT=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new kO(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Z0),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class kO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xm?this.route:e===Z0?this.childContexts:this.parent.get(e,t)}}let _x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[qT],encapsulation:2}),n})();function vx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];FO(r,LO(e,r))}}function FO(n,e){n.children&&vx(n.children,e)}function LO(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zT(n){const e=n.children&&n.children.map(zT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=_x),t}function ia(n){return n.outlet||Ft}function Ex(n,e){const t=n.filter(r=>ia(r)===e);return t.push(...n.filter(r=>ia(r)!==e)),t}const wx={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function BC(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},wx):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||YR)(t,n,e);if(!u)return Object.assign({},wx);const h={};Ai(u.posParams,(w,b)=>{h[b]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function jC(n,e,t,r,o="corrected"){if(t.length>0&&function BO(n,e,t){return t.some(r=>HC(n,e,r)&&ia(r)!==Ft)}(n,t,r)){const h=new Bt(e,function UO(n,e,t,r){const o={};o[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ia(u)!==Ft){const h=new Bt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[ia(u)]=h}return o}(n,e,r,new Bt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function jO(n,e,t){return t.some(r=>HC(n,e,r))}(n,t,r)){const h=new Bt(n.segments,function VO(n,e,t,r,o,u){const h={};for(const m of r)if(HC(n,t,m)&&!o[ia(m)]){const w=new Bt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[ia(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function HC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ix(n,e,t,r){return!!(ia(n)===r||r!==Ft&&HC(e,t,n))&&("**"===n.path||BC(e,n,t).matched)}function Cx(n,e,t){return 0===e.length&&!n.children[t]}class K0{constructor(e){this.segmentGroup=e||null}}class Dx{constructor(e){this.urlTree=e}}function $C(n){return new on.y(e=>e.error(new K0(n)))}function bx(n){return new on.y(e=>e.error(new Dx(n)))}function HO(n){return new on.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class qO{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=jC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe((0,ft.U)(u=>this.createUrlTree(WT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vh(u=>{if(u instanceof Dx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof K0?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe((0,ft.U)(o=>this.createUrlTree(WT(o),e.queryParams,e.fragment))).pipe(vh(o=>{throw o instanceof K0?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Bt([],{[Ft]:e}):e;return new Pp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,en.D)(o).pipe(ei(u=>{const h=r.children[u],m=Ex(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,ft.U)(w=>({segment:w,outlet:u})))}),Ou((u,h)=>(u[h.outlet]=h.segment,u),{}),function FR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((o,u)=>n(o,u,r)):ho.y,OT(1),t?dE(e):_y(()=>new yd))}())}expandSegment(e,t,r,o,u,h){return(0,en.D)(r).pipe(ei(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(vh(b=>{if(b instanceof K0)return Je(null);throw b}))),Au(m=>!!m),vh((m,w)=>{if(m instanceof yd||"EmptyError"===m.name){if(Cx(t,o,u))return Je(new Bt([],{}));throw new K0(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return Ix(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):$C(t):$C(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bx(u):this.lineralizeSegments(r,u).pipe((0,Vn.z)(h=>{const m=new Bt(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:w,lastChild:b,positionalParamSegments:M}=BC(t,o,u);if(!m)return $C(t);const O=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?bx(O):this.lineralizeSegments(o,O).pipe((0,Vn.z)(H=>this.expandSegment(e,t,r,H.concat(u.slice(b)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Je(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ft.U)(H=>(r._loadedConfig=H,new Bt(o,{})))):Je(new Bt(o,{}));const{matched:h,consumedSegments:m,lastChild:w}=BC(t,r,o);if(!h)return $C(t);const b=o.slice(w);return this.getChildConfig(e,r,o).pipe((0,Vn.z)(O=>{const H=O.module,G=O.routes,{segmentGroup:oe,slicedSegments:Ve}=jC(t,m,b,G),Ke=new Bt(oe.segments,oe.children);if(0===Ve.length&&Ke.hasChildren())return this.expandChildren(H,G,Ke).pipe((0,ft.U)(xt=>new Bt(m,xt)));if(0===G.length&&0===Ve.length)return Je(new Bt(m,{}));const dt=ia(r)===u;return this.expandSegment(H,Ke,G,Ve,dt?Ft:u,!0).pipe((0,ft.U)(un=>new Bt(m.concat(un.segments),un.children)))}))}getChildConfig(e,t,r){return t.children?Je(new GT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Je(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Vn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,ft.U)(u=>(t._loadedConfig=u,u))):function $O(n){return new on.y(e=>e.error(PT(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Je(new GT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return Je(!0);const u=o.map(h=>{const m=e.get(h);let w;if(function MO(n){return n&&Eh(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Eh(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return Yu(w)});return Je(u).pipe(W0(),(0,Eo.b)(h=>{if(!Fp(h))return;const m=PT(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,ft.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[Ft])return HO(e.redirectTo);o=o.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Pp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ai(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Ai(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new Bt(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function WT(n){const e={};for(const r of Object.keys(n.children)){const u=WT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zO(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}class Tx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class GC{constructor(e,t){this.component=e,this.route=t}}function ZO(n,e,t){const r=n._root;return Y0(r,e?e._root:null,t,[r.value])}function qC(n,e,t){const r=function YO(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Y0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Jm(e);return n.children.forEach(h=>{(function QO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function JO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kp(n.url,e.url)||!Ku(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BT(n,e)||!Ku(n.queryParams,e.queryParams);default:return!BT(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Tx(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Y0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new GC(m.outlet.component,h))}else h&&Q0(e,m,o),o.canActivateChecks.push(new Tx(r)),Y0(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Ai(u,(h,m)=>Q0(h,t.getContext(m),o)),o}function Q0(n,e,t){const r=Jm(n),o=n.value;Ai(r,(u,h)=>{Q0(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new GC(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class aN{}function Ax(n){return new on.y(e=>e.error(n))}class cN{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=jC(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const r=new LC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Il(r,t),u=new dx(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=lx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=Ex(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const o=Sx(r);return function lN(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return Cx(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Ix(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const G=r.length>0?YS(r).parameters:{};u=new LC(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rx(e),ia(e),e.component,e,xx(t),Mx(t)+r.length,Ox(e))}else{const G=BC(t,e,r);if(!G.matched)return null;h=G.consumedSegments,m=r.slice(G.lastChild),u=new LC(h,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rx(e),ia(e),e.component,e,xx(t),Mx(t)+h.length,Ox(e))}const w=function dN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:M}=jC(t,h,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===M.length&&b.hasChildren()){const G=this.processChildren(w,b);return null===G?null:[new Il(u,G)]}if(0===w.length&&0===M.length)return[new Il(u,[])];const O=ia(e)===o,H=this.processSegment(w,b,M,O?Ft:o);return null===H?null:[new Il(u,H)]}}function hN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Sx(n){const e=[],t=new Set;for(const r of n){if(!hN(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Sx(r.children);e.push(new Il(r.value,o))}return e.filter(r=>!t.has(r))}function xx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Rx(n){return n.data||{}}function Ox(n){return n.resolve||{}}function Nx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ZT(n){return wi(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,ft.U)(()=>e)):Je(e)})}class EN extends class vN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const KT=new f.OlP("ROUTES");class Px{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,ft.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new GT(KS(h.injector.get(KT,void 0,f.XFs.Self|f.XFs.Optional)).map(zT),h)}),vh(u=>{throw t._loader$=void 0,u}));return t._loader$=new kR(o,()=>new Zo.x).pipe(HS()),t._loader$}loadModuleFactory(e){return Yu(e()).pipe((0,Vn.z)(t=>t instanceof f.YKP?Je(t):(0,en.D)(this.compiler.compileModuleAsync(t))))}}class IN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function CN(n){throw n}function DN(n,e,t){return e.parse("/")}function kx(n,e){return Je(null)}const bN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wo=(()=>{class n{constructor(t,r,o,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Zo.x,this.errorHandler=CN,this.malformedUriErrorHandler=DN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kx,afterPreactivation:kx},this.urlHandlingStrategy=new IN,this.routeReuseStrategy=new EN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(f.h0i),this.console=h.get(f.c2e);const O=h.get(f.R0b);this.isNgZoneEnabled=O instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function JR(){return new Pp(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Px(h,m,H=>this.triggerEvent(new GS(H)),H=>this.triggerEvent(new qS(H))),this.routerState=cx(this.currentUrlTree,this.rootComponentType),this.transitions=new go({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ti(o=>0!==o.id),(0,ft.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),wi(o=>{let u=!1,h=!1;return Je(o).pipe((0,Eo.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wi(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return zC(m.source)&&(this.browserUrlTree=m.extractedUrl),Je(m).pipe(wi(O=>{const H=this.transitions.getValue();return r.next(new NT(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),H!==this.transitions.getValue()?Ym.E:Promise.resolve(O)}),function WO(n,e,t,r){return wi(o=>function GO(n,e,t,r,o){return new qO(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ft.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Eo.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function fN(n,e,t,r,o){return(0,Vn.z)(u=>function uN(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new cN(n,e,t,r,o,u).recognize();return null===h?Ax(new aN):Je(h)}catch(h){return Ax(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,ft.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Eo.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(G,O)}this.browserUrlTree=O.urlAfterRedirects}const H=new UR(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(H)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:G,source:oe,restoredState:Ve,extras:Ke}=m,dt=new NT(H,this.serializeUrl(G),oe,Ve);r.next(dt);const jt=cx(G,this.rootComponentType).snapshot;return Je(Object.assign(Object.assign({},m),{targetSnapshot:jt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ym.E}),ZT(m=>{const{targetSnapshot:w,id:b,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!H,replaceUrl:!!G})}),(0,Eo.b)(m=>{const w=new BR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,ft.U)(m=>Object.assign(Object.assign({},m),{guards:ZO(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function XO(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?Je(Object.assign(Object.assign({},t),{guardsResult:!0})):function eN(n,e,t,r){return(0,en.D)(n).pipe((0,Vn.z)(o=>function oN(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(m=>{const w=qC(m,e,o);let b;if(function NO(n){return n&&Eh(n.canDeactivate)}(w))b=Yu(w.canDeactivate(n,e,t,r));else{if(!Eh(w))throw new Error("Invalid CanDeactivate guard");b=Yu(w(n,e,t,r))}return b.pipe(Au())})).pipe(W0()):Je(!0)}(o.component,o.route,t,e,r)),Au(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Vn.z)(m=>m&&function xO(n){return"boolean"==typeof n}(m)?function tN(n,e,t,r){return(0,en.D)(e).pipe(ei(o=>r_(function rN(n,e){return null!==n&&e&&e(new GR(n)),Je(!0)}(o.route.parent,r),function nN(n,e){return null!==n&&e&&e(new zR(n)),Je(!0)}(o.route,r),function sN(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function KO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>BS(()=>Je(h.guards.map(w=>{const b=qC(w,h.node,t);let M;if(function OO(n){return n&&Eh(n.canActivateChild)}(b))M=Yu(b.canActivateChild(r,n));else{if(!Eh(b))throw new Error("Invalid CanActivateChild guard");M=Yu(b(r,n))}return M.pipe(Au())})).pipe(W0())));return Je(u).pipe(W0())}(n,o.path,t),function iN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(u=>BS(()=>{const h=qC(u,e,t);let m;if(function RO(n){return n&&Eh(n.canActivate)}(h))m=Yu(h.canActivate(e,n));else{if(!Eh(h))throw new Error("Invalid CanActivate guard");m=Yu(h(e,n))}return m.pipe(Au())}));return Je(o).pipe(W0())}(n,o.route,t))),Au(o=>!0!==o,!0))}(r,u,n,e):Je(m)),(0,ft.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Eo.b)(m=>{if(Fp(m.guardsResult)){const b=PT(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const w=new jR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),ti(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ZT(m=>{if(m.guards.canActivateChecks.length)return Je(m).pipe((0,Eo.b)(w=>{const b=new HR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),wi(w=>{let b=!1;return Je(w).pipe(function pN(n,e){return(0,Vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let u=0;return(0,en.D)(o).pipe(ei(h=>function gN(n,e,t,r){return function mN(n,e,t,r){const o=Nx(n);if(0===o.length)return Je({});const u={};return(0,en.D)(o).pipe((0,Vn.z)(h=>function yN(n,e,t,r){const o=qC(n,e,r);return Yu(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Eo.b)(m=>{u[h]=m}))),OT(1),(0,Vn.z)(()=>Nx(u).length===o.length?Je(u):Ym.E))}(n._resolve,n,e,r).pipe((0,ft.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),lx(n,t).resolve),null)))}(h.route,r,n,e)),(0,Eo.b)(()=>u++),OT(1),(0,Vn.z)(h=>u===o.length?Je(t):Ym.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Eo.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Eo.b)(w=>{const b=new $R(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),ZT(m=>{const{targetSnapshot:w,id:b,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!H,replaceUrl:!!G})}),(0,ft.U)(m=>{const w=function mO(n,e,t){const r=G0(n,e._root,t?t._root:void 0);return new ux(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Eo.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new AO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Eo.b)({next(){u=!0},complete(){u=!0}}),function LR(n){return(0,wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),vh(m=>{if(h=!0,function KR(n){return n&&n[WS]}(m)){const w=Fp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const b=new $S(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(b),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zC(o.source)};this.scheduleNavigation(M,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new VR(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Ym.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){vx(t),this.config=t.map(zT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,M=w?this.currentUrlTree.fragment:h;let O=null;switch(m){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function vO(n,e,t,r,o){if(0===t.length)return jT(e.root,e.root,e,r,o);const u=function EO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new px(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ai(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new px(t,e,r)}(t);if(u.toRoot())return jT(e.root,new Bt([],{}),e,r,o);const h=function wO(n,e,t){if(n.isAbsolute)return new HT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new HT(u,u===e.root,0)}const r=VC(n.commands[0])?0:1;return function IO(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new HT(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?UC(h.segmentGroup,h.index,u.commands):gx(h.segmentGroup,h.index,u.commands);return jT(h.segmentGroup,m,e,r,o)}(b,this.currentUrlTree,t,O,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Fp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function AN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},bN):!1===r?Object.assign({},TN):r,Fp(t))return JS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return JS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new j0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,w,b;if(this.disposed)return Promise.resolve(!1);const M=this.transitions.value,O=zC(r)&&M&&!zC(M.source),H=M.rawUrl.toString()===t.toString(),G=M.id===(null===(m=this.currentNavigation)||void 0===m?void 0:m.id);if(O&&H&&G)return Promise.resolve(!0);let Ve,Ke,dt;h?(Ve=h.resolve,Ke=h.reject,dt=h.promise):dt=new Promise((xt,Pn)=>{Ve=xt,Ke=Pn});const jt=++this.navigationId;let un;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),un=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(w=this.browserPageId)&&void 0!==w?w:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):un=0,this.setTransition({id:jt,targetPageId:un,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Ve,reject:Ke,promise:dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dt.catch(xt=>Promise.reject(xt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new $S(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function zC(n){return"imperative"!==n}class Fx{}class Lx{preload(e,t){return Je(null)}}let Vx=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Px(o,r,w=>t.triggerEvent(new GS(w)),w=>t.triggerEvent(new qS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(ti(t=>t instanceof j0),ei(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,en.D)(o).pipe((0,Pg.J)(),(0,ft.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Je(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Vn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(wo),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Fx))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),JT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof NT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof j0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new zS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Lp=new f.OlP("ROUTER_CONFIGURATION"),Ux=new f.OlP("ROUTER_FORROOT_GUARD"),RN=[xe,{provide:nx,useClass:rx},{provide:wo,useFactory:function FN(n,e,t,r,o,u,h={},m,w){const b=new wo(null,n,e,t,r,o,KS(u));return m&&(b.urlHandlingStrategy=m),w&&(b.routeReuseStrategy=w),function LN(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,b),h.enableTracing&&b.events.subscribe(M=>{var O,H;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),b},deps:[nx,Z0,xe,f.zs3,f.Sil,KT,Lp,[class wN{},new f.FiY],[class _N{},new f.FiY]]},Z0,{provide:Xm,useFactory:function VN(n){return n.routerState.root},deps:[wo]},Vx,Lx,class MN{preload(e,t){return t().pipe(vh(()=>Je(null)))}},{provide:Lp,useValue:{enableTracing:!1}}];function ON(){return new f.PXZ("Router",wo)}let Bx=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[RN,jx(t),{provide:Ux,useFactory:kN,deps:[[wo,new f.FiY,new f.tp0]]},{provide:Lp,useValue:r||{}},{provide:z,useFactory:PN,deps:[ce,[new f.tBr(Re),new f.FiY],Lp]},{provide:JT,useFactory:NN,deps:[wo,au,Lp]},{provide:Fx,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Lx},{provide:f.PXZ,multi:!0,useFactory:ON},[XT,{provide:f.ip1,multi:!0,useFactory:UN,deps:[XT]},{provide:Hx,useFactory:BN,deps:[XT]},{provide:f.tb,multi:!0,useExisting:Hx}]]}}static forChild(t){return{ngModule:n,providers:[jx(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ux,8),f.LFG(wo,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function NN(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new JT(n,e,t)}function PN(n,e,t={}){return t.useHash?new X(n,e):new be(n,e)}function kN(n){return"guarded"}function jx(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:KT,multi:!0,useValue:n}]}let XT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Zo.x}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(wo),h=this.injector.get(Lp);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Lp),o=this.injector.get(Vx),u=this.injector.get(JT),h=this.injector.get(wo),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function UN(n){return n.appInitializer.bind(n)}function BN(n){return n.bootstrapListener.bind(n)}const Hx=new f.OlP("Router Initializer");let HN=(()=>{class n{constructor(t,r){this.auth=t,this.service=r,this.title="l3m-tpX-todolist-angular-y2022"}ngOnInit(){}update(t,...r){this.service.update(t,...r)}delete(...t){this.service.delete(...t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ng),f.Y36(RC))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"WELCOME TO TODOLIST"),f.qZA(),f._UZ(2,"router-outlet"))},directives:[qT],styles:[""]}),n})();const $x_firebase={apiKey:"AIzaSyDzodoYmYMYfZXinR_LDSBIxOtdg6-cFvk",authDomain:"l3-todolist.firebaseapp.com",projectId:"l3-todolist",storageBucket:"l3-todolist.appspot.com",messagingSenderId:"303318412574",appId:"1:303318412574:web:72f08f3647580b83612d0f"};function $N(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"button",1),f.NdJ("click",function(){return f.CHM(t),f.oxw().startVoiceRecognition()}),f._uU(2,"Record"),f.qZA(),f.qZA()}}function GN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"p"),f.TgZ(2,"button",2),f.NdJ("click",function(){return f.CHM(t),f.oxw().closeVoiceRecognition()}),f._uU(3,"Close"),f.qZA(),f.TgZ(4,"button",2),f.NdJ("click",function(){return f.CHM(t),f.oxw().startVoiceRecognition()}),f._uU(5,"Restart"),f.qZA(),f._uU(6," Listening "),f.qZA(),f.qZA()}}function qN(n,e){1&n&&(f.TgZ(0,"div"),f.TgZ(1,"p"),f._uU(2,"Error ,reuse it"),f.qZA(),f.qZA())}let zN=(()=>{class n{constructor(t){this.ngZone=t,this.voiceActiveSectionDisabled=!0,this.voiceActiveSectionError=!1,this.voiceActiveSectionSuccess=!1,this.voiceActiveSectionListening=!1,this.interupt=!1,this.speech=new f.vpe}ngOnInit(){}initializeVoiceRecognitionCallback(){annyang.addCallback("error",t=>{"network"===t.error?(this.voiceText="Internet is require",annyang.abort(),this.ngZone.run(()=>this.voiceActiveSectionSuccess=!0),console.log(t)):void 0===this.voiceText&&(this.ngZone.run(()=>this.voiceActiveSectionError=!0),annyang.abort(),console.log(t))}),annyang.addCallback("soundstart",()=>{console.log("start"),this.voiceActiveSectionListening=!0,this.ngZone.run(()=>this.voiceActiveSectionListening=!0)}),annyang.addCallback("end",()=>{void 0===this.voiceText&&(console.log("end"),this.ngZone.run(()=>this.voiceActiveSectionError=!0),annyang.abort(),this.voiceActiveSectionError=!0)}),annyang.addCallback("result",t=>{console.log("USER SAID",t),console.log("user is stop saying"),this.ngZone.run(()=>this.voiceActiveSectionError=!1);let r=t[0];annyang.abort(),this.voiceText=r,this.sendSpeech(),this.forInterruptCheck(),this.ngZone.run(()=>this.voiceActiveSectionListening=!1),this.ngZone.run(()=>this.voiceActiveSectionSuccess=!0),this.voiceActiveSectionDisabled=!0})}startVoiceRecognition(){this.voiceActiveSectionDisabled=!1,this.voiceActiveSectionError=!1,this.voiceActiveSectionSuccess=!1,this.voiceText=void 0,annyang&&(annyang.addCommands({"demo-annyang":()=>{}}),this.initializeVoiceRecognitionCallback(),annyang.start({autoRestart:!1}),this.voiceActiveSectionListening=!0,this.forInterruptCheck())}closeVoiceRecognition(){this.voiceActiveSectionDisabled=!0,this.voiceActiveSectionError=!1,this.voiceActiveSectionSuccess=!1,this.voiceActiveSectionListening=!1,this.voiceText=void 0,annyang&&annyang.abort()}sendSpeech(){this.speech.emit(this.voiceText)}forInterruptCheck(){this.interupt&&(this.voiceActiveSectionDisabled=!0,this.voiceActiveSectionError=!1,this.voiceActiveSectionSuccess=!1,this.voiceActiveSectionListening=!1,this.voiceText=void 0)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-voice-rec"]],inputs:{interupt:"interupt"},outputs:{speech:"speech"},decls:3,vars:3,consts:[[4,"ngIf"],["type","button",3,"click"],[3,"click"]],template:function(t,r){1&t&&(f.YNc(0,$N,3,0,"div",0),f.YNc(1,GN,7,0,"div",0),f.YNc(2,qN,3,0,"div",0)),2&t&&(f.Q6J("ngIf",r.voiceActiveSectionDisabled),f.xp6(1),f.Q6J("ngIf",r.voiceActiveSectionListening),f.xp6(1),f.Q6J("ngIf",r.voiceActiveSectionError))},directives:[qn],styles:["p[_ngcontent-%COMP%]{font-size:.6em}"]}),n})();function WN(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"img",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("src",t.image,f.LSH)}}function ZN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"input",10),f.NdJ("change",function(o){return f.CHM(t),f.oxw().onChange(o)}),f.qZA(),f.TgZ(2,"app-voice-rec",11),f.NdJ("speech",function(o){return f.CHM(t),f.oxw().changeLabel(o)}),f.qZA(),f.qZA()}if(2&n){const t=f.oxw();f.xp6(2),f.Q6J("interupt",t.break)}}function KN(n,e){if(1&n&&(f.TgZ(0,"div"),f.TgZ(1,"a",12),f._uU(2,"Download file"),f.qZA(),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("href",t.todoitem.linkForFile,f.LSH)}}let YN=(()=>{class n{constructor(t){this.download=t,this.break=!1,this.update=new f.vpe,this.remove=new f.vpe,this._isEditing=!1,this.baseApiUrl="https://file.io"}ngOnInit(){}delete(){this.break=!0,this.remove.emit(this.todoitem)}update_this(){this.todoitem.isDone=!this.todoitem.isDone,this.update.emit(this.todoitem)}get isEditing(){return this._isEditing}set isEditing(t){this._isEditing=t}changeLabel(t){this.todoitem.label=t,this.update.emit(this.todoitem),this.isEditing=!1}upload(t){const r=new FormData;return t&&r.append("file",t,t.name),this.download.httpClient.post(this.baseApiUrl,r)}onChange(t){var r=this;if(this.file=t.target.files[0],this.file&&null!=this.file.type.match(/image\/*/)){const o=new FileReader;o.readAsDataURL(this.file),console.log(o),o.onload=function(){var u=(0,ye.Z)(function*(h){r.image=o.result,yield r.addDoc().then(m=>{r.todoitem.linkForFile=m,r.update.emit(r.todoitem)},m=>console.log(m))});return function(h){return u.apply(this,arguments)}}()}}addDoc(){var t=this;return(0,ye.Z)(function*(){return new Promise((r,o)=>{t.upload(t.file).subscribe(u=>{"object"==typeof u?(t.shortLink=u.link,r(t.shortLink)):o("got a error")})})})()}downloadFile(){this.shortLink&&this.download.downloadFILE(this.shortLink).subscribe(t=>{console.log(t);let r=document.createElement("a");this.shortLink&&(r.href=this.shortLink),r.download="download",r.click()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ma))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-todo-item"]],inputs:{todoitem:"todoitem"},outputs:{update:"update",remove:"remove"},decls:13,vars:8,consts:[[1,"view"],["type","checkbox","name","done",1,"toggle",3,"ngModel","change"],[1,"texte",3,"dblclick"],[4,"ngIf"],["type","button",1,"destroy",3,"click"],[3,"ngSubmit"],["forma","ngForm"],["name","newTextInput",1,"edit",3,"ngModel","blur"],["newTextInput",""],[3,"src"],["type","file",1,"",3,"change"],[3,"interupt","speech"],["target","_blank","rel","noopener noreferrer","download","download",3,"href"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"input",1),f.NdJ("change",function(){return r.update_this()}),f.qZA(),f.TgZ(2,"label",2),f.NdJ("dblclick",function(){return r.isEditing=!0}),f.TgZ(3,"div"),f._uU(4),f.qZA(),f.YNc(5,WN,2,1,"div",3),f.qZA(),f.TgZ(6,"button",4),f.NdJ("click",function(){return r.delete()}),f.qZA(),f.YNc(7,ZN,3,1,"div",3),f.YNc(8,KN,3,1,"div",3),f.qZA(),f.TgZ(9,"form",5,6),f.NdJ("ngSubmit",function(){f.CHM(o);const h=f.MAs(12);return r.changeLabel(h.value)}),f.TgZ(11,"input",7,8),f.NdJ("blur",function(){f.CHM(o);const h=f.MAs(12);return r.changeLabel(h.value)}),f.qZA(),f.qZA()}2&t&&(f.xp6(1),f.Q6J("ngModel",r.todoitem.isDone),f.xp6(2),f.ekj("completed",!0===r.todoitem.isDone),f.xp6(1),f.hij("",r.todoitem.label," "),f.xp6(1),f.Q6J("ngIf",null!=r.image),f.xp6(2),f.Q6J("ngIf",0==r.todoitem.isDone),f.xp6(1),f.Q6J("ngIf",r.todoitem.linkForFile||void 0),f.xp6(3),f.Q6J("ngModel",r.todoitem.label))},directives:[ki,Lh,Wh,qn,zN,lg,Iu,Ac,Fi],styles:[".completed[_ngcontent-%COMP%]{color:#d9d9d9;text-decoration:line-through}img[_ngcontent-%COMP%]{width:270px;height:200px}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{background-color:#f44336;color:#fff;padding:7px 14px;text-align:center;text-decoration:none;display:inline-block;font-size:.5em}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{background-color:red}.hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),n})();function QN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li"),f.TgZ(1,"app-todo-item",13,14),f.NdJ("remove",function(o){return f.CHM(t),f.oxw(2).delete(o)})("update",function(o){return f.CHM(t),f.oxw(2).updating(o)}),f.qZA(),f.qZA()}if(2&n){const t=e.$implicit,r=f.MAs(2);f.ekj("editing",r.isEditing),f.xp6(1),f.Q6J("todoitem",t)}}function JN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",15),f.TgZ(1,"footer",16),f.TgZ(2,"span",17),f._UZ(3,"strong"),f._uU(4),f.qZA(),f.TgZ(5,"ul",18),f.TgZ(6,"li"),f.TgZ(7,"a",19),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).change("all")}),f._uU(8,"Tous"),f.qZA(),f.qZA(),f.TgZ(9,"li"),f.TgZ(10,"a",20),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).change("actives")}),f._uU(11,"Actifs"),f.qZA(),f.qZA(),f.TgZ(12,"li"),f.TgZ(13,"a",21),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).change("pass")}),f._uU(14,"Compl\xe9t\xe9s"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(15,"button",22),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return o.delete_all(o.todoList.items)}),f._uU(16,"Supprimer coch\xe9es"),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=f.oxw(2);f.xp6(4),f.hij("",t.todoList.isCompleted," have to complete")}}function XN(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"section",2),f.TgZ(1,"header",3),f.TgZ(2,"h1"),f._uU(3),f.qZA(),f.TgZ(4,"form",4),f.NdJ("submit",function(){f.CHM(t);const o=f.MAs(6);return f.oxw().service.create(o.value)}),f._UZ(5,"input",5,6),f.qZA(),f.qZA(),f.TgZ(7,"section",7),f._UZ(8,"input",8),f.TgZ(9,"label",9),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return o.updateAll(o.todoList)}),f._uU(10,"Mark all as complete"),f.qZA(),f.TgZ(11,"ul",10),f.YNc(12,QN,3,3,"li",11),f.qZA(),f.qZA(),f.YNc(13,JN,17,1,"div",12),f.qZA()}if(2&n){const t=e.ngIf,r=f.oxw();f.xp6(3),f.Oqu(t.label),f.xp6(6),f.ekj("taggle-all",r.todoList.isCompleted===r.todoList.items.length),f.xp6(3),f.Q6J("ngForOf",r.toChange(r.todoList.items,r.filter)),f.xp6(1),f.Q6J("ngIf",r.todoList.items.length>0)}}function eP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"button",22),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return o.saveList(o.todoList)}),f._uU(2,"SaveList"),f.qZA(),f.TgZ(3,"button",22),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return o.downloadServ.dowloadList(o.todoList)}),f._uU(4,"DownloadList"),f.qZA(),f.qZA()}}let eA=(()=>{class n{constructor(t,r,o){this.service=t,this.afs=r,this.downloadServ=o,this.filter="all",this.taggle=!1,this.todoListObs=new on.y,this.todoListObs=this.service.subj.asObservable()}ngOnInit(){this.todoListObs.subscribe(t=>{this.todoList=t,this.todoList.isCompleted=0,this.verify(this.todoList)})}updating(t,...r){this.service.update(t,...r)}verify(t){t.items.forEach(r=>{0==r.isDone&&t.isCompleted++})}delete(...t){this.service.delete(...t)}change(t){switch(t){case"all":this.filter="all";break;case"actives":this.filter="actives";break;case"pass":this.filter="pass"}}toChange(t,r){return"pass"===r||"actives"===r?t.filter(o=>o.isDone==("pass"===r)):t}delete_all(t){this.service.delete(...t.filter(r=>1==r.isDone))}updateAll(t){t.items.forEach(r=>{this.updating({isDone:!this.taggle},r)}),this.taggle=!this.taggle}saveList(t){this.afs.doc("users/"+this.nameProfil).set(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(RC),f.Y36(RT),f.Y36(Ma))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-todo-list"]],inputs:{nameProfil:"nameProfil"},decls:3,vars:4,consts:[["class","todoapp",4,"ngIf"],[4,"ngIf"],[1,"todoapp"],[1,"header"],[3,"submit"],["name","newTodoInput","placeholder","Que faire?","id","labelInput","autofocus","",1,"new-todo"],["lab",""],[1,"main"],["type","checkbox","name","toggleAll",1,"toggle-all"],["for","toggleAll",3,"click"],[1,"todo-list"],[3,"editing",4,"ngFor","ngForOf"],["class","underFooter",4,"ngIf"],[3,"todoitem","remove","update"],["todo",""],[1,"underFooter"],[1,"footer"],[1,"todo-count"],[1,"filters"],[1,"filterAll",3,"click"],[1,"filterActives",3,"click"],[1,"filterCompleted",3,"click"],[1,"clear-completed",3,"click"]],template:function(t,r){1&t&&(f.YNc(0,XN,14,5,"section",0),f.ALo(1,"async"),f.YNc(2,eP,5,0,"div",1)),2&t&&(f.Q6J("ngIf",f.lcZ(1,2,r.todoListObs)),f.xp6(2),f.Q6J("ngIf","Who are u?"!==r.todoList.label))},directives:[qn,lg,Iu,Ac,bn,YN],pipes:[su],styles:[""],changeDetection:0}),n})();function tP(n,e){if(1&n&&(f.TgZ(0,"div"),f.TgZ(1,"h1"),f._uU(2),f.qZA(),f._UZ(3,"img",4),f.qZA()),2&n){const t=e.ngIf,r=f.oxw();f.xp6(2),f.hij("Hello ",t.displayName,"!"),f.xp6(1),f.Q6J("src",r.photoUrl,f.LSH)}}function nP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"p"),f._uU(1,"Please login."),f.qZA(),f.TgZ(2,"button",5),f.NdJ("click",function(){return f.CHM(t),f.oxw().login()}),f._uU(3,"Login with Google"),f.qZA()}}function rP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"button",6),f.NdJ("click",function(){return f.CHM(t),f.oxw().logout()}),f._uU(2,"Logout"),f.qZA(),f.qZA()}}const iP=[{path:"",component:(()=>{class n{constructor(t,r,o){this.afs=t,this.auth=r,this.list=o}ngOnInit(){this.auth.signOut()}login(){var t=this;this.auth.signInWithPopup(new FE.Z.auth.GoogleAuthProvider).then(()=>{var r;this.currentUser=FE.Z.auth().currentUser,null===(r=this.currentUser)||void 0===r||r.providerData.forEach(function(){var o=(0,ye.Z)(function*(u){t.photoUrl=null==u?void 0:u.photoURL,t.nameUser=null==u?void 0:u.displayName,t.setCollection()});return function(u){return o.apply(this,arguments)}}())}).catch(r=>{console.log("Got error ,No user has been found :",r)})}setCollection(){this.afs.doc("users/"+this.nameUser).valueChanges().subscribe(t=>{this.list.subj.next(t&&this.nameUser?t:VS)}),this.afs.doc("users/"+this.nameUser).ref.get().then(t=>{t.exists||this.createCollection({label:"L3 MIAGE",items:[],isCompleted:0})})}createCollection(t){var r=this;return(0,ye.Z)(function*(){if(r.nameUser)return r.afs.collection("users").doc(""+r.nameUser).set(t)})()}logout(){this.auth.signOut(),this.nameUser=void 0,this.photoUrl=void 0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(RT),f.Y36(Ng),f.Y36(RC))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-authentication"]],viewQuery:function(t,r){if(1&t&&f.Gf(eA,5),2&t){let o;f.iGM(o=f.CRH())&&(r.child=o.first)}},decls:6,vars:6,consts:[[4,"ngIf","ngIfElse"],["showLogin",""],[3,"nameProfil"],[4,"ngIf"],[3,"src"],[3,"click"],[1,"clear-completed",3,"click"]],template:function(t,r){if(1&t&&(f.YNc(0,tP,4,2,"div",0),f.ALo(1,"async"),f.YNc(2,nP,4,0,"ng-template",null,1,f.W1O),f._UZ(4,"app-todo-list",2),f.YNc(5,rP,3,0,"div",3)),2&t){const o=f.MAs(3);f.Q6J("ngIf",f.lcZ(1,4,r.auth.user))("ngIfElse",o),f.xp6(4),f.Q6J("nameProfil",r.nameUser),f.xp6(1),f.Q6J("ngIf",null!=r.nameUser)}},directives:[qn,eA],pipes:[su],styles:[""]}),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},{path:"todo-list",component:eA}];let sP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Os,Bx.forRoot(iP)],Bx]}),n})(),oP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[HN]}),n.\u0275inj=f.cJS({providers:[RC,{provide:e_,useValue:{appVerificationDisabledForTesting:!0}},Ma,xl],imports:[[ai.hO.initializeApp($x_firebase),ic,my,sP,mc]]}),n})();(0,f.G48)(),Bl().bootstrapModule(oP).catch(n=>console.error(n))},5867:(it,Ae,P)=>{"use strict";P.d(Ae,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=P(9681);(0,f.registerVersion)("firebase","9.6.8","app")},127:(it,Ae,P)=>{"use strict";P.d(Ae,{Z:()=>f.Z});var f=P(3942);f.Z.registerVersion("firebase","9.6.8","app-compat")},3059:(it,Ae,P)=>{"use strict";P.r(Ae);var f=P(5861),Q=P(3942),N=P(2090),de=P(9681),ee=P(655),pe=P(1877),re=P(4859);const Oe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},z=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new pe.Yd("@firebase/auth");function be(y,...d){Re.logLevel<=pe.in.ERROR&&Re.error(`Auth (${de.SDK_VERSION}): ${y}`,...d)}function X(y,...d){throw $e(y,...d)}function xe(y,...d){return $e(y,...d)}function we(y,d,g){const v=Object.assign(Object.assign({},Be()),{[d]:g});return new N.LL("auth","Firebase",v).create(d,{appName:y.name})}function qe(y,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&X(y,"argument-error"),we(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...d){if("string"!=typeof y){const g=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return z.create(y,...d)}function ie(y,d,...g){if(!y)throw $e(d,...g)}function Z(y){const d="INTERNAL ASSERTION FAILED: "+y;throw be(d),new Error(d)}function ne(y,d){y||Z(d)}const me=new Map;function se(y){ne(y instanceof Function,"Expected a class definition");let d=me.get(y);return d?(ne(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,me.set(y,d),d)}function yt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Lt(){return"http:"===Yn()||"https:"===Yn()}function Yn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class cn{constructor(d,g){this.shortDelay=d,this.longDelay=g,ne(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function nt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vt(y,d){ne(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class Qn{static initialize(d,g,v){this.fetchImpl=d,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qr=new cn(3e4,6e4);function Ht(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function St(y,d,g,v){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(y,d,g,v,A={}){return zr(y,A,(0,f.Z)(function*(){let R={},q={};v&&("GET"===d?q=v:R={body:JSON.stringify(v)});const ue=(0,N.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),je=yield y._getAdditionalHeaders();return je["Content-Type"]="application/json",y.languageCode&&(je["X-Firebase-Locale"]=y.languageCode),Qn.fetch()(As(y,y.config.apiHost,g,ue),Object.assign({method:d,headers:je,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function zr(y,d,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y,d,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Jt),d);try{const A=new Wr(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw xi(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ue=R.ok?q.errorMessage:q.error.message,[je,Xe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw xi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===je)throw xi(y,"email-already-in-use",q);const mt=v[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw we(y,mt,Xe);X(y,mt)}}catch(A){if(A instanceof N.ZR)throw A;X(y,"network-request-failed")}})).apply(this,arguments)}function mr(y,d,g,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,f.Z)(function*(y,d,g,v,A={}){const R=yield St(y,d,g,v,A);return"mfaPendingCredential"in R&&X(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function As(y,d,g,v){const A=`${d}${g}?${v}`;return y.config.emulator?Vt(y.config,A):`${y.config.apiScheme}://${A}`}class Wr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(xe(this.auth,"network-request-failed")),qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xi(y,d,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=xe(y,d,v);return A.customData._tokenResponse=g,A}function Zr(){return(Zr=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function ln(y,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ks(y,d){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Gn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Ys(){return(Ys=(0,f.Z)(function*(y,d=!1){const g=(0,N.m9)(y),v=yield g.getIdToken(d),A=rt(v);ie(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:A,token:v,authTime:Gn(kt(A.auth_time)),issuedAtTime:Gn(kt(A.iat)),expirationTime:Gn(kt(A.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function kt(y){return 1e3*Number(y)}function rt(y){const[d,g,v]=y.split(".");if(void 0===d||void 0===g||void 0===v)return be("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,N.tV)(g);return A?JSON.parse(A):(be("Failed to decode base64 JWT payload"),null)}catch(A){return be("Caught error parsing JWT payload as JSON",A),null}}function sr(y,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(y,d,g=!1){if(g)return d;try{return yield d}catch(v){throw v instanceof N.ZR&&bt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ts{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var d=this;return(0,f.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&d.schedule(!0))}d.schedule()})()}}class or{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gn(this.lastLoginAt),this.creationTime=Gn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(y){return L.apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(y){var d;const g=y.auth,v=yield y.getIdToken(),A=yield sr(y,Ks(g,{idToken:v}));ie(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const q=(null===(d=R.providerUserInfo)||void 0===d?void 0:d.length)?J(R.providerUserInfo):[],ue=Ee(y.providerData,q),mt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ue?void 0:ue.length)),at={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ue,metadata:new or(R.createdAt,R.lastLoginAt),isAnonymous:mt};Object.assign(y,at)})).apply(this,arguments)}function $(){return($=(0,f.Z)(function*(y){const d=(0,N.m9)(y);yield yr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ee(y,d){return[...y.filter(v=>!d.some(A=>A.providerId===v.providerId)),...d]}function J(y){return y.map(d=>{var{providerId:g}=d,v=(0,ee._T)(d,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Ie(){return(Ie=(0,f.Z)(function*(y,d){const g=yield zr(y,{},(0,f.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,q=As(y,A,"/v1/token",`key=${R}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Qn.fetch()(q,{method:"POST",headers:ue,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class _e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ie(d.idToken,"internal-error"),ie(void 0!==d.idToken,"internal-error"),ie(void 0!==d.refreshToken,"internal-error");const g="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function ht(y){const d=rt(y);return ie(d,"internal-error"),ie(void 0!==d.exp,"internal-error"),ie(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var v=this;return(0,f.Z)(function*(){return ie(!v.accessToken||v.refreshToken,d,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var v=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:q}=yield function We(y,d){return Ie.apply(this,arguments)}(d,g);v.updateTokensAndExpiration(A,R,Number(q))})()}updateTokensAndExpiration(d,g,v){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,g){const{refreshToken:v,accessToken:A,expirationTime:R}=g,q=new _e;return v&&(ie("string"==typeof v,"internal-error",{appName:d}),q.refreshToken=v),A&&(ie("string"==typeof A,"internal-error",{appName:d}),q.accessToken=A),R&&(ie("number"==typeof R,"internal-error",{appName:d}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new _e,this.toJSON())}_performRefresh(){return Z("not implemented")}}function Ue(y,d){ie("string"==typeof y||void 0===y,"internal-error",{appName:d})}class Qe{constructor(d){var{uid:g,auth:v,stsTokenManager:A}=d,R=(0,ee._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ts(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new or(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,f.Z)(function*(){const v=yield sr(g,g.stsTokenManager.getToken(g.auth,d));return ie(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(d){return function pi(y){return Ys.apply(this,arguments)}(this,d)}reload(){return function j(y){return $.apply(this,arguments)}(this)}_assign(d){this!==d&&(ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Qe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var v=this;return(0,f.Z)(function*(){let A=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),A=!0),g&&(yield yr(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,f.Z)(function*(){const g=yield d.getIdToken();return yield sr(d,function pt(y,d){return Zr.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var v,A,R,q,ue,je,Xe,mt;const at=null!==(v=g.displayName)&&void 0!==v?v:void 0,_n=null!==(A=g.email)&&void 0!==A?A:void 0,Ei=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,pd=null!==(q=g.photoURL)&&void 0!==q?q:void 0,tf=null!==(ue=g.tenantId)&&void 0!==ue?ue:void 0,gd=null!==(je=g._redirectEventId)&&void 0!==je?je:void 0,nf=null!==(Xe=g.createdAt)&&void 0!==Xe?Xe:void 0,my=null!==(mt=g.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Va,emailVerified:rf,isAnonymous:wg,providerData:Ig,stsTokenManager:ai}=g;ie(Va&&ai,d,"internal-error");const Zo=_e.fromJSON(this.name,ai);ie("string"==typeof Va,d,"internal-error"),Ue(at,d.name),Ue(_n,d.name),ie("boolean"==typeof rf,d,"internal-error"),ie("boolean"==typeof wg,d,"internal-error"),Ue(Ei,d.name),Ue(pd,d.name),Ue(tf,d.name),Ue(gd,d.name),Ue(nf,d.name),Ue(my,d.name);const sf=new Qe({uid:Va,auth:d,email:_n,emailVerified:rf,displayName:at,isAnonymous:wg,photoURL:pd,phoneNumber:Ei,tenantId:tf,stsTokenManager:Zo,createdAt:nf,lastLoginAt:my});return Ig&&Array.isArray(Ig)&&(sf.providerData=Ig.map(md=>Object.assign({},md))),gd&&(sf._redirectEventId=gd),sf}static _fromIdTokenResponse(d,g,v=!1){return(0,f.Z)(function*(){const A=new _e;A.updateFromServerResponse(g);const R=new Qe({uid:g.localId,auth:d,stsTokenManager:A,isAnonymous:v});return yield yr(R),R})()}}const ot=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,f.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function $t(y,d,g){return`firebase:${y}:${d}:${g}`}class rn{constructor(d,g,v){this.persistence=d,this.auth=g,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=$t(this.userKey,A.apiKey,R),this.fullPersistenceKey=$t("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,f.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?Qe._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,f.Z)(function*(){if(g.persistence===d)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new rn(se(ot),d,v);const A=(yield Promise.all(g.map(function(){var Xe=(0,f.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let R=A[0]||se(ot);const q=$t(v,d.config.apiKey,d.name);let ue=null;for(const Xe of g)try{const mt=yield Xe._get(q);if(mt){const at=Qe._fromJSON(d,mt);Xe!==R&&(ue=at),R=Xe;break}}catch(mt){}const je=A.filter(Xe=>Xe._shouldAllowMigration);return R._shouldAllowMigration&&je.length?(R=je[0],ue&&(yield R._set(q,ue.toJSON())),yield Promise.all(g.map(function(){var Xe=(0,f.Z)(function*(mt){if(mt!==R)try{yield mt._remove(q)}catch(at){}});return function(mt){return Xe.apply(this,arguments)}}())),new rn(R,d,v)):new rn(R,d,v)})()}}function tu(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(kn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(sa(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(ns(d))return"Blackberry";if(Fn(d))return"Webos";if(nu(d))return"Safari";if((d.includes("chrome/")||oa(d))&&!d.includes("edge/"))return"Chrome";if(_r(d))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function sa(y=(0,N.z$)()){return/firefox\//i.test(y)}function nu(y=(0,N.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function oa(y=(0,N.z$)()){return/crios\//i.test(y)}function kn(y=(0,N.z$)()){return/iemobile/i.test(y)}function _r(y=(0,N.z$)()){return/android/i.test(y)}function ns(y=(0,N.z$)()){return/blackberry/i.test(y)}function Fn(y=(0,N.z$)()){return/webos/i.test(y)}function Nr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ss(y=(0,N.z$)()){return Nr(y)||_r(y)||Fn(y)||ns(y)||/windows phone/i.test(y)||kn(y)}function Io(y,d=[]){let g;switch(y){case"Browser":g=tu((0,N.z$)());break;case"Worker":g=`${tu((0,N.z$)())}-${y}`;break;default:g=y}const v=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${de.SDK_VERSION}/${v}`}class Pr{constructor(d,g){this.app=d,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dt(this),this.idTokenSubscription=new Dt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(d,g){var v=this;return g&&(this._popupRedirectResolver=se(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield rn.create(v,d),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,f.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g)}})()}initializeCurrentUser(d){var g=this;return(0,f.Z)(function*(){var v;let A=yield g.assertedPersistence.getCurrentUser();if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==A?void 0:A._redirectEventId,ue=yield g.tryRedirectSignIn(d);(!R||R===q)&&(null==ue?void 0:ue.user)&&(A=ue.user)}return A?A._redirectEventId?(ie(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch(A){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,f.Z)(function*(){try{yield yr(d)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function gt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,f.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,f.Z)(function*(){const v=d?(0,N.m9)(d):null;return v&&ie(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(d){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return d&&ie(g.tenantId===d.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(d),g.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,f.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(se(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new N.LL("auth","Firebase",d())}onAuthStateChanged(d,g,v){return this.registerStateListener(this.authStateSubscription,d,g,v)}onIdTokenChanged(d,g,v){return this.registerStateListener(this.idTokenSubscription,d,g,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var v=this;return(0,f.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===d?A.removeCurrentUser():A.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=d&&se(d)||g._popupRedirectResolver;ie(v,g,"argument-error"),g.redirectPersistenceManager=yield rn.create(g,[se(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,f.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===d?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,f.Z)(function*(){if(d===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,v,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?d.addObserver(g,v,A):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==d&&(g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh()),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Io(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,f.Z)(function*(){const g={"X-Client-Version":d.clientVersion};return d.app.options.appId&&(g["X-Firebase-gmpid"]=d.app.options.appId),g})()}}function Pe(y){return(0,N.m9)(y)}class Dt{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function En(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class Ut{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return Z("not implemented")}_getIdTokenResponse(d){return Z("not implemented")}_linkToIdToken(d,g){return Z("not implemented")}_getReauthenticationResolver(d){return Z("not implemented")}}function Js(y,d){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:resetPassword",Ht(y,d))})).apply(this,arguments)}function Et(y,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Co(y,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:update",Ht(y,d))})).apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithPassword",Ht(y,d))})).apply(this,arguments)}function xs(y,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:sendOobCode",Ht(y,d))})).apply(this,arguments)}function qn(y,d){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(y,d){return xs(y,d)})).apply(this,arguments)}function Dl(y,d){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y,d){return xs(y,d)})).apply(this,arguments)}function mi(y,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(y,d){return xs(y,d)})).apply(this,arguments)}function bl(y,d){return ru.apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(y,d){return xs(y,d)})).apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,d))})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithEmailLink",Ht(y,d))})).apply(this,arguments)}class iu extends Ut{constructor(d,g,v,A=null){super("password",v),this._email=d,this._password=g,this._tenantId=A}static _fromEmailAndPassword(d,g){return new iu(d,g,"password")}static _fromEmailAndCode(d,g,v=null){return new iu(d,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function bo(y,d){return bn.apply(this,arguments)}(d,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ms(y,d){return Qr.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:X(d,"internal-error")}})()}_linkToIdToken(d,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return Et(d,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function wh(y,d){return Tl.apply(this,arguments)}(d,{idToken:g,email:v._email,oobCode:v._password});default:X(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Tn(y,d){return Al.apply(this,arguments)}function Al(){return(Al=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithIdp",Ht(y,d))})).apply(this,arguments)}class ss extends Ut{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new ss(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):X("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A}=g,R=(0,ee._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const q=new ss(v,A);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(d){return Tn(d,this.buildRequest())}_linkToIdToken(d,g){const v=this.buildRequest();return v.idToken=g,Tn(d,v)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Tn(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,N.xO)(g)}return d}}function Up(y,d){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:sendVerificationCode",Ht(y,d))})).apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,d))})).apply(this,arguments)}function Sl(){return(Sl=(0,f.Z)(function*(y,d){const g=yield mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,d));if(g.temporaryProof)throw xi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const jp={USER_NOT_FOUND:"user-not-found"};function Ml(){return(Ml=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ht(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),jp)})).apply(this,arguments)}class Ao extends Ut{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new Ao({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new Ao({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function Bp(y,d){return ua.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function To(y,d){return Sl.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function xl(y,d){return Ml.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}=d;return v||g||A||R?new Ao({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class os{constructor(d){var g,v,A,R,q,ue;const je=(0,N.zd)((0,N.pd)(d)),Xe=null!==(g=je.apiKey)&&void 0!==g?g:null,mt=null!==(v=je.oobCode)&&void 0!==v?v:null,at=function Hp(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=je.mode)&&void 0!==A?A:null);ie(Xe&&mt&&at,"argument-error"),this.apiKey=Xe,this.operation=at,this.code=mt,this.continueUrl=null!==(R=je.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=je.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ue=je.tenantId)&&void 0!==ue?ue:null}static parseLink(d){const g=function Ih(y){const d=(0,N.zd)((0,N.pd)(y)).link,g=d?(0,N.zd)((0,N.pd)(d)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||g||d||y}(d);try{return new os(g)}catch(v){return null}}}let ca=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return iu._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=os.parseLink(v);return ie(A,"argument-error"),iu._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Rs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Jr extends Rs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class no extends Jr{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return ie("providerId"in g&&"signInMethod"in g,"argument-error"),ss._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ie(d.idToken||d.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return no.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return no.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:q,providerId:ue}=d;if(!v&&!A&&!g&&!R||!ue)return null;try{return new no(ue)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(je){return null}}}let So=(()=>{class y extends Jr{constructor(){super("facebook.com")}static credential(g){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),xo=(()=>{class y extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Rl=(()=>{class y extends Jr{constructor(){super("github.com")}static credential(g){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Os extends Ut{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return Tn(d,this.buildRequest())}_linkToIdToken(d,g){const v=this.buildRequest();return v.idToken=g,Tn(d,v)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Tn(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A,pendingToken:R}=g;return v&&A&&R&&v===A?new Os(v,R):null}static _create(d,g){return new Os(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class as extends Rs{constructor(d){ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return as.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return as.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=Os.fromJSON(d);return ie(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:v}=d;if(!g||!v)return null;try{return Os._create(v,g)}catch(A){return null}}}let Xr=(()=>{class y extends Jr{constructor(){super("twitter.com")}static credential(g,v){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Nl(y,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signUp",Ht(y,d))})).apply(this,arguments)}class ur{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,v,A=!1){return(0,f.Z)(function*(){const R=yield Qe._fromIdTokenResponse(d,v,A),q=Pl(v);return new ur({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(d,g,v){return(0,f.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const A=Pl(v);return new ur({user:d,providerId:A,_tokenResponse:v,operationType:g})})()}}function Pl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ou(){return(ou=(0,f.Z)(function*(y){var d;const g=Pe(y);if(yield g._initializationPromise,null===(d=g.currentUser)||void 0===d?void 0:d.isAnonymous)return new ur({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Nl(g,{returnSecureToken:!0}),A=yield ur._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class au extends N.ZR{constructor(d,g,v,A){var R;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,au.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,g,v,A){return new au(d,g,v,A)}}function uu(y,d,g,v){return("reauthenticate"===d?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?au._fromErrorAndOperation(y,R,d,v):R})}function Qu(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Ju(){return(Ju=(0,f.Z)(function*(y,d){const g=(0,N.m9)(y);yield Ns(!0,g,d);const{providerUserInfo:v}=yield ln(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),A=Qu(v||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Yt(y,d){return la.apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(y,d,g=!1){const v=yield sr(y,d._linkToIdToken(y.auth,yield y.getIdToken()),g);return ur._forOperation(y,"link",v)})).apply(this,arguments)}function Ns(y,d,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(y,d,g){yield yr(d);const A=!1===y?"provider-already-linked":"no-such-provider";ie(Qu(d.providerData).has(g)===y,d.auth,A)})).apply(this,arguments)}function cu(y,d){return da.apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(y,d,g=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield sr(y,uu(v,A,d,y),g);ie(R.idToken,v,"internal-error");const q=rt(R.idToken);ie(q,v,"internal-error");const{sub:ue}=q;return ie(y.uid===ue,v,"user-mismatch"),ur._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&X(v,"user-mismatch"),R}})).apply(this,arguments)}function ro(y,d){return zn.apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(y,d,g=!1){const v="signIn",A=yield uu(y,v,d),R=yield ur._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function lu(y,d){return fn.apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*(y,d){return ro(Pe(y),d)})).apply(this,arguments)}function cs(y,d){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(y,d){const g=(0,N.m9)(y);return yield Ns(!1,g,d.providerId),Yt(g,d)})).apply(this,arguments)}function Mo(y,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y,d){return cu((0,N.m9)(y),d)})).apply(this,arguments)}function Xu(y,d){return kr.apply(this,arguments)}function kr(){return(kr=(0,f.Z)(function*(y,d){return mr(y,"POST","/v1/accounts:signInWithCustomToken",Ht(y,d))})).apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,d){const g=Pe(y),v=yield Xu(g,{token:d,returnSecureToken:!0}),A=yield ur._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ut{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?ha._fromServerResponse(d,g):X(d,"internal-error")}}class ha extends ut{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new ha(g)}}function fa(y,d,g){var v;ie((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ie(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ie(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(ie(g.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function pa(){return(pa=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y),A={requestType:"PASSWORD_RESET",email:d};g&&fa(v,A,g),yield Dl(v,A)})).apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,d,g){yield Js((0,N.m9)(y),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(y,d){yield Co((0,N.m9)(y),{oobCode:d})})).apply(this,arguments)}function Tt(y,d){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,d){const g=(0,N.m9)(y),v=yield Js(g,{oobCode:d}),A=v.requestType;switch(ie(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(v.mfaInfo,g,"internal-error");default:ie(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=ut._fromServerResponse(Pe(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(y,d){const{data:g}=yield Tt((0,N.m9)(y),d);return g.email})).apply(this,arguments)}function Er(){return(Er=(0,f.Z)(function*(y,d,g){const v=Pe(y),A=yield Nl(v,{returnSecureToken:!0,email:d,password:g}),R=yield ur._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y),A={requestType:"EMAIL_SIGNIN",email:d};ie(g.handleCodeInApp,v,"argument-error"),g&&fa(v,A,g),yield mi(v,A)})).apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y),A=ca.credentialWithLink(d,g||yt());return ie(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),lu(v,A)})).apply(this,arguments)}function Ln(y,d){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:createAuthUri",Ht(y,d))})).apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y,d){const v={identifier:d,continueUri:Lt()?yt():"http://localhost"},{signinMethods:A}=yield Ln((0,N.m9)(y),v);return A||[]})).apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(y,d){const g=(0,N.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&fa(g.auth,A,d);const{email:R}=yield qn(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};g&&fa(v.auth,R,g);const{email:q}=yield bl(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Bl(y,d){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(y,d){return St(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(y,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const v=(0,N.m9)(y),R={idToken:yield v.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},q=yield sr(v,Bl(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const ue=v.providerData.find(({providerId:je})=>"password"===je);ue&&(ue.displayName=v.displayName,ue.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function du(y,d,g){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(y,d,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(R.email=d),g&&(R.password=g);const q=yield sr(y,Et(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class oo{constructor(d,g,v={}){this.isNewUser=d,this.providerId=g,this.profile=v}}class jl extends oo{constructor(d,g,v,A){super(d,g,v),this.username=A}}class Dh extends oo{constructor(d,g){super(d,"facebook.com",g)}}class Oo extends jl{constructor(d,g){super(d,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Oi extends oo{constructor(d,g){super(d,"google.com",g)}}class bh extends jl{constructor(d,g,v){super(d,"twitter.com",g,v)}}function Zn(y){const{user:d,_tokenResponse:g}=y;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function oc(y){var d,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(d=rt(y.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new oo(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new Dh(R,A);case"github.com":return new Oo(R,A);case"google.com":return new Oi(R,A);case"twitter.com":return new bh(R,A,y.screenName||null);case"custom":case"anonymous":return new oo(R,null);default:return new oo(R,v,A)}}(g)}class hs{constructor(d,g){this.type=d,this.credential=g}static _fromIdtoken(d){return new hs("enroll",d)}static _fromMfaPendingCredential(d){return new hs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,v;if(null==d?void 0:d.multiFactorSession){if(null===(g=d.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return hs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return hs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Ia{constructor(d,g,v){this.session=d,this.hints=g,this.signInResolver=v}static _fromError(d,g){const v=Pe(d),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(ue=>ut._fromServerResponse(v,ue));ie(A.mfaPendingCredential,v,"internal-error");const q=hs._fromMfaPendingCredential(A.mfaPendingCredential);return new Ia(q,R,function(){var ue=(0,f.Z)(function*(je){const Xe=yield je._process(v,q);delete A.mfaInfo,delete A.mfaPendingCredential;const mt=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(g.operationType){case"signIn":const at=yield ur._fromIdTokenResponse(v,g.operationType,mt);return yield v._updateCurrentUser(at.user),at;case"reauthenticate":return ie(g.user,v,"internal-error"),ur._forOperation(g.user,g.operationType,mt);default:X(v,"internal-error")}});return function(je){return ue.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,f.Z)(function*(){return g.signInResolver(d)})()}}function hu(y,d){return St(y,"POST","/v2/accounts/mfaEnrollment:start",Ht(y,d))}class fs{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ut._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new fs(d)}getSession(){var d=this;return(0,f.Z)(function*(){return hs._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,g){var v=this;return(0,f.Z)(function*(){const A=d,R=yield v.getSession(),q=yield sr(v.user,A._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(d){var g=this;return(0,f.Z)(function*(){const v="string"==typeof d?d:d.uid,A=yield g.user.getIdToken(),R=yield sr(g.user,function Ah(y,d){return St(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(y,d))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const No=new WeakMap,Ca="__sak";class Da{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ca,"1"),this.storage.removeItem(Ca),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const en=(()=>{class y extends Da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fu(){const y=(0,N.z$)();return nu(y)||Nr(y)}()&&function Xn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&g(v,R,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ue,je,Xe)=>{this.notifyListeners(ue,Xe)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(A);if(g.newValue!==ue)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const R=()=>{const ue=this.storage.getItem(A);!v&&this.localCache[A]===ue||this.notifyListeners(A,ue)},q=this.storage.getItem(A);!function aa(){return(0,N.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,R=this;return(0,f.Z)(function*(){yield A().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,f.Z)(function*(){const R=yield v().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,A=this;return(0,f.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),on=(()=>{class y extends Da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let ba=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const A=g,{eventId:R,eventType:q,data:ue}=A.data,je=v.handlersMap[q];if(!(null==je?void 0:je.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Xe=Array.from(je).map(function(){var at=(0,f.Z)(function*(_n){return _n(A.origin,ue)});return function(_n){return at.apply(this,arguments)}}()),mt=yield function Vn(y){return Promise.all(y.map(function(){var d=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return d.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:mt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ei(y="",d=10){let g="";for(let v=0;v<d;v++)g+=Math.floor(10*Math.random());return y+g}class wr{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,v=50){var A=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ue;return new Promise((je,Xe)=>{const mt=ei("",20);R.port1.start();const at=setTimeout(()=>{Xe(new Error("unsupported_event"))},v);ue={messageChannel:R,onMessage(_n){const Ei=_n;if(Ei.data.eventId===mt)switch(Ei.data.status){case"ack":clearTimeout(at),q=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),je(Ei.data.response);break;default:clearTimeout(at),clearTimeout(q),Xe(new Error("invalid_response"))}}},A.handlers.add(ue),R.port1.addEventListener("message",ue.onMessage),A.target.postMessage({eventType:d,eventId:mt,data:g},[R.port2])}).finally(()=>{ue&&A.removeMessageHandler(ue)})})()}}function At(){return window}function ft(){return void 0!==At().WorkerGlobalScope&&"function"==typeof At().importScripts}function Ls(){return(Ls=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const cc="firebaseLocalStorageDb",gu="firebaseLocalStorage",ps="fbase_key";class Vs{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function cr(y,d){return y.transaction([gu],d?"readwrite":"readonly").objectStore(gu)}function Ir(){const y=indexedDB.open(cc,1);return new Promise((d,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(gu,{keyPath:ps})}catch(A){g(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(gu)?d(v):(v.close(),yield function lc(){const y=indexedDB.deleteDatabase(cc);return new Vs(y).toPromise()}(),d(yield Ir()))}))})}function dc(y,d,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,d,g){const v=cr(y,!0).put({[ps]:d,value:g});return new Vs(v).toPromise()})).apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,d){const g=cr(y,!1).get(d),v=yield new Vs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function mu(y,d){const g=cr(y,!0).delete(d);return new Vs(g).toPromise()}const ni=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Ir()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return ft()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=ba._getInstance(function $l(){return ft()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function Po(){return Ls.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new wr(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ni(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ir();return yield dc(g,Ca,"1"),yield mu(g,Ca),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(R=>dc(R,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const A=yield v._withRetries(R=>function Fo(y,d){return Lo.apply(this,arguments)}(R,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(A=>mu(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(q=>{const ue=cr(q,!1).getAll();return new Vs(ue).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:q,value:ue}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ue)&&(g.notifyListeners(q,ue),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function _u(y,d){return St(y,"POST","/v2/accounts/mfaSignIn:start",Ht(y,d))}function ms(){return(ms=(0,f.Z)(function*(y){return(yield St(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Aa(y){return new Promise((d,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=d,v.onerror=A=>{const R=xe("internal-error");R.customData=A,g(R)},v.type="text/javascript",v.charset="UTF-8",function Ta(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(v)})}function Uo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Us=1e12;class fc{constructor(d){this.auth=d,this.counter=Us,this._widgets=new Map}render(d,g){const v=this.counter;return this._widgets.set(v,new Mh(d,this.auth.name,g||{})),this.counter++,v}reset(d){var g;const v=d||Us;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(d){var g;return(null===(g=this._widgets.get(d||Us))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(d||Us))||void 0===v||v.execute(),""})()}}class Mh{constructor(d,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof d?document.getElementById(d):d;ie(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xa(y){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rh=Uo("rcb"),pc=new cn(3e4,6e4);class Oh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!At().grecaptcha}load(d,g=""){return ie(function Nh(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),d,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(At().grecaptcha):new Promise((v,A)=>{const R=At().setTimeout(()=>{A(xe(d,"network-request-failed"))},pc.get());At()[Rh]=()=>{At().clearTimeout(R),delete At()[Rh];const ue=At().grecaptcha;if(!ue)return void A(xe(d,"internal-error"));const je=ue.render;ue.render=(Xe,mt)=>{const at=je(Xe,mt);return this.counter++,at},this.hostLanguage=g,v(ue)},Aa(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Rh,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(xe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!At().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ph{load(d){return(0,f.Z)(function*(){return new fc(d)})()}clearedOneInstance(){}}const Gl="recaptcha",kh={theme:"light",type:"image"};class gc{constructor(d,g=Object.assign({},kh),v){this.parameters=g,this.type=Gl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pe(v),this.isInvisible="invisible"===this.parameters.size,ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof d?document.getElementById(d):d;ie(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ph:new Oh,this.validateStartingState()}verify(){var d=this;return(0,f.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=ue=>{!ue||(d.tokenChangeListeners.delete(q),R(ue))};d.tokenChangeListeners.add(q),d.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof d)d(g);else if("string"==typeof d){const v=At()[d];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,f.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,f.Z)(function*(){ie(Lt()&&!ft(),d.auth,"internal-error"),yield function Wp(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function Vo(y){return ms.apply(this,arguments)}(d.auth);ie(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Bo{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=Ao._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function yn(){return(yn=(0,f.Z)(function*(y,d,g){const v=Pe(y),A=yield lr(v,d,(0,N.m9)(g));return new Bo(A,R=>lu(v,R))})).apply(this,arguments)}function jo(){return(jo=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y);yield Ns(!1,v,"phone");const A=yield lr(v.auth,d,(0,N.m9)(g));return new Bo(A,R=>cs(v,R))})).apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y),A=yield lr(v.auth,d,(0,N.m9)(g));return new Bo(A,R=>Mo(v,R))})).apply(this,arguments)}function lr(y,d,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(y,d,g){var v;const A=yield g.verify();try{let R;if(ie("string"==typeof A,y,"argument-error"),ie(g.type===Gl,y,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const q=R.session;if("phoneNumber"in R)return ie("enroll"===q.type,y,"internal-error"),(yield hu(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ie("signin"===q.type,y,"internal-error");const ue=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ie(ue,y,"missing-multi-factor-info"),(yield _u(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Up(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(y,d){yield Yt((0,N.m9)(y),d)})).apply(this,arguments)}let ii=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Pe(g)}verifyPhoneNumber(g,v){return lr(this.auth,g,(0,N.m9)(v))}static credential(g,v){return Ao._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?Ao._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Pi(y,d){return d?se(d):(ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Bs extends Ut{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Tn(d,this._buildIdpRequest())}_linkToIdToken(d,g){return Tn(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return Tn(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function yc(y){return ro(y.auth,new Bs(y),y.bypassAuthState)}function zl(y){const{auth:d,user:g}=y;return ie(g,d,"internal-error"),cu(g,new Bs(y),y.bypassAuthState)}function _c(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y){const{auth:d,user:g}=y;return ie(g,d,"internal-error"),Yt(g,new Bs(y),y.bypassAuthState)})).apply(this,arguments)}class Fr{constructor(d,g,v,A,R=!1){this.auth=d,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,f.Z)(function*(v,A){d.pendingPromise={resolve:v,reject:A};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:q,error:ue,type:je}=d;if(ue)return void g.reject(ue);const Xe={auth:g.auth,requestUri:v,sessionId:A,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(je)(Xe))}catch(mt){g.reject(mt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return yc;case"linkViaPopup":case"linkViaRedirect":return _c;case"reauthViaPopup":case"reauthViaRedirect":return zl;default:X(this.auth,"internal-error")}}resolve(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vc=new cn(2e3,1e4);function vi(){return(vi=(0,f.Z)(function*(y,d,g){const v=Pe(y);qe(y,d,Rs);const A=Pi(v,g);return new wc(v,"signInViaPopup",d,A).executeNotNull()})).apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y);qe(v.auth,d,Rs);const A=Pi(v.auth,g);return new wc(v.auth,"reauthViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y);qe(v.auth,d,Rs);const A=Pi(v.auth,g);return new wc(v.auth,"linkViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}let wc=(()=>{class y extends Fr{constructor(g,v,A,R,q){super(g,v,R,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return ie(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){ne(1===g.filter.length,"Popup operations only handle one event");const v=ei();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(xe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,vc.get())};g()}}return y.currentPopupAction=null,y})();const si=new Map;class Li extends Fr{constructor(d,g,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=si.get(g.auth._key());if(!v){try{const R=(yield function Un(y,d){return js.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}si.set(g.auth._key(),v)}return g.bypassAuthState||si.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(v,d);if("unknown"!==d.type){if(d.eventId){const A=yield v.auth._redirectUserForId(d.eventId);if(A)return v.user=A,g().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function js(){return(js=(0,f.Z)(function*(y,d){const g=C(d),v=Kl(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function Hs(y,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,d){return Kl(y)._set(C(d),"true")})).apply(this,arguments)}function Kl(y){return se(y._redirectPersistence)}function C(y){return $t("pendingRedirect",y.config.apiKey,y.name)}function F(){return(F=(0,f.Z)(function*(y,d,g){const v=Pe(y);qe(y,d,Rs);const A=Pi(v,g);return yield Hs(A,v),A._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y);qe(v.auth,d,Rs);const A=Pi(v.auth,g);yield Hs(A,v.auth);const R=yield co(v);return A._openRedirect(v.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(y,d,g){const v=(0,N.m9)(y);qe(v.auth,d,Rs);const A=Pi(v.auth,g);yield Ns(!1,v,d.providerId),yield Hs(A,v.auth);const R=yield co(v);return A._openRedirect(v.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(y,d){return yield Pe(y)._initializationPromise,er(y,d,!1)})).apply(this,arguments)}function er(y,d){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(y,d,g=!1){const v=Pe(y),A=Pi(v,d),q=yield new Li(v,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,d)),q})).apply(this,arguments)}function co(y){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y){const d=ei(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Ui{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(g=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Yl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Eu(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var v;if(d.error&&!Eu(d)){const A=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(xe(this.auth,A))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const v=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vr(d))}saveEventToCache(d){this.cachedEventUids.add(Vr(d)),this.lastProcessedEventTime=Date.now()}}function Vr(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function Eu({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Oa(y){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(y,d={}){return St(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Fh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zp=/^https?/;function In(){return(In=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Oa(y);for(const g of d)try{if(wu(g))return}catch(v){}X(y,"unauthorized-domain")})).apply(this,arguments)}function wu(y){const d=yt(),{protocol:g,hostname:v}=new URL(d);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!Zp.test(g))return!1;if(Fh.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const tE=new cn(3e4,6e4);function nE(){const y=At().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Iu=null;function Kp(y){return Iu=Iu||function Lh(y){return new Promise((d,g)=>{var v,A,R;function q(){nE(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{nE(),g(xe(y,"network-request-failed"))},timeout:tE.get()})}if(null===(A=null===(v=At().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)d(gapi.iframes.getContext());else{if(!(null===(R=At().gapi)||void 0===R?void 0:R.load)){const ue=Uo("iframefcb");return At()[ue]=()=>{gapi.load?q():g(xe(y,"network-request-failed"))},Aa(`https://apis.google.com/js/api.js?onload=${ue}`).catch(je=>g(je))}q()}}).catch(d=>{throw Iu=null,d})}(y),Iu}const Ql=new cn(5e3,15e3),Jl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ic(y){const d=y.config;ie(d.authDomain,y,"auth-domain-config-required");const g=d.emulator?Vt(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:y.name,v:de.SDK_VERSION},A=Yp.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,N.xO)(v).slice(1)}`}function Qp(){return Qp=(0,f.Z)(function*(y){const d=yield Kp(y),g=At().gapi;return ie(g,y,"internal-error"),d.open({where:document.body,url:Ic(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jl,dontclear:!0},v=>new Promise(function(){var A=(0,f.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const ue=xe(y,"network-request-failed"),je=At().setTimeout(()=>{q(ue)},Ql.get());function Xe(){At().clearTimeout(je),R(v)}v.ping(Xe).then(Xe,()=>{q(ue)})});return function(R,q){return A.apply(this,arguments)}}()))}),Qp.apply(this,arguments)}const ZC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hh{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Cu(y,d,g,v,A,R){ie(y.config.authDomain,y,"auth-domain-config-required"),ie(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:de.SDK_VERSION,eventId:A};if(d instanceof Rs){d.setDefaultLanguage(y.languageCode),q.providerId=d.providerId||"",(0,N.xb)(d.getCustomParameters())||(q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[je,Xe]of Object.entries(R||{}))q[je]=Xe}if(d instanceof Jr){const je=d.getScopes().filter(Xe=>""!==Xe);je.length>0&&(q.scopes=je.join(","))}y.tenantId&&(q.tid=y.tenantId);const ue=q;for(const je of Object.keys(ue))void 0===ue[je]&&delete ue[je];return`${function sy({config:y}){return y.emulator?Vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ue).slice(1)}`}const Bi="webStorageSupport";class $h extends class iE{constructor(d){this.factorId=d}_process(d,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,v);case"signin":return this._finalizeSignIn(d,g.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new $h(d)}_finalizeEnroll(d,g,v){return function Kn(y,d){return St(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(y,d))}(d,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function hc(y,d){return St(y,"POST","/v2/accounts/mfaSignIn:finalize",Ht(y,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sE=(()=>{class y{constructor(){}static assertion(g){return $h._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var tg="@firebase/auth";class ay{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(v=>{var A;d((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qo(){return window}function Dc(){return(Dc=(0,f.Z)(function*(y,d,g){var v;const{BuildInfo:A}=qo();ne(d.sessionId,"AuthEvent did not contain a session ID");const R=yield ig(d.sessionId),q={};return Nr()?q.ibi=A.packageName:_r()?q.apn=A.packageName:X(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=R,Cu(y,g,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y){const{BuildInfo:d}=qo(),g={};Nr()?g.iosBundleId=d.packageName:_r()?g.androidPackageName=d.packageName:X(y,"operation-not-supported-in-this-environment"),yield Oa(y,g)})).apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(y,d,g){const{cordova:v}=qo();let A=()=>{};try{yield new Promise((R,q)=>{let ue=null;function je(){var at;R();const _n=null===(at=v.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof _n&&_n(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Xe(){ue||(ue=window.setTimeout(()=>{q(xe(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}d.addPassiveListener(je),document.addEventListener("resume",Xe,!1),_r()&&document.addEventListener("visibilitychange",mt,!1),A=()=>{d.removePassiveListener(je),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",mt,!1),ue&&window.clearTimeout(ue)}})}finally{A()}})).apply(this,arguments)}function ig(y){return qh.apply(this,arguments)}function qh(){return(qh=(0,f.Z)(function*(y){const d=sg(y),g=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function sg(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),g=new Uint8Array(d);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function Gh(y){(0,de._registerComponent)(new re.wA("auth",(d,{options:g})=>{const v=d.getProvider("app").getImmediate(),{apiKey:A,authDomain:R}=v.options;return(q=>{ie(A&&!A.includes(":"),"invalid-api-key",{appName:q.name}),ie(!(null==R?void 0:R.includes(":")),"argument-error",{appName:q.name});const ue={apiKey:A,authDomain:R,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Io(y)},je=new Pr(q,ue);return function le(y,d){const g=(null==d?void 0:d.persistence)||[],v=(Array.isArray(g)?g:[g]).map(se);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(je,g),je})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,v)=>{d.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new re.wA("auth-internal",d=>{const g=Pe(d.getProvider("auth").getImmediate());return new ay(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(tg,"0.19.9",function uy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,de.registerVersion)(tg,"0.19.9","esm2017")}("Browser");class Du extends Ui{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(d)),super.onEvent(d)}initialized(){var d=this;return(0,f.Z)(function*(){yield d.initPromise})()}}function cy(y){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(y){const d=yield Tc()._get(sd(y));return d&&(yield Tc()._remove(sd(y))),d})).apply(this,arguments)}function ug(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*d.length);y.push(d.charAt(v))}return y.join("")}function Tc(){return se(en)}function sd(y){return $t("authEvent",y.config.apiKey,y.name)}function ud(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function ly(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xe("no-auth-event")}}function Sc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function zh(y=(0,N.z$)()){return!("file:"!==Sc()&&"ionic:"!==Sc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dr(){try{const y=self.localStorage,d=ei();if(y)return y.setItem(d,"1"),y.removeItem(d),!function bu(y=(0,N.z$)()){return function lg(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function uE(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch(y){return cd()&&(0,N.hl)()}return!1}function cd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function xc(){return(function fy(){return"http:"===Sc()||"https:"===Sc()}()||(0,N.ru)()||zh())&&!function Wh(){return(0,N.b$)()||(0,N.UG)()}()&&Dr()&&!cd()}function Zh(){return zh()&&"undefined"!=typeof document}function Fa(){return(Fa=(0,f.Z)(function*(){return!!Zh()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const oi={LOCAL:"local",NONE:"none",SESSION:"session"},Mc=ie,dd="persistence";function Tu(y){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,f.Z)(function*(y){yield y._initializationPromise;const d=dg(),g=$t(dd,y.config.apiKey,y.name);d&&d.setItem(g,y._getPersistence())})).apply(this,arguments)}function dg(){var y;try{return(null===(y=function ld(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(d){return null}}const Yh=ie;class ys{constructor(){this.browserResolver=se(class Go{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=on,this._completeRedirectFn=er}_openPopup(d,g,v,A){var R=this;return(0,f.Z)(function*(){var q;ne(null===(q=R.eventManagers[d._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ue=Cu(d,g,v,yt(),A);return function Xp(y,d,g,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let ue="";const je=Object.assign(Object.assign({},ZC),{width:v.toString(),height:A.toString(),top:R,left:q}),Xe=(0,N.z$)().toLowerCase();g&&(ue=oa(Xe)?"_blank":g),sa(Xe)&&(d=d||"http://localhost",je.scrollbars="yes");const mt=Object.entries(je).reduce((_n,[Ei,pd])=>`${_n}${Ei}=${pd},`,"");if(function Qs(y=(0,N.z$)()){var d;return Nr(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Xe)&&"_self"!==ue)return function Xl(y,d){const g=document.createElement("a");g.href=y,g.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(d||"",ue),new Hh(null);const at=window.open(d||"",ue,mt);ie(at,y,"popup-blocked");try{at.focus()}catch(_n){}return new Hh(at)}(d,ue,ei())})()}_openRedirect(d,g,v,A){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(d),function ti(y){At().location.href=y}(Cu(d,g,v,yt(),A)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(ne(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(d);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(d){var g=this;return(0,f.Z)(function*(){const v=yield function rE(y){return Qp.apply(this,arguments)}(d),A=new Ui(d);return v.register("authEvent",R=>(ie(null==R?void 0:R.authEvent,d,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:A},g.iframes[d._key()]=v,A})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(Bi,{type:Bi},A=>{var R;const q=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Bi];void 0!==q&&g(!!q),X(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function $o(y){return In.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ss()||nu()||Nr()}}),this.cordovaResolver=se(class Ac{constructor(){this._redirectPersistence=on,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=er}_initialize(d){var g=this;return(0,f.Z)(function*(){const v=d._key();let A=g.eventManagers.get(v);return A||(A=new Du(d),g.eventManagers.set(v,A),g.attachCallbackListeners(d,A)),A})()}_openPopup(d){X(d,"operation-not-supported-in-this-environment")}_openRedirect(d,g,v,A){var R=this;return(0,f.Z)(function*(){!function rg(y){var d,g,v,A,R,q,ue,je,Xe,mt;const at=qo();ie("function"==typeof(null===(d=null==at?void 0:at.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(void 0!==(null===(g=null==at?void 0:at.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(R=null===(A=null===(v=null==at?void 0:at.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(je=null===(ue=null===(q=null==at?void 0:at.cordova)||void 0===q?void 0:q.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===je?void 0:je.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(mt=null===(Xe=null==at?void 0:at.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const q=yield R._initialize(d);yield q.initialized(),q.resetRedirect(),function Ra(){si.clear()}(),yield R._originValidation(d);const ue=function id(y,d,g=null){return{type:d,eventId:g,urlResponse:null,sessionId:ug(),postBody:null,tenantId:y.tenantId,error:xe(y,"no-auth-event")}}(d,v,A);yield function og(y,d){return Tc()._set(sd(y),d)}(d,ue);const je=yield function td(y,d,g){return Dc.apply(this,arguments)}(d,ue,g),Xe=yield function zo(y){const{cordova:d}=qo();return new Promise(g=>{d.plugins.browsertab.isAvailable(v=>{let A=null;v?d.plugins.browsertab.openUrl(y):A=d.InAppBrowser.open(y,function Cl(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(je);return function Pa(y,d,g){return Wo.apply(this,arguments)}(d,q,Xe)})()}_isIframeWebStorageSupported(d,g){throw new Error("Method not implemented.")}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function nd(y){return Cr.apply(this,arguments)}(d)),this.originValidationPromises[g]}attachCallbackListeners(d,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=qo(),q=setTimeout((0,f.Z)(function*(){yield cy(d),g.onEvent(ly())}),500),ue=function(){var mt=(0,f.Z)(function*(at){clearTimeout(q);const _n=yield cy(d);let Ei=null;_n&&(null==at?void 0:at.url)&&(Ei=function ag(y,d){var g,v;const A=function ad(y){const d=ud(y),g=d.link?decodeURIComponent(d.link):void 0,v=ud(g).link,A=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return ud(A).link||A||v||g||y}(d);if(A.includes("/__/auth/callback")){const R=ud(A),q=R.firebaseError?function od(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(R.firebaseError)):null,ue=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],je=ue?xe(ue):null;return je?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(_n,at.url)),g.onEvent(Ei||ly())});return function(_n){return mt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ue);const je=A,Xe=`${R.packageName.toLowerCase()}://`;qo().handleOpenURL=function(){var mt=(0,f.Z)(function*(at){if(at.toLowerCase().startsWith(Xe)&&ue({url:at}),"function"==typeof je)try{je(at)}catch(_n){console.error(_n)}});return function(at){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=on,this._completeRedirectFn=er}_initialize(d){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,g,v,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(d,g,v,A)})()}_openRedirect(d,g,v,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(d,g,v,A)})()}_isIframeWebStorageSupported(d,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,g)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Zh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,f.Z)(function*(){if(d.underlyingResolver)return;const g=yield function dr(){return Fa.apply(this,arguments)}();d.underlyingResolver=g?d.cordovaResolver:d.browserResolver})()}}function hg(y){return y.unwrap()}function Qh(y){return gg(y)}function gg(y){const{_tokenResponse:d}=y instanceof N.ZR?y.customData:y;if(!d)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return ii.credentialFromResult(y);const g=d.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=xo;break;case"facebook.com":v=So;break;case"github.com":v=Rl;break;case"twitter.com":v=Xr;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ue,nonce:je}=d;return R||q||A||ue?ue?g.startsWith("saml.")?Os._create(g,ue):ss._fromParams({providerId:g,signInMethod:g,pendingToken:ue,idToken:A,accessToken:R}):new no(g).credential({idToken:A,accessToken:R,rawNonce:je}):null}return y instanceof N.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Bn(y,d){return d.catch(g=>{throw g instanceof N.ZR&&function pg(y,d){var g;const v=null===(g=d.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new mg(y,function uc(y,d){var g;const v=(0,N.m9)(y),A=d;return ie(d.customData.operationType,v,"argument-error"),ie(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Ia._fromError(v,A)}(y,d));else if(v){const A=gg(d),R=d;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Qh(g),additionalUserInfo:Zn(g),user:lo.getOrCreate(A)}})}function Jh(y,d){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,f.Z)(function*(y,d){const g=yield d;return{verificationId:g.verificationId,confirm:v=>Bn(y,g.confirm(v))}})).apply(this,arguments)}class mg{constructor(d,g){this.resolver=g,this.auth=function fg(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Bn(hg(this.auth),this.resolver.resolveSignIn(d))}}class lo{constructor(d){this._delegate=d,this.multiFactor=function qp(y){const d=(0,N.m9)(y);return No.has(d)||No.set(d,fs._fromUser(d)),No.get(d)}(d)}static getOrCreate(d){return lo.USER_MAP.has(d)||lo.USER_MAP.set(d,new lo(d)),lo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var g=this;return(0,f.Z)(function*(){return Bn(g.auth,cs(g._delegate,d))})()}linkWithPhoneNumber(d,g){var v=this;return(0,f.Z)(function*(){return Jh(v.auth,function mc(y,d,g){return jo.apply(this,arguments)}(v._delegate,d,g))})()}linkWithPopup(d){var g=this;return(0,f.Z)(function*(){return Bn(g.auth,function Zl(y,d,g){return Ec.apply(this,arguments)}(g._delegate,d,ys))})()}linkWithRedirect(d){var g=this;return(0,f.Z)(function*(){return yield Tu(Pe(g.auth)),function Le(y,d,g){return function Ze(y,d,g){return Nt.apply(this,arguments)}(y,d,g)}(g._delegate,d,ys)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var g=this;return(0,f.Z)(function*(){return Bn(g.auth,Mo(g._delegate,d))})()}reauthenticateWithPhoneNumber(d,g){return Jh(this.auth,function eE(y,d,g){return Ma.apply(this,arguments)}(this._delegate,d,g))}reauthenticateWithPopup(d){return Bn(this.auth,function Wl(y,d,g){return ki.apply(this,arguments)}(this._delegate,d,ys))}reauthenticateWithRedirect(d){var g=this;return(0,f.Z)(function*(){return yield Tu(Pe(g.auth)),function W(y,d,g){return function te(y,d,g){return Se.apply(this,arguments)}(y,d,g)}(g._delegate,d,ys)})()}sendEmailVerification(d){return function ls(y,d){return va.apply(this,arguments)}(this._delegate,d)}unlink(d){var g=this;return(0,f.Z)(function*(){return yield function us(y,d){return Ju.apply(this,arguments)}(g._delegate,d),g})()}updateEmail(d){return function sc(y,d){return du((0,N.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function Gp(y,d){return du((0,N.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ql(y,d){return Ho.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ic(y,d){return wa.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,g){return function Ul(y,d,g){return Ea.apply(this,arguments)}(this._delegate,d,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lo.USER_MAP=new WeakMap;const fd=ie;let Rc=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;fd(A,"invalid-api-key",{appName:g.name}),fd(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?ys:void 0;this._delegate=v.initialize({options:{persistence:_g(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Xt(y,d,g){const v=Pe(y);ie(v._canInitEmulator,v,"emulator-config-failed"),ie(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=vr(d),{host:q,port:ue}=function rs(y){const d=vr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:En(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:En(q)}}}(d);v.config.emulator={url:`${R}//${q}${null===ue?"":`:${ue}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:ue,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function is(){function y(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Ch(y,d){return Ce.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Tt(this._delegate,g)}confirmPasswordReset(g,v){return function ec(y,d,g){return ga.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,f.Z)(function*(){return Bn(A._delegate,function ya(y,d,g){return Er.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function rc(y,d){return Ri.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Vl(y,d){const g=os.parseLink(d);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){fd(xc(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Gt(y,d){return An.apply(this,arguments)}(g._delegate,ys);return v?Bn(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function aE(y,d){Pe(y)._logFramework(d)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:R,error:q,complete:ue}=yg(g,v,A);return this._delegate.onAuthStateChanged(R,q,ue)}onIdTokenChanged(g,v,A){const{next:R,error:q,complete:ue}=yg(g,v,A);return this._delegate.onIdTokenChanged(R,q,ue)}sendSignInLinkToEmail(g,v){return function nc(y,d,g){return Ll.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function Fl(y,d,g){return pa.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let A;switch(function py(y,d){Mc(Object.values(oi).includes(d),y,"invalid-persistence-type"),(0,N.b$)()?Mc(d!==oi.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Mc(d===oi.NONE,y,"unsupported-persistence-type"):cd()?Mc(d===oi.NONE||d===oi.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Mc(d===oi.NONE||Dr(),y,"unsupported-persistence-type")}(v._delegate,g),g){case oi.SESSION:A=on;break;case oi.LOCAL:A=(yield se(ni)._isAvailable())?ni:en;break;case oi.NONE:A=ot;break;default:return X("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Bn(this._delegate,function kl(y){return ou.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Bn(this._delegate,lu(this._delegate,g))}signInWithCustomToken(g){return Bn(this._delegate,function Ps(y,d){return ks.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Bn(this._delegate,function tc(y,d,g){return lu((0,N.m9)(y),ca.credential(d,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Bn(this._delegate,function _a(y,d,g){return Ro.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Jh(this._delegate,function ry(y,d,g){return yn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return fd(xc(),v._delegate,"operation-not-supported-in-this-environment"),Bn(v._delegate,function _i(y,d,g){return vi.apply(this,arguments)}(v._delegate,g,ys))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return fd(xc(),v._delegate,"operation-not-supported-in-this-environment"),yield Tu(v._delegate),function D(y,d,g){return function x(y,d,g){return F.apply(this,arguments)}(y,d,g)}(v._delegate,g,ys)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function pn(y,d){return Fs.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=oi,y})();function yg(y,d,g){let v=y;"function"!=typeof y&&({next:v,error:d,complete:g}=y);const A=v;return{next:q=>A(q&&lo.getOrCreate(q)),error:d,complete:g}}function _g(y,d){const g=function hd(y,d){const g=dg();if(!g)return[];const v=$t(dd,y,d);switch(g.getItem(v)){case oi.NONE:return[ot];case oi.LOCAL:return[ni,on];case oi.SESSION:return[on];default:return[]}}(y,d);if("undefined"!=typeof self&&!g.includes(ni)&&g.push(ni),"undefined"!=typeof window)for(const v of[en,on])g.includes(v)||g.push(v);return g.includes(ot)||g.push(ot),g}class ef{constructor(){this.providerId="phone",this._delegate=new ii(hg(Q.Z.auth()))}static credential(d,g){return ii.credential(d,g)}verifyPhoneNumber(d,g){return this._delegate.verifyPhoneNumber(d,g)}unwrap(){return this._delegate}}ef.PHONE_SIGN_IN_METHOD=ii.PHONE_SIGN_IN_METHOD,ef.PROVIDER_ID=ii.PROVIDER_ID;const vg=ie;class La{constructor(d,g,v=Q.Z.app()){var A;vg(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new gc(d,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Eg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",d=>{const g=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new Rc(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ca,FacebookAuthProvider:So,GithubAuthProvider:Rl,GoogleAuthProvider:xo,OAuthProvider:no,SAMLAuthProvider:as,PhoneAuthProvider:ef,PhoneMultiFactorGenerator:sE,RecaptchaVerifier:La,TwitterAuthProvider:Xr,Auth:Rc,AuthCredential:Ut,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.9")}(Q.Z)},2940:function(it,Ae){!function(P){"use strict";function f(z){return Array.prototype.slice.call(z)}function Q(z){return new Promise(function(ae,Re){z.onsuccess=function(){ae(z.result)},z.onerror=function(){Re(z.error)}})}function N(z,ae,Re){var be,X=new Promise(function(xe,we){Q(be=z[ae].apply(z,Re)).then(xe,we)});return X.request=be,X}function de(z,ae,Re){var be=N(z,ae,Re);return be.then(function(X){if(X)return new U(X,be.request)})}function ee(z,ae,Re){Re.forEach(function(be){Object.defineProperty(z.prototype,be,{get:function(){return this[ae][be]},set:function(X){this[ae][be]=X}})})}function pe(z,ae,Re,be){be.forEach(function(X){X in Re.prototype&&(z.prototype[X]=function(){return N(this[ae],X,arguments)})})}function re(z,ae,Re,be){be.forEach(function(X){X in Re.prototype&&(z.prototype[X]=function(){return this[ae][X].apply(this[ae],arguments)})})}function ce(z,ae,Re,be){be.forEach(function(X){X in Re.prototype&&(z.prototype[X]=function(){return de(this[ae],X,arguments)})})}function he(z){this._index=z}function U(z,ae){this._cursor=z,this._request=ae}function V(z){this._store=z}function Y(z){this._tx=z,this.complete=new Promise(function(ae,Re){z.oncomplete=function(){ae()},z.onerror=function(){Re(z.error)},z.onabort=function(){Re(z.error)}})}function He(z,ae,Re){this._db=z,this.oldVersion=ae,this.transaction=new Y(Re)}function De(z){this._db=z}ee(he,"_index",["name","keyPath","multiEntry","unique"]),pe(he,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ce(he,"_index",IDBIndex,["openCursor","openKeyCursor"]),ee(U,"_cursor",["direction","key","primaryKey","value"]),pe(U,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(z){z in IDBCursor.prototype&&(U.prototype[z]=function(){var ae=this,Re=arguments;return Promise.resolve().then(function(){return ae._cursor[z].apply(ae._cursor,Re),Q(ae._request).then(function(be){if(be)return new U(be,ae._request)})})})}),V.prototype.createIndex=function(){return new he(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new he(this._store.index.apply(this._store,arguments))},ee(V,"_store",["name","keyPath","indexNames","autoIncrement"]),pe(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ce(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(V,"_store",IDBObjectStore,["deleteIndex"]),Y.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},ee(Y,"_tx",["objectStoreNames","mode"]),re(Y,"_tx",IDBTransaction,["abort"]),He.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},ee(He,"_db",["name","version","objectStoreNames"]),re(He,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new Y(this._db.transaction.apply(this._db,arguments))},ee(De,"_db",["name","version","objectStoreNames"]),re(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(z){[V,he].forEach(function(ae){z in ae.prototype&&(ae.prototype[z.replace("open","iterate")]=function(){var Re=f(arguments),be=Re[Re.length-1],X=this._store||this._index,xe=X[z].apply(X,Re.slice(0,-1));xe.onsuccess=function(){be(xe.result)}})})}),[he,V].forEach(function(z){z.prototype.getAll||(z.prototype.getAll=function(ae,Re){var be=this,X=[];return new Promise(function(xe){be.iterateCursor(ae,function(we){we?(X.push(we.value),void 0===Re||X.length!=Re?we.continue():xe(X)):xe(X)})})})}),P.openDb=function Oe(z,ae,Re){var be=N(indexedDB,"open",[z,ae]),X=be.request;return X&&(X.onupgradeneeded=function(xe){Re&&Re(new He(X.result,xe.oldVersion,X.transaction))}),be.then(function(xe){return new De(xe)})},P.deleteDb=function Be(z){return N(indexedDB,"deleteDatabase",[z])},Object.defineProperty(P,"__esModule",{value:!0})}(Ae)},8306:(it,Ae,P)=>{"use strict";P.d(Ae,{y:()=>U});var f=P(2961),Q=P(727),N=P(8822),de=P(4671);var re=P(2416),ce=P(576),he=P(2806);let U=(()=>{class De{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const z=new De;return z.source=this,z.operator=Be,z}subscribe(Be,z,ae){const Re=function He(De){return De&&De instanceof f.Lv||function Y(De){return De&&(0,ce.m)(De.next)&&(0,ce.m)(De.error)&&(0,ce.m)(De.complete)}(De)&&(0,Q.Nn)(De)}(Be)?Be:new f.Hp(Be,z,ae);return(0,he.x)(()=>{const{operator:be,source:X}=this;Re.add(be?be.call(Re,X):X?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(Be){try{return this._subscribe(Be)}catch(z){Be.error(z)}}forEach(Be,z){return new(z=V(z))((ae,Re)=>{const be=new f.Hp({next:X=>{try{Be(X)}catch(xe){Re(xe),be.unsubscribe()}},error:Re,complete:ae});this.subscribe(be)})}_subscribe(Be){var z;return null===(z=this.source)||void 0===z?void 0:z.subscribe(Be)}[N.L](){return this}pipe(...Be){return function pe(De){return 0===De.length?de.y:1===De.length?De[0]:function(Be){return De.reduce((z,ae)=>ae(z),Be)}}(Be)(this)}toPromise(Be){return new(Be=V(Be))((z,ae)=>{let Re;this.subscribe(be=>Re=be,be=>ae(be),()=>z(Re))})}}return De.create=Oe=>new De(Oe),De})();function V(De){var Oe;return null!==(Oe=null!=De?De:re.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(it,Ae,P)=>{"use strict";P.d(Ae,{x:()=>re});var f=P(8306),Q=P(727);const de=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=P(8737),pe=P(2806);let re=(()=>{class he extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const Y=new ce(this,this);return Y.operator=V,Y}_throwIfClosed(){if(this.closed)throw new de}next(V){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Y=this.observers.slice();for(const He of Y)He.next(V)}})}error(V){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:Y}=this;for(;Y.length;)Y.shift().error(V)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:Y,isStopped:He,observers:De}=this;return Y||He?Q.Lc:(De.push(V),new Q.w0(()=>(0,ee.P)(De,V)))}_checkFinalizedStatuses(V){const{hasError:Y,thrownError:He,isStopped:De}=this;Y?V.error(He):De&&V.complete()}asObservable(){const V=new f.y;return V.source=this,V}}return he.create=(U,V)=>new ce(U,V),he})();class ce extends re{constructor(U,V){super(),this.destination=U,this.source=V}next(U){var V,Y;null===(Y=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===Y||Y.call(V,U)}error(U){var V,Y;null===(Y=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===Y||Y.call(V,U)}complete(){var U,V;null===(V=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===V||V.call(U)}_subscribe(U){var V,Y;return null!==(Y=null===(V=this.source)||void 0===V?void 0:V.subscribe(U))&&void 0!==Y?Y:Q.Lc}}},2961:(it,Ae,P)=>{"use strict";P.d(Ae,{Hp:()=>Oe,Lv:()=>Y});var f=P(576),Q=P(727),N=P(2416),de=P(7849);function ee(){}const pe=he("C",void 0,void 0);function he(be,X,xe){return{kind:be,value:X,error:xe}}var U=P(3410),V=P(2806);class Y extends Q.w0{constructor(X){super(),this.isStopped=!1,X?(this.destination=X,(0,Q.Nn)(X)&&X.add(this)):this.destination=Re}static create(X,xe,we){return new Oe(X,xe,we)}next(X){this.isStopped?ae(function ce(be){return he("N",be,void 0)}(X),this):this._next(X)}error(X){this.isStopped?ae(function re(be){return he("E",void 0,be)}(X),this):(this.isStopped=!0,this._error(X))}complete(){this.isStopped?ae(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(X){this.destination.next(X)}_error(X){try{this.destination.error(X)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function De(be,X){return He.call(be,X)}class Oe extends Y{constructor(X,xe,we){let qe;if(super(),(0,f.m)(X))qe=X;else if(X){let $e;({next:qe,error:xe,complete:we}=X),this&&N.v.useDeprecatedNextContext?($e=Object.create(X),$e.unsubscribe=()=>this.unsubscribe()):$e=X,qe=qe&&De(qe,$e),xe=xe&&De(xe,$e),we=we&&De(we,$e)}this.destination={next:qe?Be(qe):ee,error:Be(null!=xe?xe:z),complete:we?Be(we):ee}}}function Be(be,X){return(...xe)=>{try{be(...xe)}catch(we){N.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(we):(0,de.h)(we)}}}function z(be){throw be}function ae(be,X){const{onStoppedNotification:xe}=N.v;xe&&U.z.setTimeout(()=>xe(be,X))}const Re={closed:!0,next:ee,error:z,complete:ee}},727:(it,Ae,P)=>{"use strict";P.d(Ae,{Lc:()=>pe,w0:()=>ee,Nn:()=>re});var f=P(576);const N=(0,P(3888).d)(he=>function(V){he(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((Y,He)=>`${He+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var de=P(8737);class ee{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const De of V)De.remove(this);else V.remove(this);const{initialTeardown:Y}=this;if((0,f.m)(Y))try{Y()}catch(De){U=De instanceof N?De.errors:[De]}const{_teardowns:He}=this;if(He){this._teardowns=null;for(const De of He)try{ce(De)}catch(Oe){U=null!=U?U:[],Oe instanceof N?U=[...U,...Oe.errors]:U.push(Oe)}}if(U)throw new N(U)}}add(U){var V;if(U&&U!==this)if(this.closed)ce(U);else{if(U instanceof ee){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._teardowns=null!==(V=this._teardowns)&&void 0!==V?V:[]).push(U)}}_hasParent(U){const{_parentage:V}=this;return V===U||Array.isArray(V)&&V.includes(U)}_addParent(U){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(U),V):V?[V,U]:U}_removeParent(U){const{_parentage:V}=this;V===U?this._parentage=null:Array.isArray(V)&&(0,de.P)(V,U)}remove(U){const{_teardowns:V}=this;V&&(0,de.P)(V,U),U instanceof ee&&U._removeParent(this)}}ee.EMPTY=(()=>{const he=new ee;return he.closed=!0,he})();const pe=ee.EMPTY;function re(he){return he instanceof ee||he&&"closed"in he&&(0,f.m)(he.remove)&&(0,f.m)(he.add)&&(0,f.m)(he.unsubscribe)}function ce(he){(0,f.m)(he)?he():he.unsubscribe()}},2416:(it,Ae,P)=>{"use strict";P.d(Ae,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ae,P)=>{"use strict";P.d(Ae,{E:()=>Q});const Q=new(P(8306).y)(ee=>ee.complete())},8996:(it,Ae,P)=>{"use strict";P.d(Ae,{D:()=>xe});var f=P(8421),Q=P(5363),N=P(9468),pe=P(8306),ce=P(2202),he=P(576),U=P(9672);function Y(we,qe){if(!we)throw new Error("Iterable cannot be null");return new pe.y($e=>{(0,U.f)($e,qe,()=>{const ie=we[Symbol.asyncIterator]();(0,U.f)($e,qe,()=>{ie.next().then(Z=>{Z.done?$e.complete():$e.next(Z.value)})},0,!0)})})}var He=P(3670),De=P(8239),Oe=P(1144),Be=P(6495),z=P(2206),ae=P(4532),Re=P(3260);function xe(we,qe){return qe?function X(we,qe){if(null!=we){if((0,He.c)(we))return function de(we,qe){return(0,f.Xf)(we).pipe((0,N.R)(qe),(0,Q.Q)(qe))}(we,qe);if((0,Oe.z)(we))return function re(we,qe){return new pe.y($e=>{let ie=0;return qe.schedule(function(){ie===we.length?$e.complete():($e.next(we[ie++]),$e.closed||this.schedule())})})}(we,qe);if((0,De.t)(we))return function ee(we,qe){return(0,f.Xf)(we).pipe((0,N.R)(qe),(0,Q.Q)(qe))}(we,qe);if((0,z.D)(we))return Y(we,qe);if((0,Be.T)(we))return function V(we,qe){return new pe.y($e=>{let ie;return(0,U.f)($e,qe,()=>{ie=we[ce.h](),(0,U.f)($e,qe,()=>{let Z,ne;try{({value:Z,done:ne}=ie.next())}catch(me){return void $e.error(me)}ne?$e.complete():$e.next(Z)},0,!0)}),()=>(0,he.m)(null==ie?void 0:ie.return)&&ie.return()})}(we,qe);if((0,Re.L)(we))return function be(we,qe){return Y((0,Re.Q)(we),qe)}(we,qe)}throw(0,ae.z)(we)}(we,qe):(0,f.Xf)(we)}},8421:(it,Ae,P)=>{"use strict";P.d(Ae,{Xf:()=>He});var f=P(655),Q=P(1144),N=P(8239),de=P(8306),ee=P(3670),pe=P(2206),re=P(4532),ce=P(6495),he=P(3260),U=P(576),V=P(7849),Y=P(8822);function He(X){if(X instanceof de.y)return X;if(null!=X){if((0,ee.c)(X))return function De(X){return new de.y(xe=>{const we=X[Y.L]();if((0,U.m)(we.subscribe))return we.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(X);if((0,Q.z)(X))return function Oe(X){return new de.y(xe=>{for(let we=0;we<X.length&&!xe.closed;we++)xe.next(X[we]);xe.complete()})}(X);if((0,N.t)(X))return function Be(X){return new de.y(xe=>{X.then(we=>{xe.closed||(xe.next(we),xe.complete())},we=>xe.error(we)).then(null,V.h)})}(X);if((0,pe.D)(X))return ae(X);if((0,ce.T)(X))return function z(X){return new de.y(xe=>{for(const we of X)if(xe.next(we),xe.closed)return;xe.complete()})}(X);if((0,he.L)(X))return function Re(X){return ae((0,he.Q)(X))}(X)}throw(0,re.z)(X)}function ae(X){return new de.y(xe=>{(function be(X,xe){var we,qe,$e,ie;return(0,f.mG)(this,void 0,void 0,function*(){try{for(we=(0,f.KL)(X);!(qe=yield we.next()).done;)if(xe.next(qe.value),xe.closed)return}catch(Z){$e={error:Z}}finally{try{qe&&!qe.done&&(ie=we.return)&&(yield ie.call(we))}finally{if($e)throw $e.error}}xe.complete()})})(X,xe).catch(we=>xe.error(we))})}},6451:(it,Ae,P)=>{"use strict";P.d(Ae,{T:()=>pe});var f=P(8189),Q=P(8421),N=P(515),de=P(7669),ee=P(8996);function pe(...re){const ce=(0,de.yG)(re),he=(0,de._6)(re,1/0),U=re;return U.length?1===U.length?(0,Q.Xf)(U[0]):(0,f.J)(he)((0,ee.D)(U,ce)):N.E}},5403:(it,Ae,P)=>{"use strict";P.d(Ae,{x:()=>Q});var f=P(2961);function Q(de,ee,pe,re,ce){return new N(de,ee,pe,re,ce)}class N extends f.Lv{constructor(ee,pe,re,ce,he,U){super(ee),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=pe?function(V){try{pe(V)}catch(Y){ee.error(Y)}}:super._next,this._error=ce?function(V){try{ce(V)}catch(Y){ee.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(V){ee.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(it,Ae,P)=>{"use strict";P.d(Ae,{U:()=>N});var f=P(4482),Q=P(5403);function N(de,ee){return(0,f.e)((pe,re)=>{let ce=0;pe.subscribe((0,Q.x)(re,he=>{re.next(de.call(ee,he,ce++))}))})}},8189:(it,Ae,P)=>{"use strict";P.d(Ae,{J:()=>N});var f=P(5577),Q=P(4671);function N(de=1/0){return(0,f.z)(Q.y,de)}},5577:(it,Ae,P)=>{"use strict";P.d(Ae,{z:()=>ce});var f=P(4004),Q=P(8421),N=P(4482),de=P(9672),ee=P(5403),re=P(576);function ce(he,U,V=1/0){return(0,re.m)(U)?ce((Y,He)=>(0,f.U)((De,Oe)=>U(Y,De,He,Oe))((0,Q.Xf)(he(Y,He))),V):("number"==typeof U&&(V=U),(0,N.e)((Y,He)=>function pe(he,U,V,Y,He,De,Oe,Be){const z=[];let ae=0,Re=0,be=!1;const X=()=>{be&&!z.length&&!ae&&U.complete()},xe=qe=>ae<Y?we(qe):z.push(qe),we=qe=>{De&&U.next(qe),ae++;let $e=!1;(0,Q.Xf)(V(qe,Re++)).subscribe((0,ee.x)(U,ie=>{null==He||He(ie),De?xe(ie):U.next(ie)},()=>{$e=!0},void 0,()=>{if($e)try{for(ae--;z.length&&ae<Y;){const ie=z.shift();Oe?(0,de.f)(U,Oe,()=>we(ie)):we(ie)}X()}catch(ie){U.error(ie)}}))};return he.subscribe((0,ee.x)(U,xe,()=>{be=!0,X()})),()=>{null==Be||Be()}}(Y,He,he,V)))}},5363:(it,Ae,P)=>{"use strict";P.d(Ae,{Q:()=>de});var f=P(9672),Q=P(4482),N=P(5403);function de(ee,pe=0){return(0,Q.e)((re,ce)=>{re.subscribe((0,N.x)(ce,he=>(0,f.f)(ce,ee,()=>ce.next(he),pe),()=>(0,f.f)(ce,ee,()=>ce.complete(),pe),he=>(0,f.f)(ce,ee,()=>ce.error(he),pe)))})}},3099:(it,Ae,P)=>{"use strict";P.d(Ae,{B:()=>pe});var f=P(8996),Q=P(5698),N=P(7579),de=P(2961),ee=P(4482);function pe(ce={}){const{connector:he=(()=>new N.x),resetOnError:U=!0,resetOnComplete:V=!0,resetOnRefCountZero:Y=!0}=ce;return He=>{let De=null,Oe=null,Be=null,z=0,ae=!1,Re=!1;const be=()=>{null==Oe||Oe.unsubscribe(),Oe=null},X=()=>{be(),De=Be=null,ae=Re=!1},xe=()=>{const we=De;X(),null==we||we.unsubscribe()};return(0,ee.e)((we,qe)=>{z++,!Re&&!ae&&be();const $e=Be=null!=Be?Be:he();qe.add(()=>{z--,0===z&&!Re&&!ae&&(Oe=re(xe,Y))}),$e.subscribe(qe),De||(De=new de.Hp({next:ie=>$e.next(ie),error:ie=>{Re=!0,be(),Oe=re(X,U,ie),$e.error(ie)},complete:()=>{ae=!0,be(),Oe=re(X,V),$e.complete()}}),(0,f.D)(we).subscribe(De))})(He)}}function re(ce,he,...U){return!0===he?(ce(),null):!1===he?null:he(...U).pipe((0,Q.q)(1)).subscribe(()=>ce())}},9468:(it,Ae,P)=>{"use strict";P.d(Ae,{R:()=>Q});var f=P(4482);function Q(N,de=0){return(0,f.e)((ee,pe)=>{pe.add(N.schedule(()=>ee.subscribe(pe),de))})}},5698:(it,Ae,P)=>{"use strict";P.d(Ae,{q:()=>de});var f=P(515),Q=P(4482),N=P(5403);function de(ee){return ee<=0?()=>f.E:(0,Q.e)((pe,re)=>{let ce=0;pe.subscribe((0,N.x)(re,he=>{++ce<=ee&&(re.next(he),ee<=ce&&re.complete())}))})}},8505:(it,Ae,P)=>{"use strict";P.d(Ae,{b:()=>ee});var f=P(576),Q=P(4482),N=P(5403),de=P(4671);function ee(pe,re,ce){const he=(0,f.m)(pe)||re||ce?{next:pe,error:re,complete:ce}:pe;return he?(0,Q.e)((U,V)=>{var Y;null===(Y=he.subscribe)||void 0===Y||Y.call(he);let He=!0;U.subscribe((0,N.x)(V,De=>{var Oe;null===(Oe=he.next)||void 0===Oe||Oe.call(he,De),V.next(De)},()=>{var De;He=!1,null===(De=he.complete)||void 0===De||De.call(he),V.complete()},De=>{var Oe;He=!1,null===(Oe=he.error)||void 0===Oe||Oe.call(he,De),V.error(De)},()=>{var De,Oe;He&&(null===(De=he.unsubscribe)||void 0===De||De.call(he)),null===(Oe=he.finalize)||void 0===Oe||Oe.call(he)}))}):de.y}},4408:(it,Ae,P)=>{"use strict";P.d(Ae,{o:()=>ee});var f=P(727);class Q extends f.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const N={setInterval(...pe){const{delegate:re}=N;return((null==re?void 0:re.setInterval)||setInterval)(...pe)},clearInterval(pe){const{delegate:re}=N;return((null==re?void 0:re.clearInterval)||clearInterval)(pe)},delegate:void 0};var de=P(8737);class ee extends Q{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const he=this.id,U=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(U,he,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(U,this.id,ce),this}requestAsyncId(re,ce,he=0){return N.setInterval(re.flush.bind(re,this),he)}recycleAsyncId(re,ce,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ce;N.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(re,ce);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let U,he=!1;try{this.work(re)}catch(V){he=!0,U=V||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:he}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(he,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ae,P)=>{"use strict";P.d(Ae,{v:()=>N});var f=P(6063);class Q{constructor(ee,pe=Q.now){this.schedulerActionCtor=ee,this.now=pe}schedule(ee,pe=0,re){return new this.schedulerActionCtor(this,ee).schedule(re,pe)}}Q.now=f.l.now;class N extends Q{constructor(ee,pe=Q.now){super(ee,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ee){const{actions:pe}=this;if(this._active)return void pe.push(ee);let re;this._active=!0;do{if(re=ee.execute(ee.state,ee.delay))break}while(ee=pe.shift());if(this._active=!1,re){for(;ee=pe.shift();)ee.unsubscribe();throw re}}}},4986:(it,Ae,P)=>{"use strict";P.d(Ae,{z:()=>N});var f=P(4408);const N=new(P(7565).v)(f.o)},6063:(it,Ae,P)=>{"use strict";P.d(Ae,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(it,Ae,P)=>{"use strict";P.d(Ae,{z:()=>f});const f={setTimeout(...Q){const{delegate:N}=f;return((null==N?void 0:N.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:N}=f;return((null==N?void 0:N.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(it,Ae,P)=>{"use strict";P.d(Ae,{h:()=>Q});const Q=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ae,P)=>{"use strict";P.d(Ae,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ae,P)=>{"use strict";P.d(Ae,{_6:()=>pe,jO:()=>de,yG:()=>ee});var f=P(576);function N(re){return re[re.length-1]}function de(re){return(0,f.m)(N(re))?re.pop():void 0}function ee(re){return function Q(re){return re&&(0,f.m)(re.schedule)}(N(re))?re.pop():void 0}function pe(re,ce){return"number"==typeof N(re)?re.pop():ce}},8737:(it,Ae,P)=>{"use strict";function f(Q,N){if(Q){const de=Q.indexOf(N);0<=de&&Q.splice(de,1)}}P.d(Ae,{P:()=>f})},3888:(it,Ae,P)=>{"use strict";function f(Q){const de=Q(ee=>{Error.call(ee),ee.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}P.d(Ae,{d:()=>f})},2806:(it,Ae,P)=>{"use strict";P.d(Ae,{x:()=>N,O:()=>de});var f=P(2416);let Q=null;function N(ee){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!Q;if(pe&&(Q={errorThrown:!1,error:null}),ee(),pe){const{errorThrown:re,error:ce}=Q;if(Q=null,re)throw ce}}else ee()}function de(ee){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ee)}},9672:(it,Ae,P)=>{"use strict";function f(Q,N,de,ee=0,pe=!1){const re=N.schedule(function(){de(),pe?Q.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Q.add(re),!pe)return re}P.d(Ae,{f:()=>f})},4671:(it,Ae,P)=>{"use strict";function f(Q){return Q}P.d(Ae,{y:()=>f})},1144:(it,Ae,P)=>{"use strict";P.d(Ae,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(it,Ae,P)=>{"use strict";P.d(Ae,{D:()=>Q});var f=P(576);function Q(N){return Symbol.asyncIterator&&(0,f.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(it,Ae,P)=>{"use strict";function f(Q){return"function"==typeof Q}P.d(Ae,{m:()=>f})},3670:(it,Ae,P)=>{"use strict";P.d(Ae,{c:()=>N});var f=P(8822),Q=P(576);function N(de){return(0,Q.m)(de[f.L])}},6495:(it,Ae,P)=>{"use strict";P.d(Ae,{T:()=>N});var f=P(2202),Q=P(576);function N(de){return(0,Q.m)(null==de?void 0:de[f.h])}},8239:(it,Ae,P)=>{"use strict";P.d(Ae,{t:()=>Q});var f=P(576);function Q(N){return(0,f.m)(null==N?void 0:N.then)}},3260:(it,Ae,P)=>{"use strict";P.d(Ae,{Q:()=>N,L:()=>de});var f=P(655),Q=P(576);function N(ee){return(0,f.FC)(this,arguments,function*(){const re=ee.getReader();try{for(;;){const{value:ce,done:he}=yield(0,f.qq)(re.read());if(he)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{re.releaseLock()}})}function de(ee){return(0,Q.m)(null==ee?void 0:ee.getReader)}},4482:(it,Ae,P)=>{"use strict";P.d(Ae,{A:()=>Q,e:()=>N});var f=P(576);function Q(de){return(0,f.m)(null==de?void 0:de.lift)}function N(de){return ee=>{if(Q(ee))return ee.lift(function(pe){try{return de(pe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(it,Ae,P)=>{"use strict";P.d(Ae,{h:()=>N});var f=P(2416),Q=P(3410);function N(de){Q.z.setTimeout(()=>{const{onUnhandledError:ee}=f.v;if(!ee)throw de;ee(de)})}},4532:(it,Ae,P)=>{"use strict";function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ae,{z:()=>f})},655:(it,Ae,P)=>{"use strict";function de(Z,ne){var me={};for(var se in Z)Object.prototype.hasOwnProperty.call(Z,se)&&ne.indexOf(se)<0&&(me[se]=Z[se]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(Z);Ne<se.length;Ne++)ne.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Z,se[Ne])&&(me[se[Ne]]=Z[se[Ne]])}return me}function ce(Z,ne,me,se){return new(me||(me=Promise))(function(le,yt){function Lt(gt){try{nt(se.next(gt))}catch(cn){yt(cn)}}function Yn(gt){try{nt(se.throw(gt))}catch(cn){yt(cn)}}function nt(gt){gt.done?le(gt.value):function Ne(le){return le instanceof me?le:new me(function(yt){yt(le)})}(gt.value).then(Lt,Yn)}nt((se=se.apply(Z,ne||[])).next())})}function z(Z){return this instanceof z?(this.v=Z,this):new z(Z)}function ae(Z,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=me.apply(Z,ne||[]),le=[];return Ne={},yt("next"),yt("throw"),yt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function yt(Vt){se[Vt]&&(Ne[Vt]=function(Qn){return new Promise(function(Jt,qr){le.push([Vt,Qn,Jt,qr])>1||Lt(Vt,Qn)})})}function Lt(Vt,Qn){try{!function Yn(Vt){Vt.value instanceof z?Promise.resolve(Vt.value.v).then(nt,gt):cn(le[0][2],Vt)}(se[Vt](Qn))}catch(Jt){cn(le[0][3],Jt)}}function nt(Vt){Lt("next",Vt)}function gt(Vt){Lt("throw",Vt)}function cn(Vt,Qn){Vt(Qn),le.shift(),le.length&&Lt(le[0][0],le[0][1])}}function be(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=Z[Symbol.asyncIterator];return ne?ne.call(Z):(Z=function Y(Z){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&Z[ne],se=0;if(me)return me.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&se>=Z.length&&(Z=void 0),{value:Z&&Z[se++],done:!Z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(le){me[le]=Z[le]&&function(yt){return new Promise(function(Lt,Yn){!function Ne(le,yt,Lt,Yn){Promise.resolve(Yn).then(function(nt){le({value:nt,done:Lt})},yt)}(Lt,Yn,(yt=Z[le](yt)).done,yt.value)})}}}P.d(Ae,{_T:()=>de,mG:()=>ce,qq:()=>z,FC:()=>ae,KL:()=>be})},5e3:(it,Ae,P)=>{"use strict";P.d(Ae,{deG:()=>Oh,tb:()=>Jv,AFp:()=>qI,ip1:()=>up,CZH:()=>fl,hGG:()=>x0,z2F:()=>gp,sBO:()=>p0,Sil:()=>dp,_Vd:()=>Hf,EJc:()=>Ya,SBq:()=>nh,qLn:()=>Bn,vpe:()=>sn,tBr:()=>Vi,XFs:()=>pt,OlP:()=>mn,zs3:()=>vs,ZZ4:()=>Ja,aQg:()=>$m,soG:()=>lp,YKP:()=>Ov,h0i:()=>al,PXZ:()=>Mb,R0b:()=>Ti,FiY:()=>Lr,Lbi:()=>pl,g9A:()=>cp,Qsj:()=>$r,FYo:()=>$f,JOm:()=>ue,tp0:()=>Vr,Rgc:()=>Wi,dDg:()=>a0,q4F:()=>ws,GfV:()=>vI,s_b:()=>gr,ifc:()=>kt,eFA:()=>XI,G48:()=>h0,Gpc:()=>V,X6Q:()=>rC,_c5:()=>b0,VLi:()=>ph,c2e:()=>zI,zSh:()=>a_,wAp:()=>ct,vHH:()=>Oe,cg1:()=>om,kL8:()=>qt,dqk:()=>bt,sIi:()=>_f,CqO:()=>ww,QGY:()=>Jg,F4k:()=>Kc,RDi:()=>Qu,AaK:()=>ce,qOj:()=>qg,TTD:()=>So,_Bn:()=>th,xp6:()=>ui,uIk:()=>Td,ekj:()=>xf,Suo:()=>Ws,Xpm:()=>Ue,lG2:()=>nu,Yz7:()=>Jt,cJS:()=>Ht,oAB:()=>rn,Yjl:()=>oa,Y36:()=>bf,_UZ:()=>vw,qZA:()=>G_,TgZ:()=>Qg,EpF:()=>q_,n5z:()=>Ta,LFG:()=>Le,$8M:()=>Uo,$Z:()=>_w,NdJ:()=>z_,CRH:()=>kI,oxw:()=>Xg,ALo:()=>MI,lcZ:()=>OI,Q6J:()=>Wc,iGM:()=>ge,MAs:()=>R_,CHM:()=>ma,LSH:()=>cg,YNc:()=>M_,W1O:()=>Tm,_uU:()=>Uw,Oqu:()=>sv,hij:()=>Bd,Gf:()=>Qf});var f=P(7579),Q=P(727),N=P(8306),de=P(6451),ee=P(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=pe({__forward_ref__:pe});function V(i){return i.__forward_ref__=V,i.toString=function(){return ce(this())},i}function Y(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===V}class Oe extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function z(i){return"string"==typeof i?i:null==i?"":String(i)}function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():z(i)}function xe(i,s){const a=s?` in ${s}`:"";throw new Oe(-201,`No provider for ${ae(i)} found${a}`)}function nt(i,s){null==i&&function gt(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function St(i){return es(i,Si)||es(i,Wr)}function es(i,s){return i.hasOwnProperty(s)?i[s]:null}function mr(i){return i&&(i.hasOwnProperty(As)||i.hasOwnProperty(xi))?i[As]:null}const Si=pe({\u0275prov:pe}),As=pe({\u0275inj:pe}),Wr=pe({ngInjectableDef:pe}),xi=pe({ngInjectorDef:pe});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Zr;function vn(i){const s=Zr;return Zr=i,s}function Ks(i,s,a){const c=St(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&pt.Optional?null:void 0!==s?s:void xe(ce(i),"Injector")}function Gn(i){return{toString:i}.toString()}var dn=(()=>((dn=dn||{})[dn.OnPush=0]="OnPush",dn[dn.Default=1]="Default",dn))(),kt=(()=>{return(i=kt||(kt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",kt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,ht="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt=rt||"undefined"!=typeof global&&global||ht||sr,yr={},L=[],j=pe({\u0275cmp:pe}),$=pe({\u0275dir:pe}),Ee=pe({\u0275pipe:pe}),J=pe({\u0275mod:pe}),We=pe({\u0275fac:pe}),Ie=pe({__NG_ELEMENT_ID__:pe});let _e=0;function Ue(i){return Gn(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||kt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,p=i.features,_=i.pipes;return c.id+=_e++,c.inputs=sa(i.inputs,a),c.outputs=sa(i.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=l?()=>("function"==typeof l?l():l).map(wt):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(ot):null,c})}function wt(i){return kn(i)||function _r(i){return i[$]||null}(i)}function ot(i){return function ns(i){return i[Ee]||null}(i)}const $t={};function rn(i){return Gn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&($t[i.id]=i.type),s})}function sa(i,s){if(null==i)return yr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),a[l]=c,s&&(s[l]=p)}return a}const nu=Ue;function oa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function kn(i){return i[j]||null}function Fn(i,s){const a=i[J]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function mi(i){return Array.isArray(i)&&"object"==typeof i[1]}function Yr(i){return Array.isArray(i)&&!0===i[1]}function bl(i){return 0!=(8&i.flags)}function ru(i){return 2==(2&i.flags)}function Ms(i){return 1==(1&i.flags)}function Qr(i){return null!==i.template}function wh(i){return 0!=(512&i[2])}function Jr(i,s){return i.hasOwnProperty(We)?i[We]:null}class no{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function So(){return xo}function xo(i){return i.type.prototype.ngOnChanges&&(i.setInput=$p),Rl}function Rl(){const i=Ol(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===yr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function $p(i,s,a,c){const l=Ol(i)||function as(i,s){return i[Os]=s}(i,{previous:yr,current:null}),p=l.current||(l.current={}),_=l.previous,E=this.declaredInputs[a],I=_[E];p[E]=new no(I&&I.currentValue,s,_===yr),i[c]=s}So.ngInherit=!0;const Os="__ngSimpleChanges__";function Ol(i){return i[Os]||null}let uu;function Qu(i){uu=i}function Yt(i){return!!i.listen}const la={createRenderer:(i,s)=>function us(){return void 0!==uu?uu:"undefined"!=typeof document?document:void 0}()};function Zt(i){for(;Array.isArray(i);)i=i[0];return i}function ro(i,s){return Zt(s[i])}function zn(i,s){return Zt(s[i.index])}function fn(i,s){return i.data[s]}function cs(i,s){return i[s]}function Wn(i,s){const a=s[i];return mi(a)?a:a[0]}function Mo(i){return 4==(4&i[2])}function Mi(i){return 128==(128&i[2])}function kr(i,s){return null==s?null:i[s]}function Ps(i){i[18]=0}function ks(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const ut={lFrame:oo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ec(){return ut.bindingsEnabled}function Ce(){return ut.lFrame.lView}function Tt(){return ut.lFrame.tView}function ma(i){return ut.lFrame.contextLView=i,i[8]}function pn(){let i=Fs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Fs(){return ut.lFrame.currentTNode}function Er(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function tc(){return ut.lFrame.isParent}function _a(){return ut.isInCheckNoChangesMode}function Ro(i){ut.isInCheckNoChangesMode=i}function Ri(){return ut.lFrame.bindingIndex++}function Ea(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,io(s)}function io(i){ut.lFrame.currentDirectiveIndex=i}function wa(){return ut.lFrame.currentQueryIndex}function sc(i){ut.lFrame.currentQueryIndex=i}function Gp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,a){if(a&pt.SkipSelf){let l=s,p=i;for(;!(l=l.parent,null!==l||a&pt.Host||(l=Gp(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;s=l,i=p}const c=ut.lFrame=oc();return c.currentTNode=s,c.lView=i,!0}function so(i){const s=oc(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function oc(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?oo(i):s}function oo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jl(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dh=jl;function Oo(){const i=jl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Zn(){return ut.lFrame.selectedIndex}function ds(i){ut.lFrame.selectedIndex=i}function gn(){const i=ut.lFrame;return fn(i.tView,i.selectedIndex)}function hs(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ia(i,s,a){Kn(i,s,3,a)}function uc(i,s,a,c){(3&i[2])===a&&Kn(i,s,a,c)}function hu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Kn(i,s,a,c){const p=null!=c?c:-1,_=s.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Ah(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Ah(i,s,a,c){const l=a[c]<0,p=a[c+1],E=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class No{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Je(i,s,a){const c=Yt(i);let l=0;for(;l<a.length;){const p=a[l];if("number"==typeof p){if(0!==p)break;l++;const _=a[l++],E=a[l++],I=a[l++];c?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=p,E=a[++l];Vn(_)?c&&i.setProperty(s,_,E):c?i.setAttribute(s,_,E):s.setAttribute(_,E),l++}}return l}function on(i){return 3===i||4===i||6===i}function Vn(i){return 64===i.charCodeAt(0)}function ba(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||ei(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function ei(i,s,a,c,l){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[p+1]=l));if(c===i[p+1])return void(i[p+2]=l)}p++,null!==c&&p++,null!==l&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==l&&i.splice(p++,0,l)}function wr(i){return-1!==i}function At(i){return 32767&i}function ft(i,s){let a=function ti(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Po=!0;function Ls(i){const s=Po;return Po=i,s}let xh=0;function ps(i,s){const a=cr(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Vs(c.data,i),Vs(s,null),Vs(c.blueprint,null));const l=lc(i,s),p=i.injectorIndex;if(wr(l)){const _=At(l),E=ft(l,s),I=E[1].data;for(let T=0;T<8;T++)s[p+T]=E[_+T]|I[_+T]}return s[p+8]=l,p}function Vs(i,s){i.push(0,0,0,0,0,0,0,0,s)}function cr(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function lc(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){const p=l[1],_=p.type;if(c=2===_?p.declTNode:1===_?l[6]:null,null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ir(i,s,a){!function gu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ie)&&(c=a[Ie]),null==c&&(c=a[Ie]=xh++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function ko(i,s,a){if(a&pt.Optional)return i;xe(s,"NodeInjector")}function Fo(i,s,a,c){if(a&pt.Optional&&void 0===c&&(c=null),0==(a&(pt.Self|pt.Host))){const l=i[9],p=vn(void 0);try{return l?l.get(s,c,a&pt.Optional):Ks(s,c,a&pt.Optional)}finally{vn(p)}}return ko(c,s,a)}function Lo(i,s,a,c=pt.Default,l){if(null!==i){const p=function _u(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Ie)?i[Ie]:void 0;return"number"==typeof s?s>=0?255&s:gs:s}(a);if("function"==typeof p){if(!du(s,i,c))return c&pt.Host?ko(l,a,c):Fo(s,a,c,l);try{const _=p(c);if(null!=_||c&pt.Optional)return _;xe(a)}finally{Dh()}}else if("number"==typeof p){let _=null,E=cr(i,s),I=-1,T=c&pt.Host?s[16][6]:null;for((-1===E||c&pt.SkipSelf)&&(I=-1===E?lc(i,s):s[E+8],-1!==I&&Vo(c,!1)?(_=s[1],E=At(I),s=ft(I,s)):E=-1);-1!==E;){const S=s[1];if(hc(p,E,S.data)){const k=an(E,s,a,_,c,T);if(k!==mu)return k}I=s[E+8],-1!==I&&Vo(c,s[1].data[E+8]===T)&&hc(p,E,s)?(_=S,E=At(I),s=ft(I,s)):E=-1}}}return Fo(s,a,c,l)}const mu={};function gs(){return new ms(pn(),Ce())}function an(i,s,a,c,l,p){const _=s[1],E=_.data[i+8],S=yu(E,_,a,null==c?ru(E)&&Po:c!=_&&0!=(3&E.type),l&pt.Host&&p===E);return null!==S?ni(s,_,S,E):mu}function yu(i,s,a,c,l){const p=i.providerIndexes,_=s.data,E=1048575&p,I=i.directiveStart,S=p>>20,B=l?E+S:i.directiveEnd;for(let K=c?E:E+S;K<B;K++){const ve=_[K];if(K<I&&a===ve||K>=I&&ve.type===a)return K}if(l){const K=_[I];if(K&&Qr(K)&&K.type===a)return I}return null}function ni(i,s,a,c){let l=i[a];const p=s.data;if(function qp(i){return i instanceof No}(l)){const _=l;_.resolving&&function Re(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ae(p[a]));const E=Ls(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?vn(_.injectImpl):null;du(i,c,pt.Default);try{l=i[a]=_.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function ac(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:p}=s.type.prototype;if(c){const _=xo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&vn(I),Ls(E),_.resolving=!1,Dh()}}return l}function hc(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Vo(i,s){return!(i&pt.Self||i&pt.Host&&s)}class ms{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Lo(this._tNode,this._lView,s,c,a)}}function Ta(i){return Gn(()=>{const s=i.prototype.constructor,a=s[We]||Aa(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const p=l[We]||Aa(l);if(p&&p!==a)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Aa(i){return He(i)?()=>{const s=Aa(Y(i));return s&&s()}:Jr(i)}function Uo(i){return function dc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const p=a[l];if(on(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(p===s)return a[l+1];l+=2}}}return null}(pn(),i)}const ao="__parameters__";function xa(i,s,a){return Gn(()=>{const c=function Mh(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...p){if(this instanceof l)return c.apply(this,p),this;const _=new l(...p);return E.annotation=_,E;function E(I,T,S){const k=I.hasOwnProperty(ao)?I[ao]:Object.defineProperty(I,ao,{value:[]})[ao];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class mn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Oh=new mn("AnalyzeForEntryComponents");function lr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),lr(c,s)):s!==i&&s.push(c)}return s}function ri(i,s){i.forEach(a=>Array.isArray(a)?ri(a,s):s(a))}function ql(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ho(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Fr(i,s,a){let c=_i(i,s);return c>=0?i[1|c]=a:(c=~c,function yc(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function vc(i,s){const a=_i(i,s);if(a>=0)return i[1|a]}function _i(i,s){return function Wl(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const p=c+(l-c>>1),_=i[p<<a];if(s===_)return p<<a;_>s?l=p:c=p+1}return~(l<<a)}(i,s,1)}const Hs={},vu="__NG_DI_FLAG__",Ra="ngTempTokenPath",C=/\n/gm,x="__source",F=pe({provide:String,useValue:pe});let W;function te(i){const s=W;return W=i,s}function Se(i,s=pt.Default){if(void 0===W)throw new Oe(203,"");return null===W?Ks(i,void 0,s):W.get(i,s&pt.Optional?null:void 0,s)}function Le(i,s=pt.Default){return(function ln(){return Zr}()||Se)(Y(i),s)}function Gt(i){const s=[];for(let a=0;a<i.length;a++){const c=Y(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let l,p=pt.Default;for(let _=0;_<c.length;_++){const E=c[_],I=er(E);"number"==typeof I?-1===I?l=E.token:p|=I:l=E}s.push(Le(l,p))}else s.push(Le(c))}return s}function An(i,s){return i[vu]=s,i.prototype[vu]=s,i}function er(i){return i[vu]}const Vi=An(xa("Inject",i=>({token:i})),-1),Lr=An(xa("Optional"),8),Vr=An(xa("SkipSelf"),4);class Xp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bi(i){return i instanceof Xp?i.changingThisBreaksApplicationSecurity:i}const qo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,td=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function cg(i){const s=function bu(){const i=Ce();return i&&i[12]}();return s?s.sanitize(Sn.URL,i)||"":function Go(i,s){const a=function eg(i){return i instanceof Xp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Bi(i):function Dc(i){return(i=String(i)).match(qo)||i.match(td)?i:"unsafe:"+i}(z(i))}const Zh="__ngContext__";function dr(i,s){i[Zh]=s}function ld(i){const s=function Fa(i){return i[Zh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Qh(i){return i.ngOriginalError}function gg(i,...s){i.error(...s)}class Bn{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=function pg(i){return i&&i.ngErrorLogger||gg}(s);c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Qh(s);for(;a&&Qh(a);)a=Qh(a);return a||null}}const La=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bt))();function g(i){return i instanceof Function?i():i}var ue=(()=>((ue=ue||{})[ue.Important=1]="Important",ue[ue.DashCase=2]="DashCase",ue))();function Xe(i,s){return undefined(i,s)}function _n(i){const s=i[3];return Yr(s)?s[3]:s}function tf(i){return nf(i[13])}function gd(i){return nf(i[4])}function nf(i){for(;null!==i&&!Yr(i);)i=i[4];return i}function Va(i,s,a,c,l){if(null!=c){let p,_=!1;Yr(c)?p=c:mi(c)&&(_=!0,c=c[0]);const E=Zt(c);0===i&&null!==a?null==l?Au(s,a,E):ho(s,a,E,l||null,!0):1===i&&null!==a?ho(s,a,E,l||null,!0):2===i?function JC(i,s,a){const c=hr(i,s);c&&function Ey(i,s,a,c){Yt(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function nA(i,s,a,c,l){const p=a[7];p!==Zt(a)&&Va(s,i,c,p,l);for(let E=10;E<a.length;E++){const I=a[E];bg(I[1],I,i,s,c,p)}}(s,i,p,a,l)}}function ai(i,s,a){if(Yt(i))return i.createElement(s,a);{const c=null!==a?function au(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?i.createElement(s):i.createElementNS(c,s)}}function cE(i,s){const a=i[9],c=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,ks(l,-1)),a.splice(c,1)}function Cg(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&cE(l,c),s>0&&(i[a-1][4]=c[4]);const p=Ho(i,10+s);!function Zo(i,s){bg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function lE(i,s){if(!(256&s[2])){const a=s[11];Yt(a)&&a.destroyNode&&bg(i,s,a,3,null,null),function wi(i){let s=i[13];if(!s)return yd(i[1],i);for(;s;){let a=null;if(mi(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)mi(s)&&yd(s[1],s),s=s[3];null===s&&(s=i),mi(s)&&yd(s[1],s),a=s&&s[4]}s=a}}(s)}}function yd(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function dE(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof No)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=l[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(l)}finally{}}}}(i,s),function yy(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):Zt(s[_]),I=c[l=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],I,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),p+=2}else{const _=c[l=a[p+1]];a[p].call(_)}if(null!==c){for(let p=l+1;p<c.length;p++)c[p]();s[7]=null}}(i,s),1===s[1].type&&Yt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Yr(s[3])){a!==s[3]&&cE(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function _y(i,s,a){return function hE(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===kt.None||l===kt.Emulated)return null}return zn(c,a)}(i,s.parent,a)}function ho(i,s,a,c,l){Yt(i)?i.insertBefore(s,a,c,l):s.insertBefore(a,c,l)}function Au(i,s,a){Yt(i)?i.appendChild(s,a):s.appendChild(a)}function vy(i,s,a,c,l){null!==c?ho(i,s,a,c,l):Au(i,s,a)}function hr(i,s){return Yt(i)?i.parentNode(s):s.parentNode}let QC=function pE(i,s,a){return 40&i.type?zn(i,a):null};function Iy(i,s,a,c){const l=_y(i,c,s),p=s[11],E=function of(i,s,a){return QC(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)vy(p,l,a[I],E,!1);else vy(p,l,a,E,!1)}function Cy(i,s){if(null!==s){const a=s.type;if(3&a)return zn(s,i);if(4&a)return Dy(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Cy(i,c);{const l=i[s.index];return Yr(l)?Dy(-1,l):Zt(l)}}if(32&a)return Xe(s,i)()||Zt(i[s.index]);{const c=gE(i,s);return null!==c?Array.isArray(c)?c[0]:Cy(_n(i[16]),c):Cy(i,s.next)}}return null}function gE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Dy(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return Cy(c,l)}return s[7]}function mE(i,s,a,c,l,p,_){for(;null!=a;){const E=c[a.index],I=a.type;if(_&&0===s&&(E&&dr(Zt(E),c),a.flags|=4),64!=(64&a.flags))if(8&I)mE(i,s,a.child,c,l,p,!1),Va(s,i,l,E,p);else if(32&I){const T=Xe(a,c);let S;for(;S=T();)Va(s,i,l,S,p);Va(s,i,l,E,p)}else 16&I?XC(i,s,c,a,l,p):Va(s,i,l,E,p);a=_?a.projectionNext:a.next}}function bg(i,s,a,c,l,p){mE(a,c,i.firstChild,s,l,p,!1)}function XC(i,s,a,c,l,p){const _=a[16],I=_[6].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Va(s,i,l,I[T],p);else mE(i,s,I,_[3],l,p,!0)}function eD(i,s,a){Yt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ye(i,s,a){Yt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Su(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=s.length;if(l+p===c||i.charCodeAt(l+p)<=32)return l}a=l+1}}const Mt="ng-template";function xu(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==Su(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Ty(i){return 4===i.type&&i.value!==Mt}function tD(i,s,a){return s===(4!==i.type||a?i.value:Mt)}function nD(i,s,a){let c=4;const l=i.attrs||[],p=function rD(i){for(let s=0;s<i.length;s++)if(on(i[s]))return s;return i.length}(l);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!tD(i,I,a)||""===I&&1===s.length){if(tn(c))return!1;_=!0}}else{const T=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!xu(i.attrs,T,a)){if(tn(c))return!1;_=!0}continue}const k=fo(8&c?"class":I,l,Ty(i),a);if(-1===k){if(tn(c))return!1;_=!0;continue}if(""!==T){let B;B=k>p?"":l[k+1].toLowerCase();const K=8&c?B:null;if(K&&-1!==Su(K,T,0)||2&c&&T!==B){if(tn(c))return!1;_=!0}}}}else{if(!_&&!tn(c)&&!tn(I))return!1;if(_&&tn(I))continue;_=!1,c=I|1&c}}return tn(c)||_}function tn(i){return 0==(1&i)}function fo(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let p=!1;for(;l<s.length;){const _=s[l];if(_===i)return l;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++l];for(;"string"==typeof E;)E=s[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=p?1:2}return-1}return function iD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function af(i,s,a=!1){for(let c=0;c<s.length;c++)if(nD(i,s[c],a))return!0;return!1}function Sy(i,s){return i?":not("+s.trim()+")":s}function oD(i){let s=i[0],a=1,c=2,l="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];l+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+_:4&c&&(l+=" "+_);else""!==l&&!tn(_)&&(s+=Sy(p,l),l=""),c=_,p=p||!tn(c);a++}return""!==l&&(s+=Sy(p,l)),s}const It={};function ui(i){uf(Tt(),Ce(),Zn()+i,_a())}function uf(i,s,a,c){if(!c)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ia(s,p,a)}else{const p=i.preOrderHooks;null!==p&&uc(s,p,0,a)}ds(a)}function Tg(i,s){return i<<17|s<<2}function _s(i){return i>>17&32767}function lf(i){return 2|i}function Ua(i){return(131068&i)>>2}function Ry(i,s){return-131069&i|s<<2}function Oy(i){return 1|i}function hf(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],p=a[c+1];if(-1!==p){const _=i.data[p];sc(l),_.contentQueries(2,s[p],p)}}}function Nc(i,s,a,c,l,p,_,E,I,T){const S=s.blueprint.slice();return S[0]=l,S[2]=140|c,Ps(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function vd(i,s,a,c,l){let p=i.data[s];if(null===p)p=function qy(i,s,a,c,l){const p=Fs(),_=tc(),I=i.data[s]=function PE(i,s,a,c,l,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,c,l),function va(){return ut.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=l;const _=function ya(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Er(p,!0),p}function Ed(i,s,a,c){if(0===a)return-1;const l=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function wd(i,s,a){so(s);try{const c=i.viewQuery;null!==c&&ff(1,c,a);const l=i.template;null!==l&&zy(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&hf(i,s),i.staticViewQueries&&ff(2,i.viewQuery,a);const p=i.components;null!==p&&function ME(i,s){for(let a=0;a<s.length;a++)i_(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Oo()}}function Pc(i,s,a,c){const l=s[2];if(256==(256&l))return;so(s);const p=_a();try{Ps(s),function rc(i){return ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&zy(i,s,a,2,c);const _=3==(3&l);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&Ia(s,T,null)}else{const T=i.preOrderHooks;null!==T&&uc(s,T,0,null),hu(s,0)}if(function wD(i){for(let s=tf(i);null!==s;s=gd(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],p=l[3];0==(1024&l[2])&&ks(p,1),l[2]|=1024}}}(s),function Pg(i){for(let s=tf(i);null!==s;s=gd(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Mi(c)&&Pc(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&hf(i,s),!p)if(_){const T=i.contentCheckHooks;null!==T&&Ia(s,T)}else{const T=i.contentHooks;null!==T&&uc(s,T,1),hu(s,1)}!function gD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)ds(~l);else{const p=l,_=a[++c],E=a[++c];Ea(_,p),E(2,s[p])}}}finally{ds(-1)}}(i,s);const E=i.components;null!==E&&function xE(i,s){for(let a=0;a<s.length;a++)r_(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&ff(2,I,c),!p)if(_){const T=i.viewCheckHooks;null!==T&&Ia(s,T)}else{const T=i.viewHooks;null!==T&&uc(s,T,2),hu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ks(s[3],-1))}finally{Oo()}}function RE(i,s,a,c){const l=s[10],p=!_a(),_=Mo(s);try{p&&!_&&l.begin&&l.begin(),_&&wd(i,s,c),Pc(i,s,a,c)}finally{p&&!_&&l.end&&l.end()}}function zy(i,s,a,c,l){const p=Zn(),_=2&c;try{ds(-1),_&&s.length>20&&uf(i,s,20,_a()),a(c,l)}finally{ds(p)}}function OE(i,s,a){!ec()||(function gA(i,s,a,c){const l=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||ps(a,s),dr(c,s);const _=a.initialInputs;for(let E=l;E<p;E++){const I=i.data[E],T=Qr(I);T&&UE(s,a,I);const S=ni(s,i,E,a);dr(S,s),null!==_&&Ng(0,E-l,S,I,0,_),T&&(Wn(a.index,s)[8]=S)}}(i,s,a,zn(a,s)),128==(128&a.flags)&&function mA(i,s,a){const c=a.directiveStart,l=a.directiveEnd,_=a.index,E=function Bl(){return ut.lFrame.currentDirectiveIndex}();try{ds(_);for(let I=c;I<l;I++){const T=i.data[I],S=s[I];io(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&ED(T,S)}}finally{ds(-1),io(E)}}(i,s,a))}function Zy(i,s,a=zn){const c=s.localNames;if(null!==c){let l=s.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(s,i):i[_];i[l++]=E}}}function mD(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ky(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ky(i,s,a,c,l,p,_,E,I,T){const S=20+c,k=S+l,B=function Yy(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:It);return a}(S,k),K="function"==typeof T?T():T;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:E,declTNode:s,data:B.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function NE(i,s,a,c){const l=Fg(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Cd(i).push(c,l.length-1))}function Rg(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function Xy(i,s,a,c){let l=!1;if(ec()){const p=function FE(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];af(a,_.selectors,!1)&&(l||(l=[]),Ir(ps(a,s),i,_.type),Qr(_)?(LE(i,a),l.unshift(_)):l.push(_))}return l}(i,s,a),_=null===c?null:{"":-1};if(null!==p){l=!0,t_(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,T=Ed(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=ba(a.mergedAttrs,k.hostAttrs),n_(i,a,s,T,k),e_(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!E&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function Jy(i,s){const c=s.directiveEnd,l=i.data,p=s.attrs,_=[];let E=null,I=null;for(let T=s.directiveStart;T<c;T++){const S=l[T],k=S.inputs,B=null===p||Ty(s)?null:yA(k,p);_.push(B),E=Rg(k,T,E),I=Rg(S.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function VE(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const p=a[s[l+1]];if(null==p)throw new Oe(-301,!1);c.push(s[l],p)}}}(a,c,_)}return a.mergedAttrs=ba(a.mergedAttrs,a.attrs),l}function vD(i,s,a,c,l,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function pA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(c,l,_)}}function ED(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function LE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function e_(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Qr(s)&&(a[""]=i)}}function t_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function n_(i,s,a,c,l){i.data[c]=l;const p=l.factory||(l.factory=Jr(l.type)),_=new No(p,Qr(l),null);i.blueprint[c]=_,a[c]=_,vD(i,s,0,c,Ed(i,a,l.hostVars,It),l)}function UE(i,s,a){const c=zn(s,i),l=mD(a),p=i[10],_=Ou(i,Nc(i,l,null,a.onPush?64:16,c,s,p,p.createRenderer(c,a),null,null));i[s.index]=_}function po(i,s,a,c,l,p){const _=zn(i,s);!function Og(i,s,a,c,l,p,_){if(null==p)Yt(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const E=null==_?z(p):_(p,c||"",l);Yt(i)?i.setAttribute(s,l,E,a):a?s.setAttributeNS(a,l,E):s.setAttribute(l,E)}}(s[11],_,p,i.value,a,c,l)}function Ng(i,s,a,c,l,p){const _=p[s];if(null!==_){const E=c.setInput;for(let I=0;I<_.length;){const T=_[I++],S=_[I++],k=_[I++];null!==E?c.setInput(a,k,T,S):a[S]=k}}}function yA(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function BE(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function r_(i,s){const a=Wn(s,i);if(Mi(a)){const c=a[1];80&a[2]?Pc(c,a,c.template,a[8]):a[5]>0&&Id(a)}}function Id(i){for(let c=tf(i);null!==c;c=gd(c))for(let l=10;l<c.length;l++){const p=c[l];if(1024&p[2]){const _=p[1];Pc(_,p,_.template,p[8])}else p[5]>0&&Id(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Wn(a[c],i);Mi(l)&&l[5]>0&&Id(l)}}function i_(i,s){const a=Wn(s,i),c=a[1];(function ID(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),wd(c,a,a[8])}function Ou(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function s_(i){for(;i;){i[2]|=64;const s=_n(i);if(wh(i)&&!s)return i;i=s}return null}function o_(i,s,a){const c=s[10];c.begin&&c.begin();try{Pc(i,s,i.template,a)}catch(l){throw Lg(s,l),l}finally{c.end&&c.end()}}function HE(i){!function jE(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=ld(a),l=c[1];RE(l,c,l.template,a)}}(i[8])}function ff(i,s,a){sc(0),s(i,a)}const kg=(()=>Promise.resolve(null))();function Fg(i){return i[7]||(i[7]=[])}function Cd(i){return i.cleanup||(i.cleanup=[])}function Lg(i,s){const a=i[9],c=a?a.get(Bn,null):null;c&&c.handleError(s)}function GE(i,s,a,c,l){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,l,c,E):I[E]=l}}function ja(i,s,a){const c=ro(s,i);!function wg(i,s,a){Yt(i)?i.setValue(s,a):s.textContent=a}(i[11],c,a)}function Vg(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?l=he(l,E):2==p&&(c=he(c,E+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}const Ko=new mn("INJECTOR",-1);class qE{get(s,a=Hs){if(a===Hs){const c=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw c.name="NullInjectorError",c}return a}}const a_=new mn("Set Injector scope."),Dd={},zE={};let u_;function c_(){return void 0===u_&&(u_=new qE),u_}function Bg(i,s=null,a=null,c){const l=pf(i,s,a,c);return l._resolveInjectorDefTypes(),l}function pf(i,s=null,a=null,c){return new WE(i,a,s||c_(),c)}class WE{constructor(s,a,c,l=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ri(a,E=>this.processProvider(E,s,a)),ri([s],E=>this.processInjectorType(E,[],p)),this.records.set(Ko,kc(void 0,this));const _=this.records.get(a_);this.scope=null!=_?_.value:null,this.source=l||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Hs,c=pt.Default){this.assertNotDestroyed();const l=te(this),p=vn(void 0);try{if(!(c&pt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function bd(i){return"function"==typeof i||"object"==typeof i&&i instanceof mn}(s)&&St(s);E=I&&this.injectableDefInScope(I)?kc(Br(s),Dd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&pt.Self?c_():this.parent).get(s,a=c&pt.Optional&&a===Hs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ra]=_[Ra]||[]).unshift(ce(s)),l)throw _;return function wn(i,s,a,c){const l=i[Ra];throw s[x]&&l.unshift(s[x]),i.message=function co(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=ce(s);if(Array.isArray(s))l=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}l=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Ra]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{vn(p),te(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,l)=>s.push(ce(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(s,a,c){if(!(s=Y(s)))return!1;let l=mr(s);const p=null==l&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==c.indexOf(_);if(void 0!==p&&(l=mr(p)),null==l)return!1;if(null!=l.imports&&!E){let S;c.push(_);try{ri(l.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:B,providers:K}=S[k];ri(K,ve=>this.processProvider(ve,B,K||L))}}this.injectorDefTypes.add(_);const I=Jr(_)||(()=>new _);this.records.set(_,kc(I,Dd));const T=l.providers;if(null!=T&&!E){const S=s;ri(T,k=>this.processProvider(k,S,T))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,c){let l=Fc(s=Y(s))?s:Y(s&&s.provide);const p=function Ci(i,s,a){return jg(i)?kc(void 0,i.useValue):kc(d_(i),Dd)}(s);if(Fc(s)||!0!==s.multi)this.records.get(l);else{let _=this.records.get(l);_||(_=kc(void 0,Dd,!0),_.factory=()=>Gt(_.multi),this.records.set(l,_)),l=s,_.multi.push(s)}this.records.set(l,p)}hydrate(s,a){return a.value===Dd&&(a.value=zE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function bD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Br(i){const s=St(i),a=null!==s?s.factory:Jr(i);if(null!==a)return a;if(i instanceof mn)throw new Oe(204,!1);if(i instanceof Function)return function l_(i){const s=i.length;if(s>0)throw function ii(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Oe(204,!1);const a=function zr(i){const s=i&&(i[Si]||i[Wr]);if(s){const a=function Jn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Oe(204,!1)}function d_(i,s,a){let c;if(Fc(i)){const l=Y(i);return Jr(l)||Br(l)}if(jg(i))c=()=>Y(i.useValue);else if(function KE(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Gt(i.deps||[]));else if(function ZE(i){return!(!i||!i.useExisting)}(i))c=()=>Le(Y(i.useExisting));else{const l=Y(i&&(i.useClass||i.provide));if(!function DD(i){return!!i.deps}(i))return Jr(l)||Br(l);c=()=>new l(...Gt(i.deps))}return c}function kc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function jg(i){return null!==i&&"object"==typeof i&&F in i}function Fc(i){return"function"==typeof i}let vs=(()=>{class i{static create(a,c){var l;if(Array.isArray(a))return Bg({name:""},c,a,"");{const p=null!==(l=a.name)&&void 0!==l?l:"";return Bg({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Hs,i.NULL=new qE,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Le(Ko)}),i.__NG_ELEMENT_ID__=-1,i})();function rw(i,s){hs(ld(i)[1],pn())}function qg(i){let s=function I_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(Qr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,"");l=s.\u0275dir}if(l){if(a){c.push(l);const _=i;_.inputs=zg(i.inputs),_.declaredInputs=zg(i.declaredInputs),_.outputs=zg(i.outputs);const E=l.hostBindings;E&&b_(i,E);const I=l.viewQuery,T=l.contentQueries;if(I&&xD(i,I),T&&D_(i,T),re(i.inputs,l.inputs),re(i.declaredInputs,l.declaredInputs),re(i.outputs,l.outputs),Qr(l)&&l.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===qg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function C_(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=ba(l.hostAttrs,a=ba(a,l.hostAttrs))}}(c)}function zg(i){return i===yr?{}:i===L?[]:i}function xD(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function D_(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,p)=>{s(c,l,p),a(c,l,p)}:s}function b_(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let Lc=null;function Nu(){if(!Lc){const i=bt.Symbol;if(i&&i.iterator)Lc=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Lc=c)}}}return Lc}function _f(i){return!!A_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Nu()in i)}function A_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Td(i,s,a,c){const l=Ce();return li(l,Ri(),s)&&(Tt(),po(gn(),l,i,s,a,c)),Td}function M_(i,s,a,c,l,p,_,E){const I=Ce(),T=Tt(),S=i+20,k=T.firstCreatePass?function wf(i,s,a,c,l,p,_,E,I){const T=s.consts,S=vd(s,i,4,_||null,kr(T,E));Xy(s,a,S,kr(T,I)),hs(s,S);const k=S.tViews=Ky(2,S,c,l,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,T,I,s,a,c,l,p,_):T.data[S];Er(k,!1);const B=I[11].createComment("");Iy(T,I,B,k),dr(B,I),Ou(I,I[S]=BE(B,I,B,k)),Ms(k)&&OE(T,I,k),null!=_&&Zy(I,k,E)}function R_(i){return cs(function Vl(){return ut.lFrame.contextLView}(),20+i)}function bf(i,s=pt.Default){const a=Ce();return null===a?Le(i,s):Lo(pn(),a,Y(i),s)}function _w(){throw new Error("invalid")}function Wc(i,s,a){const c=Ce();return li(c,Ri(),s)&&function Ii(i,s,a,c,l,p,_,E){const I=zn(s,a);let S,T=s.inputs;!E&&null!=T&&(S=T[c])?(GE(i,a,S,c,l),ru(s)&&function dA(i,s){const a=Wn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(c=function lA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=_?_(l,s.value||"",c):l,Yt(p)?p.setProperty(I,c,l):Vn(c)||(I.setProperty?I.setProperty(c,l):I[c]=l))}(Tt(),gn(),c,i,s,c[11],a,!1),Wc}function Zc(i,s,a,c,l){const _=l?"class":"style";GE(i,a,s.inputs[_],_,c)}function Qg(i,s,a,c){const l=Ce(),p=Tt(),_=20+i,E=l[11],I=l[_]=ai(E,s,function Hl(){return ut.lFrame.currentNamespace}()),T=p.firstCreatePass?function ND(i,s,a,c,l,p,_){const E=s.consts,T=vd(s,i,2,l,kr(E,p));return Xy(s,a,T,kr(E,_)),null!==T.attrs&&Vg(T,T.attrs,!1),null!==T.mergedAttrs&&Vg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,p,l,0,s,a,c):p.data[_];Er(T,!0);const S=T.mergedAttrs;null!==S&&Je(E,I,S);const k=T.classes;null!==k&&ye(E,I,k);const B=T.styles;null!==B&&eD(E,I,B),64!=(64&T.flags)&&Iy(p,l,I,T),0===function fa(){return ut.lFrame.elementDepthCount}()&&dr(I,l),function Fl(){ut.lFrame.elementDepthCount++}(),Ms(T)&&(OE(p,l,T),function Wy(i,s,a){if(bl(s)){const l=s.directiveEnd;for(let p=s.directiveStart;p<l;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,l)),null!==c&&Zy(l,T)}function G_(){let i=pn();tc()?function nc(){ut.lFrame.isParent=!1}():(i=i.parent,Er(i,!1));const s=i;!function pa(){ut.lFrame.elementDepthCount--}();const a=Tt();a.firstCreatePass&&(hs(a,i),bl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Sh(i){return 0!=(16&i.flags)}(s)&&Zc(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function zp(i){return 0!=(32&i.flags)}(s)&&Zc(a,s,Ce(),s.stylesWithoutHost,!1)}function vw(i,s,a,c){Qg(i,s,a,c),G_()}function q_(){return Ce()}function Jg(i){return!!i&&"function"==typeof i.then}function Kc(i){return!!i&&"function"==typeof i.subscribe}const ww=Kc;function z_(i,s,a,c){const l=Ce(),p=Tt(),_=pn();return function Z_(i,s,a,c,l,p,_,E){const I=Ms(c),S=i.firstCreatePass&&Cd(i),k=s[8],B=Fg(s);let K=!0;if(3&c.type||E){const Ge=zn(c,s),tt=E?E(Ge):Ge,Te=B.length,lt=E?Ot=>E(Zt(Ot[c.index])):c.index;if(Yt(a)){let Ot=null;if(!E&&I&&(Ot=function kD(i,s,a,c){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const _=l[p];if(_===a&&l[p+1]===c){const E=s[7],I=l[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,l,c.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=p,Ot.__ngLastListenerFn__=p,K=!1;else{p=Tf(c,s,k,p,!1);const Kt=a.listen(tt,l,p);B.push(p,Kt),S&&S.push(l,lt,Te,Te+1)}}else p=Tf(c,s,k,p,!0),tt.addEventListener(l,p,_),B.push(p),S&&S.push(l,lt,Te,_)}else p=Tf(c,s,k,p,!1);const ve=c.outputs;let Fe;if(K&&null!==ve&&(Fe=ve[l])){const Ge=Fe.length;if(Ge)for(let tt=0;tt<Ge;tt+=2){const Ds=s[Fe[tt]][Fe[tt+1]].subscribe(p),Xa=B.length;B.push(p,Ds),S&&S.push(l,c.index,Xa,-(Xa+1))}}}(p,l,l[11],_,i,s,!!a,c),z_}function K_(i,s,a,c){try{return!1!==a(c)}catch(l){return Lg(i,l),!1}}function Tf(i,s,a,c,l){return function p(_){if(_===Function)return c;const E=2&i.flags?Wn(i.index,s):s;0==(32&s[2])&&s_(E);let I=K_(s,0,c,_),T=p.__ngNextListenerFn__;for(;T;)I=K_(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return l&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Xg(i=1){return function Oi(i){return(ut.lFrame.contextLView=function bh(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function Aw(i,s,a,c,l){const p=i[a+1],_=null===s;let E=c?_s(p):Ua(p),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];FD(i[E],s)&&(I=!0,i[E+1]=c?Oy(S):lf(S)),E=c?_s(S):Ua(S)}I&&(i[a+1]=c?lf(p):Oy(p))}function FD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&_i(i,s)>=0}function xf(i,s){return function qs(i,s,a,c){const l=Ce(),p=Tt(),_=function ls(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function im(i,s,a,c){const l=i.data;if(null===l[a+1]){const p=l[Zn()],_=function rm(i,s){return s>=i.expandoStartIndex}(i,a);(function Qc(i,s){return 0!=(i.flags&(s?16:32))})(p,c)&&null===s&&!_&&(s=!1),s=function Nw(i,s,a,c){const l=function ic(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=Ud(a=qa(null,i,s,a,c),s.attrs,c),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==l)if(a=qa(l,i,s,a,c),null===p){let I=function sm(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Ua(c))return i[_s(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=qa(null,i,s,I[1],c),I=Ud(I,s.attrs,c),function Pw(i,s,a,c){i[_s(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else p=function kw(i,s,a){let c;const l=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<l;p++)c=Ud(c,i[p].hostAttrs,a);return Ud(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(l,p,s,c),function tr(i,s,a,c,l,p){let _=p?s.classBindings:s.styleBindings,E=_s(_),I=Ua(_);i[c]=a;let S,T=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||_i(k,S)>0)&&(T=!0)}else S=a;if(l)if(0!==I){const B=_s(i[E+1]);i[c+1]=Tg(B,E),0!==B&&(i[B+1]=Ry(i[B+1],c)),i[E+1]=function My(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=Tg(E,0),0!==E&&(i[E+1]=Ry(i[E+1],c)),E=c;else i[c+1]=Tg(I,0),0===E?E=c:i[I+1]=Ry(i[I+1],c),I=c;T&&(i[c+1]=lf(i[c+1])),Aw(i,S,c,!0),Aw(i,S,c,!1),function Tw(i,s,a,c,l){const p=l?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&_i(p,s)>=0&&(a[c+1]=Oy(a[c+1]))}(s,S,i,c,p),_=Tg(E,I),p?s.classBindings=_:s.styleBindings=_}(l,p,s,a,_,c)}}(p,i,_,c),s!==It&&li(l,_,s)&&function Mf(i,s,a,c,l,p,_,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];Rf(function yE(i){return 1==(1&i)}(T)?$i(I,s,a,l,Ua(T),_):void 0)||(Rf(p)||function cf(i){return 2==(2&i)}(T)&&(p=$i(I,null,a,l,E,_)),function rA(i,s,a,c,l){const p=Yt(i);if(s)l?p?i.addClass(a,c):a.classList.add(c):p?i.removeClass(a,c):a.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:ue.DashCase;if(null==l)p?i.removeStyle(a,c,_):a.style.removeProperty(c);else{const E="string"==typeof l&&l.endsWith("!important");E&&(l=l.slice(0,-10),_|=ue.Important),p?i.setStyle(a,c,l,_):a.style.setProperty(c,l,E?"important":"")}}}(c,_,ro(Zn(),a),l,p))}(p,p.data[Zn()],l,l[11],i,l[_+1]=function Vw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Bi(i)))),i}(s,a),c,_)}(i,s,null,!0),xf}function qa(i,s,a,c,l){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],c=Ud(c,p.hostAttrs,l),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Ud(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?l=_:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Fr(i,_,!!a||s[++p]))}return void 0===i?null:i}function $i(i,s,a,c,l,p){const _=null===s;let E;for(;l>0;){const I=i[l],T=Array.isArray(I),S=T?I[1]:I,k=null===S;let B=a[l+1];B===It&&(B=k?L:void 0);let K=k?vc(B,c):S===c?B:void 0;if(T&&!Rf(K)&&(K=vc(I,c)),Rf(K)&&(E=K,_))return E;const ve=i[l+1];l=_?_s(ve):Ua(ve)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=vc(I,c))}return E}function Rf(i){return void 0!==i}function Uw(i,s=""){const a=Ce(),c=Tt(),l=i+20,p=c.firstCreatePass?vd(c,l,1,s,null):c.data[l],_=a[l]=function rf(i,s){return Yt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Iy(c,a,_,p),Er(p,!1)}function sv(i){return Bd("",i,""),sv}function Bd(i,s,a){const c=Ce(),l=function ku(i,s,a,c){return li(i,Ri(),a)?s+z(a)+c:It}(c,i,s,a);return l!==It&&ja(c,Zn(),l),Bd}const Vu=void 0;var _t=["en",[["a","p"],["AM","PM"],Vu],[["AM","PM"],Vu,Vu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vu,"{1} 'at' {0}",Vu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sr(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Xc={};function om(i){const s=function GD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Yw(s);if(a)return a;const c=s.split("-")[0];if(a=Yw(c),a)return a;if("en"===c)return _t;throw new Error(`Missing locale data for the locale "${i}".`)}function qt(i){return om(i)[ct.PluralCase]}function Yw(i){return i in Xc||(Xc[i]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[i]),Xc[i]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const mo="en-US";let Qw=mo;function Hn(i,s,a,c,l){if(i=Y(i),Array.isArray(i))for(let p=0;p<i.length;p++)Hn(i[p],s,a,c,l);else{const p=Tt(),_=Ce();let E=Fc(i)?i:Y(i.provide),I=d_(i);const T=pn(),S=1048575&T.providerIndexes,k=T.directiveStart,B=T.providerIndexes>>20;if(Fc(i)||!i.multi){const K=new No(I,l,bf),ve=Tv(E,s,l?S:S+B,k);-1===ve?(Ir(ps(T,_),p,E),eh(p,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(K),_.push(K)):(a[ve]=K,_[ve]=K)}else{const K=Tv(E,s,S+B,k),ve=Tv(E,s,S,S+B),Fe=K>=0&&a[K],Ge=ve>=0&&a[ve];if(l&&!Ge||!l&&!Fe){Ir(ps(T,_),p,E);const tt=function gI(i,s,a,c,l){const p=new No(i,a,bf);return p.multi=[],p.index=s,p.componentProviders=0,jf(p,l,c&&!a),p}(l?eb:Av,a.length,l,c,I);!l&&Ge&&(a[ve].providerFactory=tt),eh(p,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(tt),_.push(tt)}else eh(p,i,K>-1?K:ve,jf(a[l?ve:K],I,!l&&c));!l&&c&&Ge&&a[ve].componentProviders++}}}function eh(i,s,a,c){const l=Fc(s),p=function h_(i){return!!i.useClass}(s);if(l||p){const I=(p?Y(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[c,I]):T[S+1].push(c,I)}else T.push(a,I)}}}function jf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Tv(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function Av(i,s,a,c){return ym(this.multi,[])}function eb(i,s,a,c){const l=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ni(a,a[1],this.providerFactory.index,c);p=E.slice(0,_),ym(l,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],ym(l,p);return p}function ym(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function th(i,s=[]){return a=>{a.providersResolver=(c,l)=>function XD(i,s,a){const c=Tt();if(c.firstCreatePass){const l=Qr(i);Hn(a,c.data,c.blueprint,l,!0),Hn(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Sv{}class Mv{resolveComponentFactory(s){throw function mI(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Hf=(()=>{class i{}return i.NULL=new Mv,i})();function rr(){return Rt(pn(),Ce())}function Rt(i,s){return new nh(zn(i,s))}let nh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=rr,i})();function yI(i){return i instanceof nh?i.nativeElement:i}class $f{}let $r=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function _I(){const i=Ce(),a=Wn(pn().index,i);return function Dn(i){return i[11]}(mi(a)?a:i)}(),i})(),rh=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class vI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ws=new vI("13.2.1"),Rv={};function ih(i,s,a,c,l=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(Zt(p)),Yr(p))for(let E=10;E<p.length;E++){const I=p[E],T=I[1].firstChild;null!==T&&ih(I[1],I,T,c)}const _=a.type;if(8&_)ih(i,s,a.child,c);else if(32&_){const E=Xe(a,s);let I;for(;I=E();)c.push(I)}else if(16&_){const E=gE(s,a);if(Array.isArray(E))c.push(...E);else{const I=_n(s[16]);ih(I[1],I,E,c,!0)}}a=l?a.projectionNext:a.next}return c}class Gf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ih(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Yr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Cg(s,c),Ho(a,c))}this._attachedToViewContainer=!1}lE(this._lView[1],this._lView)}onDestroy(s){NE(this._lView[1],this._lView,null,s)}markForCheck(){s_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){o_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ba(i,s,a){Ro(!0);try{o_(i,s,a)}finally{Ro(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function md(i,s){bg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=s}}class tb extends Gf{constructor(s){super(s),this._view=s}detectChanges(){HE(this._view)}checkNoChanges(){!function et(i){Ro(!0);try{HE(i)}finally{Ro(!1)}}(this._view)}get context(){return null}}class Qt extends Hf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=kn(s);return new sh(a,this.ngModule)}}function EI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const qf=new mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>La});class sh extends Sv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function aD(i){return i.map(oD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return EI(this.componentDef.inputs)}get outputs(){return EI(this.componentDef.outputs)}create(s,a,c,l){const p=(l=l||this.ngModule)?function zf(i,s){return{get:(a,c,l)=>{const p=i.get(a,Rv,l);return p!==Rv||c===Rv?p:s.get(a,c,l)}}}(s,l.injector):s,_=p.get($f,la),E=p.get(rh,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=c?function Qy(i,s,a){if(Yt(i))return i.selectRootElement(s,a===kt.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(I,c,this.componentDef.encapsulation):ai(_.createRenderer(null,this.componentDef),T,function vm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,B=function w_(i,s){return{components:[],scheduler:i||La,clean:kg,playerHandler:s||null,flags:0}}(),K=Ky(0,null,null,1,0,null,null,null,null,null),ve=Nc(null,K,B,k,null,null,_,I,E,p);let Fe,Ge;so(ve);try{const tt=function $g(i,s,a,c,l,p){const _=a[1];a[20]=i;const I=vd(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Vg(I,T,!0),null!==i&&(Je(l,i,T),null!==I.classes&&ye(l,i,I.classes),null!==I.styles&&eD(l,i,I.styles)));const S=c.createRenderer(i,s),k=Nc(a,mD(s),null,s.onPush?64:16,a[20],I,c,S,p||null,null);return _.firstCreatePass&&(Ir(ps(I,a),_,s.type),LE(_,I),t_(I,a.length,1)),Ou(a,k),a[20]=k}(S,this.componentDef,ve,_,I);if(S)if(c)Je(I,S,["ng-version",ws.full]);else{const{attrs:Te,classes:lt}=function uD(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===l?""!==p&&s.push(p,i[++c]):8===l&&a.push(p);else{if(!tn(l))break;l=p}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&Je(I,S,Te),lt&&lt.length>0&&ye(I,S,lt.join(" "))}if(Ge=fn(K,20),void 0!==a){const Te=Ge.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const Ot=a[lt];Te.push(null!=Ot?Array.from(Ot):null)}}Fe=function Gg(i,s,a,c,l){const p=a[1],_=function fA(i,s,a){const c=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),n_(i,c,s,Ed(i,s,1,null),a));const l=ni(s,i,c.directiveStart,c);dr(l,s);const p=zn(c,s);return p&&dr(p,s),l}(p,a,s);if(c.components.push(_),i[8]=_,l&&l.forEach(I=>I(_,s)),s.contentQueries){const I=pn();s.contentQueries(1,_,I.directiveStart)}const E=pn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ds(E.index),vD(a[1],E,0,E.directiveStart,E.directiveEnd,s),ED(s,_)),_}(tt,this.componentDef,ve,B,[rw]),wd(K,ve,null)}finally{Oo()}return new II(this.componentType,Fe,Rt(Ge,ve),ve,Ge)}}class II extends class ol{}{constructor(s,a,c,l,p){super(),this.location=c,this._rootLView=l,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new tb(l),this.componentType=s}get injector(){return new ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class al{}class Ov{}const oh=new Map;class Em extends al{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qt(this);const c=Fn(s);this._bootstrapComponents=g(c.bootstrap),this._r3Injector=pf(s,a,[{provide:al,useValue:this},{provide:Hf,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=vs.THROW_IF_NOT_FOUND,c=pt.Default){return s===vs||s===al||s===Ko?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class wm extends Ov{constructor(s){super(),this.moduleType=s,null!==Fn(s)&&function Wf(i){const s=new Set;!function a(c){const l=Fn(c,!0),p=l.id;null!==p&&(function CI(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,oh.get(p),c),oh.set(p,c));const _=g(l.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Em(this.moduleType,s)}}function Im(i,s,a,c,l,p){const _=s+a;return li(i,_,l)?function $s(i,s,a){return i[s]=a}(i,_+1,p?c.call(p,l):c(l)):function Za(i,s){const a=i[s];return a===It?void 0:a}(i,_+1)}function MI(i,s){const a=Tt();let c;const l=i+20;a.firstCreatePass?(c=function RI(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,c.onDestroy)):c=a.data[l];const p=c.factory||(c.factory=Jr(c.type)),_=vn(bf);try{const E=Ls(!1),I=p();return Ls(E),function bi(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Ce(),l,I),I}finally{vn(_)}}function OI(i,s,a){const c=i+20,l=Ce(),p=cs(l,c);return function Yf(i,s){return i[1].data[s].pure}(l,c)?Im(l,function Ln(){const i=ut.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,p.transform,a,p):p.transform(a)}function Cm(i){return s=>{setTimeout(i,void 0,s)}}const sn=class cb extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var l,p,_;let E=s,I=a||(()=>null),T=c;if(s&&"object"==typeof s){const k=s;E=null===(l=k.next)||void 0===l?void 0:l.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=Cm(I),E&&(E=Cm(E)),T&&(T=Cm(T)));const S=super.subscribe({next:E,error:I,complete:T});return s instanceof Q.w0&&s.add(S),S}};function lb(){return this._results[Nu()]()}class Dm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Nu(),c=Dm.prototype;c[a]||(c[a]=lb)}get changes(){return this._changes||(this._changes=new sn)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=lr(s);(this._changesDetected=!function Ma(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],p=s[c];if(a&&(l=a(l),p=a(p)),p!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wi=(()=>{class i{}return i.__NG_ELEMENT_ID__=ju,i})();const db=Wi,Is=class extends db{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=Nc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(a)),wd(a,c,s),new Gf(c)}};function ju(){return nn(pn(),Ce())}function nn(i,s){return 4&i.type?new Is(s,i,Rt(i,s)):null}let gr=(()=>{class i{}return i.__NG_ELEMENT_ID__=hb,i})();function hb(){return xr(pn(),Ce())}const fb=gr,Rn=class extends fb{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Rt(this._hostTNode,this._hostLView)}get injector(){return new ms(this._hostTNode,this._hostLView)}get parentInjector(){const s=lc(this._hostTNode,this._hostLView);if(wr(s)){const a=ft(s,this._hostLView),c=At(s);return new ms(a[1].data[c+8],a)}return new ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=_o(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const l=s.createEmbeddedView(a||{});return this.insert(l,c),l}createComponent(s,a,c,l,p){const _=s&&!function jo(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,c=k.injector,l=k.projectableNodes,p=k.ngModuleRef}const I=_?s:new sh(kn(s)),T=c||this.parentInjector;if(!p&&null==I.ngModule&&T){const k=T.get(al,null);k&&(p=k)}const S=I.create(T,l,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const c=s._lView,l=c[1];if(function Xu(i){return Yr(i[3])}(c)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=c[3],B=new Rn(k,k[6],k[3]);B.detach(B.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function KC(i,s,a,c){const l=10+c,p=a.length;c>0&&(a[l-1][4]=s),c<p-10?(s[4]=a[l],ql(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function YC(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(l,c,_,p);const E=Dy(p,_),I=c[11],T=hr(I,_[7]);return null!==T&&function sf(i,s,a,c,l,p){c[0]=l,c[6]=s,bg(i,c,a,1,l,p)}(l,_[6],I,c,T,E),s.attachToViewContainerRef(),ql(hi(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=_o(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Cg(this._lContainer,a);c&&(Ho(hi(this._lContainer),a),lE(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Cg(this._lContainer,a);return c&&null!=Ho(hi(this._lContainer),a)?new Gf(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function _o(i){return i[8]}function hi(i){return i[8]||(i[8]=[])}function xr(i,s){let a;const c=s[i.index];if(Yr(c))a=c;else{let l;if(8&i.type)l=Zt(c);else{const p=s[11];l=p.createComment("");const _=zn(i,s);ho(p,hr(p,_),l,function fE(i,s){return Yt(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=BE(c,s,l,i),Ou(s,a)}return new Rn(a,i,s)}class $u{constructor(s){this.queryList=s,this.matches=null}clone(){return new $u(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gu{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);l.push(this.queries[_.indexInDeclarationView].clone())}return new Gu(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Vv(s,a).matches&&this.queries[a].setDirty()}}class Zi{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Ki{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,l);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Ki(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Yi{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Yi(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const p=c[l];this.matchTNodeWithReadOption(s,a,Mr(a,p)),this.matchTNodeWithReadOption(s,a,yu(a,s,p,!1,!1))}else c===Wi?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,yu(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===nh||l===gr||l===Wi&&4&a.type)this.addMatch(a.index,-2);else{const p=yu(a,s,l,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Mr(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function PI(i,s,a,c){return-1===a?function NI(i,s){return 11&i.type?Rt(i,s):4&i.type?nn(i,s):null}(s,i):-2===a?function pb(i,s,a){return a===nh?Rt(s,i):a===Wi?nn(s,i):a===gr?xr(s,i):void 0}(i,s,c):ni(i,i[1],a,s)}function Lv(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:PI(s,p[T],_[I+1],a.metadata.read))}l.matches=E}return l.matches}function bm(i,s,a,c){const l=i.queries.getByIndex(a),p=l.matches;if(null!==p){const _=Lv(i,s,l,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(_[E/2]);else{const T=p[E+1],S=s[-I];for(let k=10;k<S.length;k++){const B=S[k];B[17]===B[3]&&bm(B[1],B,T,c)}if(null!==S[9]){const k=S[9];for(let B=0;B<k.length;B++){const K=k[B];bm(K[1],K,T,c)}}}}}return c}function ge(i){const s=Ce(),a=Tt(),c=wa();sc(c+1);const l=Vv(a,c);if(i.dirty&&Mo(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const p=l.crossesNgTemplate?bm(a,s,c,[]):Lv(a,s,l,c);i.reset(p,yI),i.notifyOnChanges()}return!0}return!1}function Qf(i,s,a){const c=Tt();c.firstCreatePass&&(FI(c,new Zi(i,s,a),-1),2==(2&s)&&(c.staticViewQueries=!0)),qu(c,Ce(),s)}function Ws(i,s,a,c){const l=Tt();if(l.firstCreatePass){const p=pn();FI(l,new Zi(s,a,c),p.index),function cl(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}qu(l,Ce(),a)}function kI(){return function Jf(i,s){return i[19].queries[s].queryList}(Ce(),wa())}function qu(i,s,a){const c=new Dm(4==(4&a));NE(i,s,c,c.destroy),null===s[19]&&(s[19]=new Gu),s[19].queries.push(new $u(c))}function FI(i,s,a){null===i.queries&&(i.queries=new Ki),i.queries.track(new Yi(s,a))}function Vv(i,s){return i.queries.getByIndex(s)}function Tm(i,s){return nn(i,s)}function vo(...i){}const up=new mn("Application Initializer");let fl=(()=>{class i{constructor(a){this.appInits=a,this.resolve=vo,this.reject=vo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(Jg(p))a.push(p);else if(ww(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Le(up,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const qI=new mn("AppId"),Db={provide:qI,useFactory:function Cb(){return`${Qv()}${Qv()}${Qv()}`},deps:[]};function Qv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cp=new mn("Platform Initializer"),pl=new mn("Platform ID"),Jv=new mn("appBootstrapListener");let zI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const lp=new mn("LocaleId"),Ya=new mn("DefaultCurrencyCode");class e0{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let dp=(()=>{class i{compileModuleSync(a){return new wm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=g(Fn(a).declarations).reduce((_,E)=>{const I=kn(E);return I&&_.push(new sh(I)),_},[]);return new e0(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const n0=(()=>Promise.resolve(0))();function r0(i){"undefined"==typeof Zone?n0.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ti{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sn(!1),this.onMicrotaskEmpty=new sn(!1),this.onStable=new sn(!1),this.onError=new sn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Tb(){let i=bt.requestAnimationFrame,s=bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function KI(i){const s=()=>{!function ZI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(bt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,fp(i),i.isCheckStableRunning=!0,s0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),fp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,p,_,E)=>{try{return YI(i),a.invokeTask(l,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),o0(i)}},onInvoke:(a,c,l,p,_,E,I)=>{try{return YI(i),a.invoke(l,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),o0(i)}},onHasTask:(a,c,l,p)=>{a.hasTask(l,p),c===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,fp(i),s0(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,l,p)=>(a.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ti.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ti.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+l,s,WI,vo,vo);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const WI={};function s0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function fp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function YI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function o0(i){i._nesting--,s0(i)}class Ab{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sn,this.onMicrotaskEmpty=new sn,this.onStable=new sn,this.onError=new sn}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}let a0=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ti.assertNotInAngularZone(),r0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())r0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Le(Ti))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),QI=(()=>{class i{constructor(){this._applications=new Map,pp.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return pp.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();class fh{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function ph(i){pp=i}let Ji,pp=new fh;const Om=new mn("AllowMultipleToken");class Mb{constructor(s,a){this.name=s,this.token=a}}function XI(i,s,a=[]){const c=`Platform: ${s}`,l=new mn(c);return(p=[])=>{let _=eC();if(!_||_.injector.get(Om,!1))if(i)i(a.concat(p).concat({provide:l,useValue:!0}));else{const E=a.concat(p).concat({provide:l,useValue:!0},{provide:a_,useValue:"platform"});!function u0(i){if(Ji&&!Ji.destroyed&&!Ji.injector.get(Om,!1))throw new Oe(400,"");Ji=i.get(Nm);const s=i.get(cp,null);s&&s.forEach(a=>a())}(vs.create({providers:E,name:c}))}return function c0(i){const s=eC();if(!s)throw new Oe(401,"");return s}()}}function eC(){return Ji&&!Ji.destroyed?Ji:null}let Nm=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const E=function Rr(i,s){let a;return a="noop"===i?new Ab:("zone.js"===i?void 0:i)||new Ti({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Ti,useValue:E}];return E.run(()=>{const T=vs.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),k=S.injector.get(Bn,null);if(!k)throw new Oe(402,"");return E.runOutsideAngular(()=>{const B=E.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{l0(this._modules,S),B.unsubscribe()})}),function Rb(i,s,a){try{const c=a();return Jg(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,E,()=>{const B=S.injector.get(fl);return B.runInitializers(),B.donePromise.then(()=>(function el(i){nt(i,"Expected localeId to be defined"),"string"==typeof i&&(Qw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(lp,mo)||mo),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,c=[]){const l=tC({},c);return function JI(i,s,a){const c=new wm(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(a){const c=a.injector.get(gp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Le(vs))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function tC(i,s){return Array.isArray(s)?s.reduce(tC,i):Object.assign(Object.assign({},i),s)}let gp=(()=>{class i{constructor(a,c,l,p,_){this._zone=a,this._injector=c,this._exceptionHandler=l,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),I=new N.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ti.assertNotInAngularZone(),r0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ti.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,de.T)(E,I.pipe((0,ee.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Oe(405,"");let l;l=a instanceof Sv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(l.componentType);const p=function xb(i){return i.isBoundToModule}(l)?void 0:this._injector.get(al),E=l.create(vs.NULL,[],c||l.selector,p),I=E.location.nativeElement,T=E.injector.get(a0,null),S=T&&E.injector.get(QI);return T&&S&&S.registerApplication(I,T),E.onDestroy(()=>{this.detachView(E.hostView),l0(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;l0(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Jv,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Le(Ti),Le(vs),Le(Bn),Le(Hf),Le(fl))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function l0(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Pm=!0,d0=!1;function rC(){return d0=!0,Pm}function h0(){if(d0)throw new Error("Cannot enable prod mode after platform setup.");Pm=!1}let p0=(()=>{class i{}return i.__NG_ELEMENT_ID__=g0,i})();function g0(i){return function m0(i,s,a){if(ru(i)&&!a){const c=Wn(i.index,s);return new Gf(c,c)}return 47&i.type?new Gf(s[16],s):null}(pn(),Ce(),16==(16&i))}class Qa{constructor(){}supports(s){return _f(s)}create(s){return new Vb(s)}}const cC=(i,s)=>s;class Vb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||cC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<lC(c,l,p)?a:c,E=lC(_,l,p),I=_.currentIndex;if(_===c)l--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)l++;else{p||(p=[]);const T=E-l,S=I-l;if(T!=S){for(let B=0;B<T;B++){const K=B<p.length?p[B]:p[B]=0,ve=K+B;S<=ve&&ve<T&&(p[B]=K+1)}p[_.previousIndex]=S-T}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!_f(s))throw new Oe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,p,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else l=0,function RD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Nu()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{_=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,l)):s=this._addAfter(new w0(a,c),p,l),s}_verifyReinsertion(s,a,c,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,p=s._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Bm),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class w0{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ub{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Bm{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Ub,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lC(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class jm{constructor(){}supports(s){return s instanceof Map||A_(s)}create(){return new Hm}}class Hm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||A_(s)))throw new Oe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const p=l._prev,_=l._next;return p&&(p._next=_),_&&(_._prev=p),l._next=null,l._prev=null,l}const c=new I0(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class I0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function C0(){return new Ja([new Qa])}let Ja=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||C0()),deps:[[i,new Vr,new Lr]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Oe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:C0}),i})();function hC(){return new $m([new jm])}let $m=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||hC()),deps:[[i,new Vr,new Lr]]}}find(a){const c=this.factories.find(p=>p.supports(a));if(c)return c;throw new Oe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:hC}),i})();const fC=[new jm],Bb=new Ja([new Qa]),D0=new $m(fC),b0=XI(null,"core",[{provide:pl,useValue:"unknown"},{provide:Nm,deps:[vs]},{provide:QI,deps:[]},{provide:zI,deps:[]}]),gC=[{provide:gp,useClass:gp,deps:[Ti,vs,Bn,Hf,fl]},{provide:qf,deps:[Ti],useFactory:function S0(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:fl,useClass:fl,deps:[[new Lr,up]]},{provide:dp,useClass:dp,deps:[]},Db,{provide:Ja,useFactory:function jb(){return Bb},deps:[]},{provide:$m,useFactory:function T0(){return D0},deps:[]},{provide:lp,useFactory:function Hb(i){return i||function A0(){return"undefined"!=typeof $localize&&$localize.locale||mo}()},deps:[[new Vi(lp),new Lr,new Vr]]},{provide:Ya,useValue:"USD"}];let x0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Le(gp))},i.\u0275mod=rn({type:i}),i.\u0275inj=Ht({providers:gC}),i})()},3942:(it,Ae,P)=>{"use strict";P.d(Ae,{Z:()=>Oe});var f=P(2090),Q=P(4859),N=P(9681),de=P(1877);class ee{constructor(z,ae){this._delegate=z,this.firebase=ae,(0,N._addComponent)(z,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=z.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this._delegate.automaticDataCollectionEnabled=z}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(z=>{this._delegate.checkDestroyed(),z()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(z,ae=N._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const be=this._delegate.container.getProvider(z);return!be.isInitialized()&&"EXPLICIT"===(null===(Re=be.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&be.initialize(),be.getImmediate({identifier:ae})}_removeServiceInstance(z,ae=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(z).clearInstance(ae)}_addComponent(z){(0,N._addComponent)(this._delegate,z)}_addOrOverwriteComponent(z){(0,N._addOrOverwriteComponent)(this._delegate,z)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Be=function ce(Be){const z={},ae={__esModule:!0,initializeApp:function X($e,ie={}){const Z=N.initializeApp($e,ie);if((0,f.r3)(z,Z.name))return z[Z.name];const ne=new Be(Z,ae);return z[Z.name]=ne,ne},app:be,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function we($e){const ie=$e.name,Z=ie.replace("-compat","");if(N._registerComponent($e)&&"PUBLIC"===$e.type){const ne=(me=be())=>{if("function"!=typeof me[Z])throw re.create("invalid-app-argument",{appName:ie});return me[Z]()};void 0!==$e.serviceProps&&(0,f.ZB)(ne,$e.serviceProps),ae[Z]=ne,Be.prototype[Z]=function(...me){return this._getService.bind(this,ie).apply(this,$e.multipleInstances?me:[])}}return"PUBLIC"===$e.type?ae[Z]:null},removeApp:function Re($e){delete z[$e]},useAsService:function qe($e,ie){return"serverAuth"===ie?null:ie},modularAPIs:N}};function be($e){if(!(0,f.r3)(z,$e=$e||N._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:$e});return z[$e]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function xe(){return Object.keys(z).map($e=>z[$e])}}),be.App=Be,ae}(ee);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function z(ae){(0,f.ZB)(Be,ae)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Be}(),V=new de.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=U;!function De(Be){(0,N.registerVersion)("@firebase/app-compat","0.1.19",Be)}()},9681:(it,Ae,P)=>{"use strict";P.r(Ae),P.d(Ae,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Si,_DEFAULT_ENTRY_NAME:()=>nt,_addComponent:()=>Qn,_addOrOverwriteComponent:()=>Jt,_apps:()=>cn,_clearComponents:()=>es,_components:()=>Vt,_getProvider:()=>Ht,_registerComponent:()=>qr,_removeServiceInstance:()=>St,deleteApp:()=>pt,getApp:()=>Wr,getApps:()=>xi,initializeApp:()=>As,onLog:()=>vn,registerVersion:()=>ln,setLogLevel:()=>Ks});var f=P(5861),Q=P(4859),N=P(1877),de=P(2090),ee=P(2940);class pe{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function re(Ie){const _e=Ie.getComponent();return"VERSION"===(null==_e?void 0:_e.type)}(Ue)){const Qe=Ue.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Ue=>Ue).join(" ")}}const ce="@firebase/app",U=new N.Yd("@firebase/app"),nt="[DEFAULT]",gt={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Vt=new Map;function Qn(Ie,_e){try{Ie.container.addComponent(_e)}catch(Ue){U.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ie.name}`,Ue)}}function Jt(Ie,_e){Ie.container.addOrOverwriteComponent(_e)}function qr(Ie){const _e=Ie.name;if(Vt.has(_e))return U.debug(`There were multiple attempts to register component ${_e}.`),!1;Vt.set(_e,Ie);for(const Ue of cn.values())Qn(Ue,Ie);return!0}function Ht(Ie,_e){const Ue=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),Ie.container.getProvider(_e)}function St(Ie,_e,Ue=nt){Ht(Ie,_e).clearInstance(Ue)}function es(){Vt.clear()}const Jn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class mr{constructor(_e,Ue,Qe){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const Si="9.6.8";function As(Ie,_e={}){"object"!=typeof _e&&(_e={name:_e});const Ue=Object.assign({name:nt,automaticDataCollectionEnabled:!1},_e),Qe=Ue.name;if("string"!=typeof Qe||!Qe)throw Jn.create("bad-app-name",{appName:String(Qe)});const wt=cn.get(Qe);if(wt){if((0,de.vZ)(Ie,wt.options)&&(0,de.vZ)(Ue,wt.config))return wt;throw Jn.create("duplicate-app",{appName:Qe})}const ot=new Q.H0(Qe);for(const rn of Vt.values())ot.addComponent(rn);const $t=new mr(Ie,Ue,ot);return cn.set(Qe,$t),$t}function Wr(Ie=nt){const _e=cn.get(Ie);if(!_e)throw Jn.create("no-app",{appName:Ie});return _e}function xi(){return Array.from(cn.values())}function pt(Ie){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(Ie){const _e=Ie.name;cn.has(_e)&&(cn.delete(_e),yield Promise.all(Ie.container.getProviders().map(Ue=>Ue.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function ln(Ie,_e,Ue){var Qe;let wt=null!==(Qe=gt[Ie])&&void 0!==Qe?Qe:Ie;Ue&&(wt+=`-${Ue}`);const ot=wt.match(/\s|\//),$t=_e.match(/\s|\//);if(ot||$t){const rn=[`Unable to register library "${wt}" with version "${_e}":`];return ot&&rn.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),ot&&$t&&rn.push("and"),$t&&rn.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void U.warn(rn.join(" "))}qr(new Q.wA(`${wt}-version`,()=>({library:wt,version:_e}),"VERSION"))}function vn(Ie,_e){if(null!==Ie&&"function"!=typeof Ie)throw Jn.create("invalid-log-argument");(0,N.Am)(Ie,_e)}function Ks(Ie){(0,N.Ub)(Ie)}const dn="firebase-heartbeat-store";let pi=null;function Ys(){return pi||(pi=(0,ee.openDb)("firebase-heartbeat-database",1,Ie=>{0===Ie.oldVersion&&Ie.createObjectStore(dn)}).catch(Ie=>{throw Jn.create("storage-open",{originalErrorMessage:Ie.message})})),pi}function rt(){return(rt=(0,f.Z)(function*(Ie){try{return(yield Ys()).transaction(dn).objectStore(dn).get(ts(Ie))}catch(_e){throw Jn.create("storage-get",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function ht(Ie,_e){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(Ie,_e){try{const Qe=(yield Ys()).transaction(dn,"readwrite");return yield Qe.objectStore(dn).put(_e,ts(Ie)),Qe.complete}catch(Ue){throw Jn.create("storage-set",{originalErrorMessage:Ue.message})}})).apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(Ie){try{const Ue=(yield Ys()).transaction(dn,"readwrite");return yield Ue.objectStore(dn).delete(ts(Ie)),Ue.complete}catch(_e){throw Jn.create("storage-delete",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function ts(Ie){return`${Ie.name}!${Ie.options.appId}`}class L{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new Ee(Ue),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var _e=this;return(0,f.Z)(function*(){const Qe=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=function j(){return(new Date).toISOString().substring(0,10)}();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),!_e._heartbeatsCache.some(ot=>ot.date===wt))return _e._heartbeatsCache.push({date:wt,userAgent:Qe}),_e._heartbeatsCache=_e._heartbeatsCache.filter(ot=>{const $t=new Date(ot.date).valueOf();return Date.now()-$t<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,f.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache)return"";const{heartbeatsToSend:Ue,unsentEntries:Qe}=function $(Ie,_e=1024){const Ue=[];let Qe=Ie.slice();for(const wt of Ie){const ot=Ue.find($t=>$t.userAgent===wt.userAgent);if(ot){if(ot.dates.push(wt.date),J(Ue)>_e){ot.dates.pop();break}}else if(Ue.push({userAgent:wt.userAgent,dates:[wt.date]}),J(Ue)>_e){Ue.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:Qe}}(_e._heartbeatsCache),wt=(0,de.h$)(JSON.stringify({version:2,heartbeats:Ue}));return Qe.length>0?(_e._heartbeatsCache=Qe,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache=null,_e._storage.deleteAll()),wt})()}}class Ee{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,f.Z)(function*(){if(yield _e._canUseIndexedDBPromise){const Qe=yield function kt(Ie){return rt.apply(this,arguments)}(_e.app);return(null==Qe?void 0:Qe.heartbeats)||[]}return[]})()}overwrite(_e){var Ue=this;return(0,f.Z)(function*(){if(yield Ue._canUseIndexedDBPromise)return ht(Ue.app,{heartbeats:_e})})()}add(_e){var Ue=this;return(0,f.Z)(function*(){if(yield Ue._canUseIndexedDBPromise){const wt=yield Ue.read();return ht(Ue.app,{heartbeats:[...wt,..._e]})}})()}delete(_e){var Ue=this;return(0,f.Z)(function*(){if(yield Ue._canUseIndexedDBPromise){const wt=yield Ue.read();return ht(Ue.app,{heartbeats:wt.filter(ot=>!_e.includes(ot))})}})()}deleteAll(){var _e=this;return(0,f.Z)(function*(){if(yield _e._canUseIndexedDBPromise)return function gi(Ie){return bt.apply(this,arguments)}(_e.app)})()}}function J(Ie){return(0,de.h$)(JSON.stringify({version:2,heartbeats:Ie})).length}!function We(Ie){qr(new Q.wA("platform-logger",_e=>new pe(_e),"PRIVATE")),qr(new Q.wA("heartbeat",_e=>new L(_e),"PRIVATE")),ln(ce,"0.7.18",Ie),ln(ce,"0.7.18","esm2017"),ln("fire-js","")}("")},4859:(it,Ae,P)=>{"use strict";P.d(Ae,{wA:()=>N,H0:()=>ce});var f=P(5861),Q=P(2090);class N{constructor(U,V,Y){this.name=U,this.instanceFactory=V,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const de="[DEFAULT]";class ee{constructor(U,V){this.name=U,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const V=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(V)){const Y=new Q.BH;if(this.instancesDeferred.set(V,Y),this.isInitialized(V)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:V});He&&Y.resolve(He)}catch(He){}}return this.instancesDeferred.get(V).promise}getImmediate(U){var V;const Y=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),He=null!==(V=null==U?void 0:U.optional)&&void 0!==V&&V;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(De){if(He)return null;throw De}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function re(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:de})}catch(V){}for(const[V,Y]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(V);try{const De=this.getOrInitializeService({instanceIdentifier:He});Y.resolve(De)}catch(De){}}}}clearInstance(U=de){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const V=Array.from(U.instances.values());yield Promise.all([...V.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...V.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=de){return this.instances.has(U)}getOptions(U=de){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:V={}}=U,Y=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Y,options:V});for(const[De,Oe]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(De)&&Oe.resolve(He);return He}onInit(U,V){var Y;const He=this.normalizeInstanceIdentifier(V),De=null!==(Y=this.onInitCallbacks.get(He))&&void 0!==Y?Y:new Set;De.add(U),this.onInitCallbacks.set(He,De);const Oe=this.instances.get(He);return Oe&&U(Oe,He),()=>{De.delete(U)}}invokeOnInitCallbacks(U,V){const Y=this.onInitCallbacks.get(V);if(Y)for(const He of Y)try{He(U,V)}catch(De){}}getOrInitializeService({instanceIdentifier:U,options:V={}}){let Y=this.instances.get(U);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===de?void 0:he),options:V}),this.instances.set(U,Y),this.instancesOptions.set(U,V),this.invokeOnInitCallbacks(Y,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,Y)}catch(He){}var he;return Y||null}normalizeInstanceIdentifier(U=de){return this.component?this.component.multipleInstances?U:de:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const V=this.getProvider(U.name);if(V.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);V.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const V=new ee(U,this);return this.providers.set(U,V),V}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ae,P)=>{"use strict";P.d(Ae,{in:()=>Q,Yd:()=>re,Ub:()=>ce,Am:()=>he});const f=[];var Q=(()=>{return(U=Q||(Q={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",Q;var U})();const N={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},de=Q.INFO,ee={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},pe=(U,V,...Y)=>{if(V<U.logLevel)return;const He=(new Date).toISOString(),De=ee[V];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[De](`[${He}]  ${U.name}:`,...Y)};class re{constructor(V){this.name=V,this._logLevel=de,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in Q))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?N[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...V),this._logHandler(this,Q.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...V),this._logHandler(this,Q.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...V),this._logHandler(this,Q.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...V),this._logHandler(this,Q.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...V),this._logHandler(this,Q.ERROR,...V)}}function ce(U){f.forEach(V=>{V.setLogLevel(U)})}function he(U,V){for(const Y of f){let He=null;V&&V.level&&(He=N[V.level]),Y.userLogHandler=null===U?null:(De,Oe,...Be)=>{const z=Be.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(Re){return null}}).filter(ae=>ae).join(" ");Oe>=(null!=He?He:De.logLevel)&&U({level:Q[Oe].toLowerCase(),message:z,args:Be,type:De.name})}}}},5861:(it,Ae,P)=>{"use strict";function f(N,de,ee,pe,re,ce,he){try{var U=N[ce](he),V=U.value}catch(Y){return void ee(Y)}U.done?de(V):Promise.resolve(V).then(pe,re)}function Q(N){return function(){var de=this,ee=arguments;return new Promise(function(pe,re){var ce=N.apply(de,ee);function he(V){f(ce,pe,re,he,U,"next",V)}function U(V){f(ce,pe,re,he,U,"throw",V)}he(void 0)})}}P.d(Ae,{Z:()=>Q})}},it=>{it(it.s=735)}]);